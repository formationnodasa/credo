


<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Dict√©e Interactive</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(270deg, #6a11cb, #2575fc, #6a11cb);
      background-size: 600% 600%;
      animation: gradientAnimation 15s ease infinite;
      color: #fff;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      margin: 0;
      padding: 20px;
    }

    @keyframes gradientAnimation {
      0% {background-position: 0% 50%;}
      50% {background-position: 100% 50%;}
      100% {background-position: 0% 50%;}
    }

    .container {
      background: rgba(255,255,255,0.1);
      padding: 30px;
      border-radius: 16px;
      max-width: 700px;
      width: 100%;
      text-align: center;
      backdrop-filter: blur(10px);
      box-shadow: 0 8px 32px rgba(0,0,0,0.25);
    }

    h1 {
      margin-bottom: 20px;
      font-size: 1.8rem;
    }

    select, textarea, button {
      width: 100%;
      margin-top: 12px;
      padding: 12px;
      font-size: 1rem;
      border-radius: 8px;
      border: none;
      outline: none;
    }

    textarea {
      height: 180px;
      resize: vertical;
      background: rgba(255,255,255,0.9);
      color: #333;
    }

    select {
      background: rgba(255,255,255,0.9);
      color: #333;
    }

    .buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 15px;
    }

    .buttons button {
      flex: 1 1 calc(50% - 10px);
      background: #fff;
      color: #2575fc;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.3s;
    }

    .buttons button:hover {
      background: #2575fc;
      color: #fff;
    }

    #result {
      margin-top: 15px;
      font-weight: bold;
      min-height: 1.2em;
      white-space: pre-wrap;
    }
  </style>
</head>
<body>

  <div class="container">
    <h1>üìú Dict√©e Interactive</h1>

    <select id="dictationSelect">
      <option value="laboureur">Le Laboureur et ses enfants</option>
      <option value="cigale">La Cigale et la Fourmi</option>
      <option value="lievre">Le Li√®vre et la grenouille</option>
      <option value="corbeau">Le Corbeau et le Renard</option>
      <option value="grenouille">La Grenouille et le B≈ìuf</option>
      <option value="fourmi">La Fourmi et la Sauterelle</option>
      <option value="tortue">La Tortue et le Li√®vre</option>
      <option value="agneau">Le Loup et l‚ÄôAgneau</option>
      <option value="coq">Le Coq et le Renard</option>
      <option value="poisson">Le Petit Poisson</option>
      <option value="cheval">Le Cheval et l‚Äô√Çne</option>
      <option value="pluie">La Pluie et le Beau Temps</option>
      <option value="chat">Le Chat et la Souris</option>
      <option value="chene">Le Vieux Ch√™ne</option>
      <option value="marchand">Le Marchand et son √Çne</option>
      <option value="papillon">Le Papillon et la Fleur</option>
      <option value="pluieEte">La Pluie d‚Äô√ât√©</option>
      <option value="foret">La For√™t Enchant√©e</option>
      <option value="vent">Le Vent et les Feuilles</option>

      <!-- Dict√©es 21 √† 30 -->
      <option value="carnaval">21. Le Carnaval des Illusions</option>
      <option value="orage">22. L‚ÄôOrage Approchait</option>
      <option value="archeologie">23. Une D√©couverte Arch√©ologique</option>
      <option value="phare">24. Le Phare Abandonn√©</option>
      <option value="violoniste">25. Le Vieux Violoniste</option>
      <option value="bibliotheque">26. La Biblioth√®que Souterraine</option>
      <option value="mission">27. Une Mission P√©rilleuse</option>
      <option value="apparition">28. L‚Äô√âtrange Apparition</option>
      <option value="ambre">29. Le Parfum de l‚ÄôAmbre</option>
      <option value="cloche">30. La Cloche Enfouie</option>

      <!-- Dict√©es 41 √† 50 -->
      <option value="saisons">41. Les Saisons de l‚ÄôAnn√©e</option>
      <option value="ecole">42. √Ä l‚Äô√âcole</option>
      <option value="societe">43. Les R√®gles de la Vie en Soci√©t√©</option>
      <option value="ferme">44. Les Animaux de la Ferme</option>
      <option value="metiers">45. Les M√©tiers d‚ÄôAujourd‚Äôhui</option>
      <option value="alimentation">46. L‚ÄôAlimentation √âquilibr√©e</option>
      <option value="planetes">47. Les Plan√®tes du Syst√®me Solaire</option>
      <option value="environnement">48. Le Respect de l‚ÄôEnvironnement</option>
      <option value="journee">49. La Journ√©e d‚Äôun Enfant</option>
      <option value="inventions">50. Les Inventions qui ont chang√© le monde</option>
<option value="droitsEnfant">Les Droits de l‚ÄôEnfant</option>
<option value="musique">La Musique et ses Bienfaits</option>
<option value="lecture">L‚ÄôImportance de Lire</option>
<option value="corpsHumain">Le Corps Humain</option>
<option value="transports">Les Moyens de Transport</option>
<option value="emotions">Les √âmotions</option>
<option value="cycleEau">Le Cycle de l‚ÄôEau</option>
<option value="explorateurs">Les Grands Explorateurs</option>
<option value="sportSante">Le Sport et la Sant√©</option>
<option value="objetsQuotidien">Les Objets du Quotidien</option>

       </select>

    <div class="buttons">
      <button onclick="playDictation()">‚ñ∂Ô∏è √âcouter</button>
      <button onclick="togglePause()">‚è∏Ô∏è Pause / Reprendre</button>
      <button onclick="slowDown()">üê¢ Ralentir</button>
      <button onclick="speedUp()">üêá Acc√©l√©rer</button>
      <button onclick="checkDictation()">‚úÖ V√©rifier</button>
    </div>

    <textarea id="userInput" placeholder="√âcris ici ta dict√©e..."></textarea>
    <div id="result"></div>
  </div>

  <script>
    const dictations = {
      laboureur: `Travaillez, prenez de la peine :
C'est le fonds qui manque le moins.
Un riche Laboureur, sentant sa mort prochaine,
Fit venir ses enfants, leur parla sans t√©moins.
Gardez-vous, leur dit-il, de vendre l'h√©ritage
Que nous ont laiss√© nos parents.
Un tr√©sor est cach√© dedans.
Je ne sais pas l'endroit ; mais un peu de courage
Vous le fera trouver, vous en viendrez √† bout.
Remuez votre champ d√®s qu'on aura fait l'O√ªt.
Creusez, fouillez, b√™chez ; ne laissez nulle place
O√π la main ne passe et repasse...`,

      cigale: `La Cigale, ayant chant√© Tout l‚Äô√©t√©,
Se trouva fort d√©pourvue Quand la bise fut venue :
Pas un seul petit morceau De mouche ou de vermisseau.
Elle alla crier famine Chez la Fourmi sa voisine...
La priant de lui pr√™ter Quelque grain pour subsister
Jusqu‚Äô√† la saison nouvelle.
¬´ Je vous paierai, lui dit-elle, Avant l‚Äôao√ªt, foi d‚Äôanimal... ¬ª
La Fourmi n‚Äôest pas pr√™teuse ; C‚Äôest l√† son moindre d√©faut.
¬´ Que faisiez-vous au temps chaud ?
‚Äì Nuit et jour √† tout venant Je chantais, ne vous d√©plaise.
‚Äì Vous chantiez ? Eh bien ! dansez maintenant. ¬ª`,

      lievre: `Tout le monde savait que le Li√®vre √©tait l'animal le plus rapide...
Un jour, le Li√®vre proposa une course √† la Tortue. La Chouette donna le d√©part.
Le Li√®vre partit vite, s'arr√™ta pour dormir... et la Tortue gagna la course.`,

      tortue: `Rien ne sert de courir; il faut partir √† point.
Le Li√®vre et la Tortue en sont un t√©moignage...
La Tortue arriva la premi√®re. Eh bien ! lui cria‚Äët‚Äëelle :
¬´ Avais‚Äëje pas raison ? ¬ª`,

      corbeau: `Ma√Ætre Corbeau, sur un arbre perch√©,
Tenait en son bec un fromage.
Ma√Ætre Renard, par l‚Äôodeur all√©ch√©,
Lui tint √† peu pr√®s ce langage :
¬´ H√© ! bonjour, monsieur du Corbeau.
... Cette le√ßon vaut bien un fromage, sans doute. ¬ª`,

      grenouille: `Une Grenouille vit un B≈ìuf Qui lui sembla de belle taille.
Elle, qui n‚Äô√©tait pas grosse en tout comme un ≈ìuf,
Envieuse, s‚Äô√©tend, s‚Äôenfle et cr√®ve...`,

      fourmi: `Nous √©tions au milieu de l'hiver, un jour clair et glacial...
La Sauterelle affam√©e demanda des graines √† la Fourmi,
Mais cette derni√®re lui r√©pondit que ceux qui ne travaillent pas auront faim.`,

      agneau: `La raison du plus fort est toujours la meilleure :
Un Agneau se d√©salt√©rait Dans le courant d‚Äôune onde pure.
Un Loup survint √† jeun et l'accusa faussement...
Il le mangea.`,

      coq: `Sur la branche d‚Äôun arbre √©tait en sentinelle
Un vieux Coq adroit et matois.
¬´ Fr√®re, dit un Renard, adoucissant sa voix... ¬ª
Car c‚Äôest double plaisir de tromper le trompeur.`,

      poisson: `Un petit poisson nageait dans la rivi√®re claire.
Il aimait jouer parmi les algues et les pierres.
Un jour, il rencontra une grenouille qui sautait joyeusement sur la berge.
¬´ Bonjour, petit poisson, veux-tu jouer avec moi ? ¬ª demanda la grenouille.
Le poisson fit un petit saut et accepta avec plaisir.`,

      cheval: `Un cheval et un √¢ne travaillaient ensemble dans un champ.
Le cheval tirait la charrue tandis que l‚Äô√¢ne portait les sacs de graines.
Un jour, l‚Äô√¢ne dit au cheval : ¬´ Tu travailles trop dur, laisse-moi t‚Äôaider davantage. ¬ª
Le cheval r√©pondit : ¬´ Ensemble, nous pouvons tout accomplir. ¬ª
Depuis ce jour, ils travaillaient en √©quipe et √©taient tr√®s heureux.`,

      pluie: `La pluie tombait doucement sur le jardin.
Les fleurs buvaient l‚Äôeau avec joie.
Puis, le beau temps revint avec un grand soleil.
Les oiseaux chantaient et les enfants jouaient dehors.
La pluie et le soleil se succ√©daient pour rendre la nature belle.`,

      chat: `Un chat gris regardait une petite souris courir vite.
La souris cherchait du fromage pr√®s de la porte.
Le chat voulut attraper la souris, mais elle √©tait trop rapide.
Finalement, le chat se fatigua et laissa la souris partir.
La souris s‚Äôenfuit, heureuse d‚Äôavoir √©chapp√© au chat.`,

      chene: `Un vieux ch√™ne se dressait au milieu du champ.
Il avait des branches larges et des feuilles vertes.
Les enfants aimaient jouer √† l‚Äôombre de ce ch√™ne.
Un jour, une temp√™te forte fit tomber une branche.
Mais le vieux ch√™ne resta fier et solide malgr√© les ann√©es.`,

      marchand: `Un marchand avait un √¢ne fid√®le qui l‚Äôaidait √† porter ses marchandises.
Chaque jour, ils traversaient le village ensemble.
Un matin, l‚Äô√¢ne tomba dans un foss√© profond.
Le marchand chercha de l‚Äôaide pour le sauver.
Finalement, l‚Äô√¢ne fut tir√© hors du trou, et tous deux reprirent leur chemin.`,

      papillon: `Un joli papillon color√© voletait autour d‚Äôune fleur.
Il butinait le nectar avec d√©licatesse.
La fleur s‚Äôouvrait sous le soleil chaud de l‚Äô√©t√©.
Le papillon dansait de fleur en fleur, heureux.
Ils vivaient une belle histoire de nature et de beaut√©.`,

      pluieEte: `La pluie d‚Äô√©t√© tombe souvent en fin d‚Äôapr√®s-midi.
Elle rafra√Æchit les champs et les jardins.
Les enfants aiment sauter dans les flaques d‚Äôeau.
Apr√®s la pluie, un arc-en-ciel appara√Æt dans le ciel bleu.
La nature remercie la pluie qui fait tout grandir.`,

      foret: `Dans une for√™t enchant√©e, les arbres parlaient aux voyageurs.
Les animaux y vivaient en paix et en harmonie.
Un petit gar√ßon s‚Äôaventura dans cette for√™t magique.
Il rencontra une f√©e qui lui offrit un cadeau merveilleux.
Il rentra chez lui avec un c≈ìur rempli de joie.`,

      vent: `Le vent soufflait fort dans les arbres du parc.
Les feuilles rouges et jaunes tourbillonnaient dans l‚Äôair.
Elles dansaient une danse folle avant de tomber au sol.
Le vent riait en emportant les feuilles au loin.
C‚Äô√©tait l‚Äôarriv√©e de l‚Äôautomne, saison des couleurs chaudes.`,

      /* Dict√©es 21 √† 30 */
      carnaval: `Le carnaval, organis√© annuellement, attire une foule bigarr√©e.
Les acrobates ex√©cutaient des figures spectaculaires au rythme d‚Äôune fanfare endiabl√©e.
Derri√®re les masques color√©s, les visages restaient m√©connaissables.
Cette atmosph√®re √©ph√©m√®re laissait une impression inoubliable aux spectateurs √©merveill√©s.`,

      orage: `Le ciel s‚Äôassombrissait dangereusement, pr√©sageant un orage imminent.
Les feuilles tourbillonnaient sous les rafales capricieuses du vent.
Les √©clairs z√©braient l‚Äôhorizon dans un fracas assourdissant.
La pluie diluvienne s‚Äôabattit, inondant rapidement les ruelles √©troites.`,

      archeologie: `Les arch√©ologues mirent au jour une s√©pulture mill√©naire enfouie sous la terre.
Les vestiges retrouv√©s √©taient minutieusement analys√©s en laboratoire.
Chaque artefact racontait une parcelle d‚Äôhistoire oubli√©e.
L‚Äô√©quipe r√©digea un compte-rendu rigoureux pour la revue sp√©cialis√©e.`,

      phare: `Isol√© sur une presqu‚Äô√Æle battue par les vents, le vieux phare semblait inhabit√©.
Sa lanterne fissur√©e laissait passer un √©clat vacillant.
La structure, pourtant d√©labr√©e, conservait une prestance singuli√®re.
Le gardien, jadis intransigeant, y avait laiss√© un journal √©nigmatique.`,

      violoniste: `Assis sur un tabouret bancal, le vieil homme jouait du violon.
Ses doigts rid√©s parcouraient l‚Äôarchet avec une pr√©cision remarquable.
La m√©lodie m√©lancolique r√©sonnait dans la ruelle silencieuse.
Quelques passants, fascin√©s, d√©posaient discr√®tement une pi√®ce dans son √©tui.`,

      bibliotheque: `Sous le manoir s‚Äô√©tendait une biblioth√®que secr√®te insoup√ßonn√©e.
Les √©tag√®res
 croulaient sous des volumes poussi√©reux aux reliures anciennes.
Une odeur de parchemin et d‚Äôhumidit√© flottait dans l‚Äôair stagnant.
Parmi les manuscrits, un grimoire √©nigmatique attirait l‚Äôattention.`,

      mission: `Le capitaine accepta une mission particuli√®rement p√©rilleuse.
Il devait franchir les montagnes enneig√©es malgr√© les conditions extr√™mes.
Son √©quipe, bien √©quip√©e, avan√ßait prudemment dans le blizzard.
La moindre erreur aurait pu compromettre l‚Äôexp√©dition tout enti√®re.`,

      apparition: `Un soir, une lueur vacillante traversa le salon d√©sert.
Intrigu√©e, la jeune fille s‚Äôapprocha sans bruit, retenant son souffle.
Elle aper√ßut une silhouette translucide qui flottait doucement.
Son imagination d√©bordante m√™lait r√©alit√© et illusion.`,

      ambre: `Sur les rives orientales, un marchand vendait des fioles d‚Äôambre pr√©cieux.
Son parfum ent√™tant √©voquait les march√©s de Marrakech ou d‚ÄôIstanbul.
Chaque flacon √©tait soigneusement scell√© √† la cire dor√©e.
Les clients affluaient, attir√©s par l‚Äôar√¥me enivrant et myst√©rieux.`,

      cloche: `Lors de travaux de restauration, les ouvriers d√©couvrirent une cloche enfouie.
Elle portait une inscription latine √† moiti√© effac√©e.
Le m√©tal oxyd√© t√©moignait d‚Äôun pass√© r√©volu et glorieux.
Les habitants d√©cid√®rent de la suspendre √† nouveau dans le clocher r√©nov√©.`,

      /* Dict√©es 41 √† 50 */
      saisons: `Le printemps apporte les bourgeons et les premi√®res fleurs color√©es.
L‚Äô√©t√© r√©chauffe les journ√©es et invite aux vacances √† la mer ou √† la montagne.
En automne, les feuilles tombent et les couleurs deviennent chaudes.
L‚Äôhiver recouvre les paysages de neige et fait frissonner les passants.`,

      ecole: `Chaque matin, les √©l√®ves entrent en classe en saluant leur professeur.
Ils √©coutent les le√ßons, participent activement et notent les devoirs.
La r√©cr√©ation est un moment de d√©tente o√π les enfants jouent ensemble.
√Ä la fin de la journ√©e, chacun rentre chez soi, cartable sur le dos.`,

      societe: `Respecter les autres est une valeur essentielle pour bien vivre ensemble.
Il faut attendre son tour, √©couter sans interrompre et aider les plus faibles.
La politesse se manifeste par des mots simples : bonjour, merci, s‚Äôil vous pla√Æt.
Chaque citoyen a des droits, mais aussi des devoirs.`,

      ferme: `Dans la ferme, la vache donne du lait, la poule pond des ≈ìufs, et le cochon fouille la terre.
Le coq chante d√®s l‚Äôaube, et les moutons broutent dans le pr√©.
Les animaux ont besoin de soins, d‚Äôeau et de nourriture.
Le fermier travaille chaque jour pour s‚Äôoccuper d‚Äôeux.`,

      metiers: `Le boulanger pr√©pare le pain que l‚Äôon mange chaque matin.
L‚Äôinfirmi√®re soigne les patients avec douceur et attention.
Le pompier √©teint les incendies et sauve des vies.
Chaque m√©tier est utile pour faire fonctionner la soci√©t√©.`,

      alimentation: `Pour √™tre en bonne sant√©, il faut manger vari√© et √©quilibr√©.
Les fruits et l√©gumes apportent des vitamines.
Il est important de boire de l‚Äôeau et de limiter les sucreries.
Faire du sport compl√®te une alimentation saine.`,

      planetes: `La Terre est la seule plan√®te connue √† abriter la vie.
Elle tourne autour du Soleil comme les autres plan√®tes : Mars, Jupiter ou V√©nus.
Chaque plan√®te a une taille et une composition diff√©rente.
L‚ÄôUnivers reste encore plein de myst√®res √† explorer.`,

      environnement: `Il faut trier les d√©chets, √©conomiser l‚Äôeau et l‚Äô√©lectricit√©.
Les for√™ts doivent √™tre prot√©g√©es pour abriter les animaux.
La pollution ab√Æme la plan√®te et menace notre avenir.
Chaque geste compte pour pr√©server la nature.`,

      journee: `Le matin, l‚Äôenfant se l√®ve, se lave et prend son petit-d√©jeuner‚Ä¶
Il va √† l‚Äô√©cole, apprend de nouvelles choses et joue avec ses amis.
L‚Äôapr√®s-midi, il fait ses devoirs, puis se d√©tend en famille.
Le soir, il se couche pour bien dormir et √™tre en forme le lendemain.`,

      inventions: `L‚Äôimprimerie a permis de diffuser les livres partout dans le monde.
L‚Äô√©lectricit√© a r√©volutionn√© les maisons et les villes.
L‚Äôavion a rapproch√© les continents et facilit√© les voyages.
Internet permet aujourd‚Äôhui de communiquer instantan√©ment.`


      droitsEnfant: `Chaque enfant a le droit d‚Äôaller √† l‚Äô√©cole, d‚Äô√™tre prot√©g√© et aim√©. Il a le droit de jouer, de grandir en bonne sant√© et d‚Äôexprimer ses id√©es. Les adultes doivent veiller √† ce que ses droits soient respect√©s. Un monde plus juste commence par la protection de l‚Äôenfance.`,

      musique: `La musique apaise, fait danser ou r√™ve. Elle accompagne nos √©motions et nos souvenirs. Jouer d‚Äôun instrument demande de la rigueur et de la passion. Gr√¢ce √† elle, les peuples du monde entier peuvent se comprendre sans paroles.`,

      lecture: `Lire permet de d√©couvrir des mondes imaginaires et d‚Äôapprendre de nouvelles choses. Un livre peut faire rire, r√©fl√©chir ou √©mouvoir. La lecture enrichit le vocabulaire et d√©veloppe la m√©moire. Elle est une cl√© pr√©cieuse pour r√©ussir √† l‚Äô√©cole.`,

      corpsHumain: `Le corps humain est une machine incroyable. Le c≈ìur bat sans arr√™t, les poumons nous permettent de respirer. Le cerveau contr√¥le nos mouvements, nos pens√©es et nos sensations. Il faut en prendre soin gr√¢ce √† une bonne hygi√®ne de vie.`,

      transports: `Autrefois, on se d√©pla√ßait √† pied, √† cheval ou en charrette. Aujourd‚Äôhui, les voitures, les trains, les avions et les bateaux relient les villes et les pays. Les transports rapides facilitent les voyages, mais polluent souvent l‚Äôenvironnement. Les solutions √©cologiques se d√©veloppent pour pr√©server la plan√®te.`,

      emotions: `La joie, la tristesse, la peur, la col√®re : les √©motions font partie de la vie. Il est normal d‚Äôen ressentir, mais il faut apprendre √† les exprimer calmement. Parler √† quelqu‚Äôun de confiance peut aider √† se sentir mieux. Comprendre ses √©motions aide √† grandir sereinement.`,

      cycleEau: `L‚Äôeau s‚Äô√©vapore, forme des nuages, retombe en pluie, puis rejoint les rivi√®res et les mers. Ce cycle naturel se r√©p√®te sans cesse. Sans eau, la vie serait impossible sur Terre. Il faut donc l‚Äô√©conomiser et la prot√©ger de la pollution.`,

      explorateurs: `Christophe Colomb a d√©couvert l‚ÄôAm√©rique en 1492. Magellan a fait le tour du monde par la mer. Ces hommes courageux ont permis de mieux conna√Ætre la plan√®te. Leurs voyages ont marqu√© l‚Äôhistoire et ouvert de nouvelles routes.`,

      sportSante: `Faire du sport aide √† rester en forme et √† se sentir bien. Il renforce les muscles, le c≈ìur et le moral. Le sport enseigne aussi le respect des r√®gles, la pers√©v√©rance et l‚Äôesprit d‚Äô√©quipe. M√™me une simple marche quotidienne est b√©n√©fique.`,

      objetsQuotidien: `La lampe √©claire la pi√®ce, le r√©frig√©rateur garde les aliments au frais. La montre donne l‚Äôheure, l‚Äôordinateur permet de travailler ou de jouer. Tous ces objets nous rendent service chaque jour. Apprendre √† les nommer et √† les utiliser correctement est essentiel.`





    };

    let rate = 0.5;
    const minRate = 0.25;
    const maxRate = 2.0;
    let paused = false;
    let speaking = false;
    let queue = [];
    let voice = null;

    function getVoice() {
      const voices = speechSynthesis.getVoices();
      // On garde la m√™me voix dans la variable globale
      if (!voice) {
        voice = voices.find(v => v.lang === 'fr-FR' && /thomas|paul|yves|homme/i.test(v.name)) || voices.find(v => v.lang === 'fr-FR');
      }
      return voice;
    }

    function speak(text) {
      speechSynthesis.cancel();
      queue = [];

      // D√©coupe en parties mots/ponctuations
      const parts = text
        .replace(/\n/g, ' ')
        .split(/([.,;:!?])/g)
        .filter(p => p.trim() !== '');

      for (let part of parts) {
        // Cr√©ation de l'√©nonc√© √† lire
        let utterance = null;
        if (['.', ',', ';', ':', '!', '?'].includes(part)) {
          // On lit la ponctuation sous forme orale (optionnel)
          // ou on peut ne rien lire et juste faire pause
          utterance = new SpeechSynthesisUtterance(part); 
          utterance.lang = 'fr-FR';
          utterance.voice = getVoice();
          utterance.rate = rate;
          // Marque cette utterance comme ponctuation pour pause plus longue
          utterance.isPunctuation = true;
        } else {
          utterance = new SpeechSynthesisUtterance(part.trim());
          utterance.lang = 'fr-FR';
          utterance.voice = getVoice();
          utterance.rate = rate;
          utterance.isPunctuation = false;
        }
        queue.push(utterance);
      }

      speaking = true;
      playQueue();
    }

    async function playQueue() {
      for (let utterance of queue) {
        while (paused) await new Promise(r => setTimeout(r, 100));
        if (!speaking) return;

        speechSynthesis.speak(utterance);
        await new Promise(resolve => {
          utterance.onend = resolve;
        });

        // Pause de 5 secondes apr√®s une ponctuation, sinon pause de 0.5s
        if (utterance.isPunctuation) {
          await new Promise(r => setTimeout(r, 5000)); 
        } else {
          await new Promise(r => setTimeout(r, 500));
        }
      }
      speaking = false;
    }

    function playDictation() {
      const selected = document.getElementById('dictationSelect').value;
      const text = dictations[selected];
      if (text) {
        paused = false;
        speaking = true;
        speak(text);
      }
    }

    function togglePause() {
      paused = !paused;
      if (paused) {
        speechSynthesis.pause();
      } else {
        speechSynthesis.resume();
      }
    }

    function slowDown() {
      if (rate > minRate) {
        rate -= 0.1;
        if (rate < minRate) rate = minRate;
      }
    }

    function speedUp() {
      if (rate < maxRate) {
        rate += 0.1;
        if (rate > maxRate) rate = maxRate;
      }
    }

    function checkDictation() {
      const selected = document.getElementById('dictationSelect').value;
      const original = dictations[selected].replace(/\s+/g, ' ').trim();
      const userText = document.getElementById('userInput').value.replace(/\s+/g, ' ').trim();

      const isExact = original.toLowerCase() === userText.toLowerCase();

      const result = isExact
        ? '‚úÖ Parfait ! Aucune erreur d√©tect√©e.'
        : '‚ùå Il y a des diff√©rences. Relis ta dict√©e et r√©essaie !';

      document.getElementById('result').textContent = `${result}\n\n--- Dict√©e originale ---\n${original}`;
    }

    window.speechSynthesis.onvoiceschanged = () => {
      getVoice();
    };
  </script>
</body>
</html>
