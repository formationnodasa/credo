
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Champs Lexicaux (3 lettres) ‚Äì Jeu Vocal</title>
  <style>
    :root{
      --bg1:#6a11cb; --bg2:#2575fc;
      --card: rgba(255,255,255,.12);
      --glass: blur(12px);
      --txt:#fff; --accent:#fff; --brand:#2575fc;
      --ok:#00e676; --ko:#ff5252;
    }
    *{box-sizing:border-box}
    body{
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(270deg, var(--bg1), var(--bg2), var(--bg1));
      background-size: 600% 600%;
      animation: gradientAnimation 15s ease infinite;
      color: var(--txt);
      min-height: 100vh;
      margin: 0;
      display: grid;
      place-items: center;
      padding: 24px;
    }
    @keyframes gradientAnimation{
      0%{background-position:0% 50%}
      50%{background-position:100% 50%}
      100%{background-position:0% 50%}
    }
    .container{
      background: var(--card);
      backdrop-filter: var(--glass);
      width: min(920px, 94vw);
      border-radius: 20px;
      padding: 28px;
      box-shadow: 0 8px 32px rgba(0,0,0,.25);
      animation: fadeIn .9s ease;
    }
    @keyframes fadeIn{from{opacity:0; transform:translateY(10px)} to{opacity:1; transform:translateY(0)}}
    header{
      display:flex; align-items:center; justify-content:space-between; gap:12px; flex-wrap:wrap
    }
    h1{
      font-weight:800; margin:0; font-size: clamp(22px, 3.2vw, 34px);
      text-shadow: 0 3px 8px rgba(0,0,0,.3);
      letter-spacing:.3px;
    }
    .status{
      display:flex; gap:10px; flex-wrap:wrap; align-items:center; font-weight:600;
      opacity:.95;
    }
    .pill{
      padding:6px 10px; border-radius:999px; background:rgba(255,255,255,.16);
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.16);
      font-size:.95rem
    }
    .display{
      margin:24px 0 10px; display:grid; gap:10px;
    }
    #prefixDisplay{
      font-size: clamp(28px, 5vw, 48px);
      font-weight:900; letter-spacing:.18em; text-align:center;
      text-shadow: 0 3px 8px rgba(0,0,0,.28);
    }
    #definitionDisplay{
      font-size: clamp(16px, 2vw, 20px);
      line-height:1.6; text-align:center;
      background: rgba(0,0,0,.16);
      border-radius:14px; padding:16px 18px;
    }
    .controls{
      display:grid; grid-template-columns: repeat(6,1fr); gap:10px; margin:12px 0 6px;
    }
    button{
      padding:12px; font-size:1.05rem; font-weight:700; border-radius:12px; border:none;
      cursor:pointer; background:#fff; color:var(--brand);
      transition:.25s; box-shadow:0 4px 10px rgba(0,0,0,.1);
    }
    button:hover{ background:var(--brand); color:#fff; box-shadow:0 0 12px #ffffff99, 0 0 18px #2575fcaa }
    button:disabled{opacity:.55; cursor:not-allowed}
    input[type="text"]{
      font-size:1.2rem; padding:14px 16px; border-radius:12px; border:none; width:100%;
      margin:10px 0 14px; background:#fff; color:#222; outline:none; transition:.25s;
    }
    input[type="text"]:focus{ box-shadow:0 0 10px var(--brand); caret-color:var(--brand) }
    #message{ min-height:28px; font-size:1.1rem; font-weight:700; text-align:center; margin:6px 0 0 }
    .divider{ height:1px; background:rgba(255,255,255,.18); margin:18px 0 }
    .bank{
      display:flex; flex-wrap:wrap; gap:10px; justify-content:center;
    }
    .bank button{
      background:rgba(255,255,255,.12); color:#fff; font-weight:800; letter-spacing:.08em;
      border:1px solid rgba(255,255,255,.18);
    }
    .bank button.active{ background:#fff; color:var(--brand) }
    .footnote{
      margin-top:10px; text-align:center; opacity:.85; font-size:.95rem
    }
    .sr-only{ position:absolute; left:-10000px; top:auto; width:1px; height:1px; overflow:hidden; }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>Champs lexicaux (3 lettres) ‚Äì Jeu vocal</h1>
      <div class="status">
        <span class="pill" id="progressPill">0 / 0</span>
        <span class="pill" id="speedPill">Vitesse √ó1.00</span>
        <span class="pill" id="hintPill">Toutes les r√©ponses commencent par&nbsp;<b id="hintPrefix">‚Äì ‚Äì ‚Äì</b></span>
      </div>
    </header>

    <div class="display">
      <div id="prefixDisplay">‚Äì ‚Äì ‚Äì</div>
      <div id="definitionDisplay">Clique un pr√©fixe ci-dessous ou appuie sur ‚ñ∂Ô∏è Jouer.</div>
    </div>

    <input type="text" id="answer" placeholder="√âcris le mot correct (m√™mes 3 lettres) et appuie sur Entr√©e‚Ä¶" autocomplete="off" />

    <div class="controls" role="group" aria-label="Commandes">
      <button id="btnPlay">‚ñ∂Ô∏è Jouer</button>
      <button id="btnSlow">üê¢ Ralentir</button>
      <button id="btnFast">üêá Acc√©l√©rer</button>
      <button id="btnRepeat">üîÅ R√©p√©ter</button>
      <button id="btnSkip">‚è≠ Passer</button>
      <button id="btnBack">‚¨ÖÔ∏è Retour</button>
    </div>

    <div id="message" aria-live="polite"></div>

    <div class="divider"></div>

    <div class="bank" id="initialBank" aria-label="Liste de pr√©fixes (s√©lection rapide)"></div>
    <div class="footnote">Astuce : tu peux changer la vitesse et r√©p√©ter la d√©finition √† volont√©.</div>
  </div>

  <script>
    // --- Donn√©es : champs lexicaux √† TROIS lettres (corrig√©s, sans doublons ni hors-sujet) ---
    // Chaque item = { mot: "Mot", def: "D√©finition" } ; la r√©ponse doit commencer par les 3 lettres du champ.
    const FIELDS = {
      "Cha": [
        {mot:"Chat", def:"Animal domestique qui miaule."},
        {mot:"Chaussette", def:"V√™tement port√© sur le pied et la cheville."},
        {mot:"Chambre", def:"Pi√®ce d‚Äôune maison o√π l‚Äôon dort."},
        {mot:"Chausson", def:"Chaussure l√©g√®re port√©e √† la maison ou pour la danse."},
        {mot:"Chaudron", def:"Grand r√©cipient m√©tallique pour faire chauffer des aliments."},
        {mot:"Chaud", def:"Qui a une temp√©rature √©lev√©e."},
        {mot:"Chauffeur", def:"Personne qui conduit professionnellement un v√©hicule."},
        {mot:"Champ", def:"Terrain cultiv√© ou espace d√©gag√©."},
        {mot:"Chaise", def:"Meuble sur lequel on s‚Äôassoit."},
        {mot:"Chaland", def:"Bateau √† fond plat pour transporter des marchandises."},
        {mot:"Char", def:"V√©hicule antique √† deux roues tir√© par des chevaux."},
        {mot:"Chasseur", def:"Personne qui pratique la chasse."}
      ],
      "Chr": [
        {mot:"Christ", def:"Figure centrale du christianisme."},
        {mot:"Chr√©tien", def:"Personne qui suit les enseignements du Christ."},
        {mot:"Chr√©tient√©", def:"Ensemble des peuples chr√©tiens ; monde chr√©tien."},
        {mot:"Christianisme", def:"Religion fond√©e sur la personne et le message du Christ."},
        {mot:"Christologie", def:"√âtude th√©ologique de la personne du Christ."},
        {mot:"Christogramme", def:"Monogramme sacr√© (par ex. le chrisme ‚òß)."},
        {mot:"Chr√™me", def:"Huile consacr√©e utilis√©e dans certains sacrements."},
        {mot:"Christophe", def:"Pr√©nom masculin courant commen√ßant par ¬´ Chr ¬ª."},
        {mot:"Chromosome", def:"Structure cellulaire portant l'information g√©n√©tique."},
        {mot:"Chronologie", def:"Ordre des √©v√©nements dans le temps."},
        {mot:"Chronique", def:"R√©cit suivi des faits ; ou rubrique r√©guli√®re."}
      ],
      "Cai": [
        {mot:"Caille", def:"Petit oiseau dont on consomme aussi les ≈ìufs."},
        {mot:"Cairn", def:"Monceau de pierres servant de rep√®re."},
        {mot:"Caique", def:"Petit bateau traditionnel de M√©diterran√©e."},
        {mot:"Caissette", def:"Petite bo√Æte ou petit contenant."},
        {mot:"Caillou", def:"Petit fragment de pierre."},
        {mot:"Caisse", def:"Grand contenant ; ou service de paiement d‚Äôun magasin."},
        {mot:"Ca√Øman", def:"Reptile proche du crocodile (√Ø compt√© comme i)."},
        {mot:"Caillebotis", def:"Treillis de lattes de bois ou m√©tal pour le sol."}
      ],
      "Cal": [
        {mot:"Calanque", def:"Anse √©troite et rocheuse en bord de mer."},
        {mot:"Calcaire", def:"Roche ou d√©p√¥t riche en carbonate de calcium."},
        {mot:"Calotte", def:"Petite coiffe ; partie sup√©rieure de la t√™te."},
        {mot:"Calice", def:"Coupe sacr√©e ; aussi enveloppe externe de la fleur."},
        {mot:"Calculatrice", def:"Appareil permettant d‚Äôeffectuer des op√©rations."},
        {mot:"Calcul", def:"Op√©ration ou ensemble d‚Äôop√©rations math√©matiques."},
        {mot:"Calao", def:"Grand oiseau tropical au long bec."},
        {mot:"Calament", def:"Plante aromatique proche de la menthe."},
        {mot:"Calme", def:"√âtat de tranquillit√©, sans agitation."},
        {mot:"Calibre", def:"Diam√®tre int√©rieur d‚Äôun canon ; format ; taille."},
        {mot:"Calendrier", def:"Syst√®me de mesure et d‚Äôorganisation du temps."}
      ],
      "Cam": [
        {mot:"Cam√©ra", def:"Appareil pour filmer ou enregistrer des images."},
        {mot:"Cam√©l√©on", def:"Reptile changeant de couleur."},
        {mot:"Camomille", def:"Plante aux usages m√©dicinaux."},
        {mot:"Camembert", def:"Fromage mou √† cro√ªte fleurie."},
        {mot:"Camion", def:"V√©hicule moteur destin√© au transport de marchandises."},
        {mot:"Camp", def:"Lieu organis√© pour s√©journer temporairement."},
        {mot:"Camping", def:"Activit√© consistant √† loger sous tente ou en plein air."},
        {mot:"Campement", def:"Installation provisoire d‚Äôun camp."},
        {mot:"Cam√©e", def:"Bijou grav√© en relief (coquillage, pierre)."},
        {mot:"Camarade", def:"Compagnon d‚Äô√©tudes, de travail ou de combat."},
        {mot:"Cambriolage", def:"Vol commis par effraction dans un lieu."},
        {mot:"Camphre", def:"Substance aromatique utilis√©e en pharmacie/parfumerie."}
      ],
      "Cap": [
        {mot:"Cape", def:"V√™tement sans manches port√© sur les √©paules."},
        {mot:"Cap", def:"Direction suivie par un navire ; pointe de terre."},
        {mot:"Caprice", def:"Changement brusque d‚Äôhumeur ou de d√©sir."},
        {mot:"Capuchon", def:"Pi√®ce couvrant la t√™te ; petit couvercle."},
        {mot:"Capitaine", def:"Chef militaire ou commandant d‚Äôun navire/√©quipe."},
        {mot:"Capuche", def:"Partie d‚Äôun v√™tement couvrant la t√™te."},
        {mot:"Capable", def:"Qui a la capacit√© de faire quelque chose."},
        {mot:"Captivant", def:"Qui retient fortement l‚Äôattention."},
        {mot:"Capital", def:"Tr√®s important ; ou ensemble de biens financiers."},
        {mot:"Capsule", def:"Petit contenant scell√© ; enveloppe d‚Äôun m√©dicament."}
      ],
      "Ced": [
        {mot:"C√®dre", def:"Conif√®re majestueux au bois odorant."},
        {mot:"C√©dric", def:"Pr√©nom masculin commen√ßant par ¬´ C√©d ¬ª."},
        {mot:"C√©der", def:"Abandonner, vendre ou renoncer √† quelque chose."},
        {mot:"C√©dille", def:"Signe sous la lettre c (√ß)."},
        {mot:"C√©dant", def:"Personne qui c√®de un bien ou un droit."},
        {mot:"C√©dule", def:"Document ou billet officiel (emploi sp√©cialis√©)."},
        {mot:"C√©dulaire", def:"Relatif √† une c√©dule ; imp√¥t c√©dulaire (terme fisc.)."}
      ],
      "Chi": [
        {mot:"Chinchilla", def:"Petit rongeur au pelage tr√®s doux."},
        {mot:"Chili", def:"Piment fort ; aussi nom d‚Äôun plat √©pic√©."},
        {mot:"Chiffre", def:"Symbole num√©rique (0‚Äì9)."},
        {mot:"Chihuahua", def:"Race de chien de tr√®s petite taille."},
        {mot:"Chiffon", def:"Morceau de tissu pour essuyer ou nettoyer."},
        {mot:"Chuintement", def:"Bruit sourd ou sifflant (sons ¬´ ch ¬ª)."},
        {mot:"Chine", def:"Grand pays d‚ÄôAsie √† la Grande Muraille."},
        {mot:"Chicor√©e", def:"Plante utilis√©e en boisson ou comme salade."},
        {mot:"Chic", def:"Qui est √©l√©gant ; bon go√ªt."},
        {mot:"Chimie", def:"Science de la mati√®re et de ses transformations."}
      ],
      "Cir": [
        {mot:"Cirque", def:"Lieu/spectacle avec acrobates et clowns."},
        {mot:"Circuit", def:"Trajet ferm√© ; r√©seau √©lectrique."},
        {mot:"Circulation", def:"D√©placement de v√©hicules, personnes ou fluides."},
        {mot:"Circonscription", def:"Division administrative/√©lectorale."},
        {mot:"Circuler", def:"Se d√©placer ; avancer."},
        {mot:"Circonf√©rence", def:"Ligne qui fait le tour d‚Äôun cercle."},
        {mot:"Circonscrit", def:"Qui est limit√©, d√©limit√©."},
        {mot:"Circulaire", def:"Qui a la forme d‚Äôun cercle ; note diffus√©e √† tous."},
        {mot:"Cire", def:"Substance mall√©able produite par les abeilles."}
      ],
      "Cli": [
        {mot:"Clique", def:"Petit groupe ferm√© de personnes."},
        {mot:"Clic", def:"Bruit sec d‚Äôun m√©canisme ; action sur un bouton."},
        {mot:"Cliquer", def:"Appuyer sur un bouton (souris, interface)."},
        {mot:"Clich√©", def:"Lieu commun ; ou tirage photographique."},
        {mot:"Cliquet", def:"M√©canisme dent√© permettant un mouvement unidirectionnel."},
        {mot:"Cliquetis", def:"Suite de petits bruits secs."},
        {mot:"Client", def:"Personne qui ach√®te un bien ou service."},
        {mot:"Climat", def:"Conditions m√©t√©orologiques d‚Äôune r√©gion sur la dur√©e."},
        {mot:"Climatiser", def:"√âquiper d‚Äôun syst√®me de refroidissement de l‚Äôair."}
      ],
      "Cod": [
        {mot:"Code", def:"Ensemble de r√®gles ; suite de symboles."},
        {mot:"Codeur", def:"Personne qui √©crit du code informatique."},
        {mot:"Coder", def:"√âcrire en code ; chiffrer un message."},
        {mot:"Codage", def:"Action de coder ; syst√®me de repr√©sentation."},
        {mot:"Cod√©tenu", def:"Personne d√©tenue avec une autre."},
        {mot:"Codirecteur", def:"Personne dirigeant un projet √† deux."},
        {mot:"Codisciple", def:"Camarade de classe ; √©l√®ve du m√™me cours."},
        {mot:"Codomaine", def:"Ensemble d‚Äôarriv√©e d‚Äôune fonction (math.)."},
        {mot:"Codifier", def:"Mettre en code ; organiser en r√®gles √©crites."},
        {mot:"Codex", def:"Manuscrit antique reli√© en cahiers."}
      ],
      "Col": [
        {mot:"Colonie", def:"Territoire administr√© par une puissance ; groupe d‚Äôanimaux."},
        {mot:"Colombe", def:"Oiseau symbole de paix."},
        {mot:"Colonel", def:"Grade sup√©rieur d‚Äôofficier."},
        {mot:"Colonisateur", def:"√âtat ou personne qui colonise un territoire."},
        {mot:"Coloriage", def:"Action de colorier un dessin."},
        {mot:"Coller", def:"Fixer avec une colle ; adh√©rer."},
        {mot:"Col√®re", def:"Forte irritation ; emportement."},
        {mot:"Colis", def:"Paquet destin√© √† l‚Äôenvoi."},
        {mot:"Collier", def:"Bijou port√© autour du cou."},
        {mot:"Colline", def:"√âl√©vation de terrain de faible altitude."}
      ],
      "Com": [
        {mot:"Commune", def:"Collectivit√© territoriale ; localit√©."},
        {mot:"Communion", def:"Rite chr√©tien comm√©morant la C√®ne."},
        {mot:"Communication", def:"Action d‚Äô√©changer des informations."},
        {mot:"Commerce", def:"Activit√© d‚Äôachat et de vente."},
        {mot:"Comique", def:"Qui fait rire ; humoriste."},
        {mot:"Com√©die", def:"≈íuvre dramatique destin√©e √† faire rire."},
        {mot:"Commandant", def:"Titre d‚Äôun responsable militaire/a√©rien."},
        {mot:"Commande", def:"Action d‚Äôordonner ; aussi l‚Äôinstruction envoy√©e √† un syst√®me."},
        {mot:"Comm√©moration", def:"C√©l√©bration du souvenir d‚Äôun √©v√©nement."},
        {mot:"Combinaison", def:"Assemblage d‚Äô√©l√©ments ; v√™tement une pi√®ce."}
      ],
      "Con": [
        {mot:"Contrat", def:"Accord de droit entre plusieurs parties."},
        {mot:"Congr√®s", def:"Grande assembl√©e/Salon de professionnels."},
        {mot:"Constitution", def:"Texte fondamental fixant l‚Äôorganisation d‚Äôun √âtat."},
        {mot:"Conduite", def:"Action de diriger un v√©hicule ; comportement."},
        {mot:"Construction", def:"Action d‚Äôassembler pour √©difier ; b√¢timent."},
        {mot:"Confession", def:"Aveu d‚Äôun fait ; appartenance religieuse."},
        {mot:"Confusion", def:"Trouble, m√©lange d‚Äôid√©es ; g√™ne."},
        {mot:"Connaissance", def:"Savoirs poss√©d√©s ; personne connue."},
        {mot:"Conjoint", def:"√âpoux ou √©pouse."},
        {mot:"Conf√©rence", def:"R√©union/Expos√© sur un sujet donn√©."},
        {mot:"Conflit", def:"Opposition entre personnes ou groupes."},
        {mot:"Conteneur", def:"Grande caisse normalis√©e pour le transport."}
      ],
      "Cor": [
        {mot:"Corne", def:"Partie dure sur la t√™te de certains animaux."},
        {mot:"Corps", def:"Partie mat√©rielle d‚Äôun √™tre vivant ; ensemble."},
        {mot:"Corail", def:"Squelette calcaire d‚Äôanimaux marins ; bijou rouge/orange."},
        {mot:"Correction", def:"Action de rectifier ; qualit√© d‚Äôun comportement poli."},
        {mot:"Corriger", def:"Apporter des corrections, rectifier des erreurs."},
        {mot:"Corridor", def:"Long passage √©troit √† l‚Äôint√©rieur d‚Äôun b√¢timent."}
      ],
      "Cou": [
        {mot:"Cour", def:"Espace d√©couvert attenant √† un b√¢timent ; tribunal."},
        {mot:"Coussin", def:"Objet moelleux pour s‚Äôasseoir ou s‚Äôadosser."},
        {mot:"Couette", def:"Couverture √©paisse garnie de duvet ou fibre."},
        {mot:"Couple", def:"Deux personnes unies par amour ; ensemble de deux √©l√©ments."},
        {mot:"Couloir", def:"Passage √©troit dans un b√¢timent."},
        {mot:"Courage", def:"Force morale face au danger ou √† la peur."},
        {mot:"Couper", def:"Sectionner ; interrompre."},
        {mot:"Couture", def:"Action d‚Äôassembler des pi√®ces de tissu."},
        {mot:"Couvercle", def:"Pi√®ce qui ferme un r√©cipient."},
        {mot:"Couinement", def:"Petit bruit aigu et bref."},
        {mot:"Coudrier", def:"Autre nom du noisetier."}
      ],
      // Le bloc initial ¬´ Cru ¬ª √©tait en fait un ensemble de mots en ¬´ Cur ¬ª : on corrige le pr√©fixe.
      "Cur": [
        {mot:"Curiosit√©", def:"D√©sir de savoir ou de d√©couvrir quelque chose."},
        {mot:"Curateur", def:"Personne charg√©e d‚Äôadministrer les biens d‚Äôautrui ; conservateur d‚Äôexpo."},
        {mot:"Curieux", def:"Qui aime apprendre ou poser des questions."},
        {mot:"Cur√©", def:"Pr√™tre catholique responsable d‚Äôune paroisse."},
        {mot:"Curatelle", def:"R√©gime de protection juridique d‚Äôune personne."},
        {mot:"Cure", def:"Traitement suivi pendant une p√©riode ; station thermale."},
        {mot:"Curial", def:"Relatif √† la cour ou au cur√© (emploi sp√©cialis√©)."},
        {mot:"Curatif", def:"Qui gu√©rit ou vise √† gu√©rir."}
      ],
      "The": [
        {mot:"Th√©√¢tre", def:"Lieu ou art o√π l‚Äôon joue des pi√®ces."},
        {mot:"Th√©ologie", def:"√âtude des doctrines et croyances religieuses."},
        {mot:"Th√©ologien", def:"Sp√©cialiste de la th√©ologie."},
        {mot:"Th√©orie", def:"Ensemble d‚Äôid√©es expliquant un ph√©nom√®ne."},
        {mot:"Thermom√®tre", def:"Appareil qui mesure la temp√©rature."},
        {mot:"Thermoth√©rapie", def:"Traitement m√©dical par la chaleur."},
        {mot:"Th√©rapie", def:"Traitement d‚Äôune maladie."},
        {mot:"Thermique", def:"Relatif √† la chaleur."},
        {mot:"Thermodynamique", def:"Science des relations entre chaleur et √©nergie."},
        {mot:"Thermostat", def:"Appareil qui r√©gule la temp√©rature."}
      ],
      "Bar": [
        {mot:"Barre", def:"Tige longue et rigide ; poids en musculation."},
        {mot:"Bar", def:"√âtablissement o√π l‚Äôon consomme des boissons."},
        {mot:"Baraque", def:"Habitation rudimentaire ; petite maison."},
        {mot:"Baraquement", def:"Ensemble de constructions provisoires."},
        {mot:"Barjot", def:"Fou, d√©s√©quilibr√© (familier)."},
        {mot:"Barboteuse", def:"V√™tement une pi√®ce pour b√©b√©."},
        {mot:"Barboter", def:"Se tremper et remuer dans l‚Äôeau."},
        {mot:"Barbe", def:"Poils du menton et des joues."},
        {mot:"Baril", def:"Gros contenant cylindrique pour liquides."},
        {mot:"Barbel√©", def:"Fil de fer muni de pointes."}
      ],
      "Bic": [
        {mot:"Bic", def:"Stylo √† bille de marque devenue nom commun."},
        {mot:"Bicarbonate", def:"Sel servant notamment √† neutraliser des acides."},
        {mot:"Bicam√©ral", def:"Qui comporte deux chambres (parlement)."},
        {mot:"Bic√©phale", def:"Qui poss√®de deux t√™tes."},
        {mot:"Biceps", def:"Muscle du bras √† deux chefs."},
        {mot:"Bichonner", def:"Soigner avec beaucoup d‚Äôattention."},
        {mot:"Bichon", def:"Petit chien √† poil soyeux."},
        {mot:"Bicolore", def:"Qui a deux couleurs."},
        {mot:"Bicyclette", def:"V√©hicule √† deux roues propuls√© par p√©dalage."},
        {mot:"Bicentenaire", def:"Qui a deux cents ans ; 200e anniversaire."}
      ]
    };

    // --- √âl√©ments DOM ---
    const prefixDisplay = document.getElementById("prefixDisplay");
    const definitionDisplay = document.getElementById("definitionDisplay");
    const answerInput = document.getElementById("answer");
    const message = document.getElementById("message");
    const btnPlay = document.getElementById("btnPlay");
    const btnSlow = document.getElementById("btnSlow");
    const btnFast = document.getElementById("btnFast");
    const btnRepeat = document.getElementById("btnRepeat");
    const btnSkip = document.getElementById("btnSkip");
    const btnBack = document.getElementById("btnBack");
    const initialBank = document.getElementById("initialBank");
    const progressPill = document.getElementById("progressPill");
    const speedPill = document.getElementById("speedPill");
    const hintPrefix = document.getElementById("hintPrefix");

    // --- √âtat du jeu ---
    let currentPrefix = null;
    let currentIndex = 0;
    let speechRate = 1;

    // --- Utilitaires ---
    const normalize = s => s
      .toLowerCase()
      .normalize('NFD').replace(/[\u0300-\u036f]/g,'')  // retire accents
      .replace(/[^a-z\-‚Äô' ]/g,'')                       // garde lettres/espaces/apostrophes
      .trim();

    function updatePills(){
      const total = currentPrefix ? FIELDS[currentPrefix].length : 0;
      progressPill.textContent = total ? `${currentIndex+1} / ${total}` : `0 / 0`;
      speedPill.textContent = `Vitesse √ó${speechRate.toFixed(2)}`;
      hintPrefix.textContent = currentPrefix || "‚Äì ‚Äì ‚Äì";
    }

    function ttsCancel(){ if ('speechSynthesis' in window) speechSynthesis.cancel(); }
    function speak(text, rate=speechRate){
      if(!('speechSynthesis' in window)) { return; }
      ttsCancel();
      const u = new SpeechSynthesisUtterance(text);
      u.lang = 'fr-FR';
      u.rate = rate;
      speechSynthesis.speak(u);
    }

    function announce(){
      if(!currentPrefix) return;
      const item = FIELDS[currentPrefix][currentIndex];
      const intro = `Toutes les bonnes r√©ponses commencent par les lettres : ${currentPrefix}.`;
      const def  = item.def;
      speak(`${intro} D√©finition : ${def}`);
    }

    function renderCard(){
      if(!currentPrefix){
        prefixDisplay.textContent = "‚Äì ‚Äì ‚Äì";
        definitionDisplay.textContent = "Choisis un champ lexical ci-dessous pour commencer, ou appuie sur ‚ñ∂Ô∏è Jouer pour d√©marrer au premier.";
        updatePills();
        return;
      }
      const item = FIELDS[currentPrefix][currentIndex];
      prefixDisplay.textContent = currentPrefix;
      definitionDisplay.textContent = item.def;
      message.textContent = "√âcris le mot correspondant. (Il doit commencer par " + currentPrefix + ")";
      message.style.color = "#fff";
      answerInput.value = "";
      answerInput.placeholder = `Un mot qui commence par ¬´ ${currentPrefix} ¬ª‚Ä¶`;
      answerInput.disabled = false;
      updatePills();
    }

    function setPrefix(prefix){
      if(!FIELDS[prefix]) return;
      currentPrefix = prefix;
      currentIndex = 0;
      highlightBank(prefix);
      renderCard();
      announce();
      answerInput.focus();
    }

    function next(){
      if(!currentPrefix) return;
      currentIndex++;
      const list = FIELDS[currentPrefix];
      if(currentIndex >= list.length){
        currentIndex = list.length-1;
        message.textContent = `üéâ Bravo ! Tu as termin√© le champ lexical ${currentPrefix}. Choisis un autre pr√©fixe ci-dessous.`;
        message.style.color = "#00e676";
        answerInput.disabled = true;
        ttsCancel();
        speak(`Bravo ! Tu as termin√© le champ lexical ${currentPrefix}.`);
        return;
      }
      renderCard();
      announce();
      answerInput.focus();
    }

    function back(){
      if(!currentPrefix) return;
      if(currentIndex > 0){
        currentIndex--;
        renderCard();
        announce();
        answerInput.focus();
      }
    }

    function repeat(){ announce(); }

    function slower(){
      speechRate = Math.max(0.5, speechRate - 0.25);
      updatePills();
      announce();
    }
    function faster(){
      speechRate = Math.min(2, speechRate + 0.25);
      updatePills();
      announce();
    }

    function check(){
      if(!currentPrefix) return;
      const item = FIELDS[currentPrefix][currentIndex];
      const user = normalize(answerInput.value);
      const target = normalize(item.mot);
      const need = normalize(currentPrefix);

      // Doit commencer exactement par le pr√©fixe de 3 lettres ET correspondre au mot attendu
      if(user && user.startsWith(need) && user === target){
        message.textContent = "‚úÖ Correct ! Bien jou√©.";
        message.style.color = "#00e676";
        speak("Correct ! Bien jou√©.");
        setTimeout(next, 900);
      }else{
        message.textContent = `‚ùå Incorrect. Il fallait : ${item.mot}.`;
        message.style.color = "#ff5252";
        speak(`Incorrect. Il fallait : ${item.mot}.`);
      }
    }

    // --- Banque de pr√©fixes cliquables ---
    function buildBank(){
      const keys = Object.keys(FIELDS);
      keys.sort((a,b)=>a.localeCompare(b,'fr'));
      initialBank.innerHTML = "";
      for(const k of keys){
        const btn = document.createElement("button");
        btn.textContent = k.toUpperCase();
        btn.setAttribute("aria-label", `Choisir le champ lexical ${k}`);
        btn.addEventListener("click", ()=> setPrefix(k));
        initialBank.appendChild(btn);
      }
    }
    function highlightBank(k){
      [...initialBank.children].forEach(b=>{
        b.classList.toggle('active', b.textContent === k.toUpperCase());
      });
    }

    // --- √âcouteurs ---
    btnPlay.addEventListener("click", ()=>{
      if(!currentPrefix){
        const first = Object.keys(FIELDS).sort((a,b)=>a.localeCompare(b,'fr'))[0];
        setPrefix(first);
      }else{
        announce();
      }
    });
    btnSlow.addEventListener("click", slower);
    btnFast.addEventListener("click", faster);
    btnRepeat.addEventListener("click", repeat);
    btnSkip.addEventListener("click", next);
    btnBack.addEventListener("click", back);

    answerInput.addEventListener("keydown", (e)=>{
      if(e.key === "Enter") check();
    });

    // --- D√©marrage ---
    window.addEventListener("load", ()=>{
      buildBank();
      renderCard();
      if(!('speechSynthesis' in window)){
        message.innerHTML = "‚ÑπÔ∏è La synth√®se vocale n'est pas disponible sur ce navigateur.";
      }
    });
  </script>
</body>
</html>