


<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Dict√©e Interactive</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(270deg, #6a11cb, #2575fc, #6a11cb);
      background-size: 600% 600%;
      animation: gradientAnimation 15s ease infinite;
      color: #fff;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      margin: 0;
      padding: 20px;
    }

    @keyframes gradientAnimation {
      0% {background-position: 0% 50%;}
      50% {background-position: 100% 50%;}
      100% {background-position: 0% 50%;}
    }

    .container {
      background: rgba(255,255,255,0.1);
      padding: 30px;
      border-radius: 16px;
      max-width: 700px;
      width: 100%;
      text-align: center;
      backdrop-filter: blur(10px);
      box-shadow: 0 8px 32px rgba(0,0,0,0.25);
    }

    h1 {
      margin-bottom: 20px;
      font-size: 1.8rem;
    }

    select, textarea, button {
      width: 100%;
      margin-top: 12px;
      padding: 12px;
      font-size: 1rem;
      border-radius: 8px;
      border: none;
      outline: none;
    }

    textarea {
      height: 180px;
      resize: vertical;
      background: rgba(255,255,255,0.9);
      color: #333;
    }

    select {
      background: rgba(255,255,255,0.9);
      color: #333;
    }

    .buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 15px;
    }

    .buttons button {
      flex: 1 1 calc(50% - 10px);
      background: #fff;
      color: #2575fc;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.3s;
    }

    .buttons button:hover {
      background: #2575fc;
      color: #fff;
    }

    #result {
      margin-top: 15px;
      font-weight: bold;
      min-height: 1.2em;
      white-space: pre-wrap;
    }
  </style>
</head>
<body>

  <div class="container">
    <h1>üìú Dict√©e Interactive</h1>

    <select id="dictationSelect">
      <option value="laboureur">Le Laboureur et ses enfants</option>
      <option value="cigale">La Cigale et la Fourmi</option>
      <option value="lievre">Le Li√®vre et la grenouille</option>
      <option value="corbeau">Le Corbeau et le Renard</option>
      <option value="grenouille">La Grenouille et le B≈ìuf</option>
      <option value="fourmi">La Fourmi et la Sauterelle</option>
      <option value="tortue">La Tortue et le Li√®vre</option>
      <option value="agneau">Le Loup et l‚ÄôAgneau</option>
      <option value="Le Coq et le Renard"> Le Coq et le Renard</option>

<option value="poisson">Le Petit Poisson</option>
<option value="cheval">Le Cheval et l‚Äô√Çne</option>
<option value="pluie">La Pluie et le Beau Temps</option>
<option value="chat">Le Chat et la Souris</option>
<option value="chene">Le Vieux Ch√™ne</option>
<option value="marchand">Le Marchand et son √Çne</option>
<option value="papillon">Le Papillon et la Fleur</option>
<option value="pluieEte">La Pluie d‚Äô√ât√©</option>
<option value="foret">La For√™t Enchant√©e</option>
<option value="vent">Le Vent et les Feuilles</option>

    </select>

    <div class="buttons">
      <button onclick="playDictation()">‚ñ∂Ô∏è √âcouter</button>
      <button onclick="togglePause()">‚è∏Ô∏è Pause / Reprendre</button>
      <button onclick="slowDown()">üê¢ Ralentir</button>
      <button onclick="speedUp()">üêá Acc√©l√©rer</button>
      <button onclick="checkDictation()">‚úÖ V√©rifier</button>
    </div>

    <textarea id="userInput" placeholder="√âcris ici ta dict√©e..."></textarea>

    <div id="result"></div>
  </div>

  <script>
    const dictations = {
      laboureur: `Travaillez, prenez de la peine :
C'est le fonds qui manque le moins.
Un riche Laboureur, sentant sa mort prochaine,
Fit venir ses enfants, leur parla sans t√©moins.
Gardez-vous, leur dit-il, de vendre l'h√©ritage
Que nous ont laiss√© nos parents.
Un tr√©sor est cach√© dedans.
Je ne sais pas l'endroit ; mais un peu de courage
Vous le fera trouver, vous en viendrez √† bout.
Remuez votre champ d√®s qu'on aura fait l'O√ªt.
Creusez, fouillez, b√™chez ; ne laissez nulle place
O√π la main ne passe et repasse...`,

      cigale: `La Cigale, ayant chant√© Tout l‚Äô√©t√©, se trouva fort d√©pourvue
Quand la bise fut venue :
Pas un seul petit morceau
De mouche ou de vermisseau.
Elle alla crier famine
Chez la Fourmi sa voisine,
La priant de lui pr√™ter
Quelque grain pour subsister
Jusqu‚Äô√† la saison nouvelle
¬´ Je vous paierai, lui dit-elle,
Avant l‚Äôao√ªt, foi d‚Äôanimal,
Int√©r√™t et principal. ¬ª
La Fourmi n‚Äôest pas pr√™teuse ;
C‚Äôest l√† son moindre d√©faut.
¬´ Que faisiez-vous au temps chaud ?
Dit-elle √† cette emprunteuse.
‚Äì Nuit et jour √† tout venant
Je chantais, ne vous d√©plaise.
‚Äì Vous chantiez ? j‚Äôen suis fort aise :
Eh bien ! dansez maintenant. ¬ª`,

      lievre: `Tout le monde savait que le Li√®vre √©tait l'animal le plus rapide...
Un jour, le Li√®vre proposa une course √† la Tortue. La Chouette donna le d√©part.
Le Li√®vre partit vite, s'arr√™ta pour dormir... et la Tortue gagna la course.`,

      tortue: `Un Li√®vre en son g√Æte songeait
(Car que faire en un g√Æte, √† moins que l‚Äôon ne songe ?) ;
Dans un profond ennui ce Li√®vre se plongeait :
Cet animal est triste, et la crainte le ronge.
¬´ Les gens de naturel peureux
Sont, disait-il, bien malheureux ;
Ils ne sauraient manger morceau qui leur profite,
Jamais un plaisir pur, toujours assauts divers.
Voil√† comme je vis : cette crainte maudite
M‚Äôemp√™che de dormir, sinon les yeux ouverts.
‚Äì Corrigez-vous, dira quelque sage cervelle.
‚Äì Et la peur se corrige-t-elle ?
Je crois m√™me qu‚Äôen bonne foi
Les hommes ont peur comme moi ¬ª
Ainsi raisonnait notre Li√®vre,
Et cependant faisait le guet.
Il √©tait douteux, inquiet :
Un souffle, une ombre, un rien, tout lui donnait la fi√®vre.
Le m√©lancolique animal,
En r√™vant √† cette mati√®re,
Entend un l√©ger bruit : ce lui fut un signal
Pour s‚Äôenfuir devers sa tani√®re.
Il s‚Äôen alla passer sur le bord d‚Äôun √©tang.
Grenouilles aussit√¥t de sauter dans les ondes,
Grenouilles de rentrer en leurs grottes profondes.
¬´ Oh ! dit-il, j‚Äôen fais faire autant
Qu‚Äôon m‚Äôen fait faire ! Ma pr√©sence
Effraye aussi les gens, je mets l‚Äôalarme au camp !
Et d‚Äôo√π me vient cette vaillance ?
Comment ! des animaux qui tremblent devant moi !
Je suis donc un foudre de guerre ?
Il n‚Äôest, je le vois bien, si poltron sur la terre
Qui ne puisse trouver un plus poltron que soi. ¬ª`,

      corbeau: `Ma√Ætre Corbeau, sur un arbre perch√©,
Tenait en son bec un fromage.
Ma√Ætre Renard, par l‚Äôodeur all√©ch√©,
Lui tint √† peu pr√®s ce langage :
¬´ H√© ! bonjour, monsieur du Corbeau.
Que vous √™tes joli ! que vous me semblez beau !
Sans mentir, si votre ramage
Se rapporte √† votre plumage,
Vous √™tes le ph√©nix des h√¥tes de ces bois. ¬ª
√Ä ces mots le Corbeau ne se sent pas de joie ;
Et pour montrer sa belle voix
Il ouvre un large bec, laisse tomber sa proie.
Le Renard s‚Äôen saisit, et dit : ¬´ Mon bon monsieur,
Apprenez que tout flatteur
Vit aux d√©pens de celui qui l‚Äô√©coute :
Cette le√ßon vaut bien un fromage, sans doute. ¬ª
Le Corbeau, honteux et confus,
Jura, mais un peu tard, qu‚Äôon ne l‚Äôy prendrait plus.`,

      grenouille: `Une Grenouille vit un B≈ìuf
Qui lui sembla de belle taille.
Elle, qui n‚Äô√©tait pas grosse en tout comme un ≈ìuf,
Envieuse, s‚Äô√©tend, et s‚Äôenfle et se travaille,
Pour √©galer l‚Äôanimal en grosseur ;
Disant : ¬´ Regardez bien, ma s≈ìur ;
Est-ce assez ? dites-moi ; n‚Äôy suis-je point encore ?
‚Äì Nenni. ‚Äì M‚Äôy voici donc ? ‚Äì Point du tout. ‚Äì M‚Äôy voil√† ?
‚Äì Vous n‚Äôen approchez point. ¬ª La ch√©tive p√©core
S‚Äôenfla si bien qu‚Äôelle creva.
Le monde est plein de gens qui ne sont pas plus sages :
Tout bourgeois veut b√¢tir comme les grands seigneurs,
Tout petit prince a des ambassadeurs,
Tout marquis veut avoir des pages.`,

      fourmi: `Nous √©tions au milieu de l'hiver, un jour clair et glacial...
La Sauterelle affam√©e demanda des graines √† la Fourmi,
Mais cette derni√®re lui r√©pondit que ceux qui ne travaillent pas auront faim.`,

      agneau: `La raison du plus fort est toujours la meilleure :
Nous l‚Äôallons montrer tout √† l‚Äôheure.
Un Agneau se d√©salt√©rait
Dans le courant d‚Äôune onde pure ;
Un Loup survient √† jeun, qui cherchait aventure,
Et que la faim en ces lieux attirait.
¬´ Qui te rend si hardi de troubler mon breuvage ?
Dit cet animal plein de rage :
Tu seras ch√¢ti√© de ta t√©m√©rit√©.
‚Äì Sire, r√©pond l‚ÄôAgneau, que Votre Majest√©
Ne se mette pas en col√®re ;
Mais plut√¥t qu‚Äôelle consid√®re
Que je me vas d√©salt√©rant
Dans le courant,
Plus de vingt pas au-dessous d‚Äôelle ;
Et que par cons√©quent, en aucune fa√ßon,
Je ne puis troubler sa boisson.
‚Äì Tu la troubles, reprit cette b√™te cruelle ;
21
Et je sais que de moi tu m√©dis l‚Äôan pass√©.
‚Äì Comment l‚Äôaurais-je fait si je n‚Äô√©tais pas n√© ?
Reprit l‚ÄôAgneau, je tette encore ma m√®re
‚Äì Si ce n‚Äôest toi, c‚Äôest donc ton fr√®re.
‚Äì Je n‚Äôen ai point. ‚Äì C‚Äôest donc quelqu‚Äôun des tiens
Car vous ne m‚Äô√©pargnez gu√®re,
Vous, vos bergers et vos chiens.
On me l‚Äôa dit : il faut que je me venge. ¬ª
L√†-dessus, au fond des for√™ts
Le Loup l‚Äôemporte et puis le mange,
Sans autre forme de proc√®s.`,

      Le Coq et le Renard: `Sur la branche d‚Äôun arbre √©tait en sentinelle
Un vieux Coq adroit et matois.
¬´ Fr√®re, dit un Renard, adoucissant sa voix,
Nous ne sommes plus en querelle :
Paix g√©n√©rale cette fois.
Je viens te l‚Äôannoncer, descends, que je t‚Äôembrasse.
Ne me retarde point, de gr√¢ce ;
Je dois faire aujourd‚Äôhui vingt postes sans manquer.
Les tiens et toi pouvez vaquer,
Sans nulle crainte, √† vos affaires ;
Nous vous y servirons en fr√®res.
Faites-en les feux d√®s ce soir,
Et cependant, viens recevoir
Le baiser d‚Äôamour fraternel.
‚Äì Ami, reprit le Coq, je ne pouvais jamais
Apprendre une plus douce et meilleure nouvelle
Que celle
De cette paix ;
Et ce m‚Äôest une double joie
73
De la tenir de toi. Je vois deux l√©vriers,
Qui, je m‚Äôassure, sont courriers
Que pour ce sujet on m‚Äôenvoie.
Ils vont vite, et seront dans un moment √† nous
Je descends : nous pourrons nous entre-baiser tous.
‚Äì Adieu, dit le Renard, ma traite est longue √† faire :
Nous nous r√©jouirons du succ√®s de l‚Äôaffaire
Une autre fois. ¬ª Le galant aussit√¥t
Tire ses gr√®gues, gagne au haut,
Mal content de son stratag√®me.
Et notre vieux coq en soi-m√™me
Se mit √† rire de sa peur ;
Car c‚Äôest double plaisir de tromper le trompeur.`




poisson: `Un petit poisson nageait dans la rivi√®re claire.
Il aimait jouer parmi les algues et les pierres.‚Ä®Un jour, il rencontra une grenouille qui sautait joyeusement sur la berge.‚Ä®¬´ Bonjour, petit poisson, veux-tu jouer avec moi ? ¬ª demanda la grenouille.‚Ä®Le poisson fit un petit saut et accepta avec plaisir.`,
cheval: Un cheval et un √¢ne travaillaient ensemble dans un champ. Le cheval tirait la charrue tandis que l‚Äô√¢ne portait les sacs de graines. Un jour, l‚Äô√¢ne dit au cheval : ¬´ Tu travailles trop dur, laisse-moi t‚Äôaider davantage. ¬ª Le cheval r√©pondit : ¬´ Ensemble, nous pouvons tout accomplir. ¬ª Depuis ce jour, ils travaillaient en √©quipe et √©taient tr√®s heureux.,
pluie: La pluie tombait doucement sur le jardin. Les fleurs buvaient l‚Äôeau avec joie. Puis, le beau temps revint avec un grand soleil. Les oiseaux chantaient et les enfants jouaient dehors. La pluie et le soleil se succ√©daient pour rendre la nature belle.,
chat: Un chat gris regardait une petite souris courir vite. La souris cherchait du fromage pr√®s de la porte. Le chat voulut attraper la souris, mais elle √©tait trop rapide. Finalement, le chat se fatigua et laissa la souris partir. La souris s‚Äôenfuit, heureuse d‚Äôavoir √©chapp√© au chat.,
chene: Un vieux ch√™ne se dressait au milieu du champ. Il avait des branches larges et des feuilles vertes. Les enfants aimaient jouer √† l‚Äôombre de ce ch√™ne. Un jour, une temp√™te forte fit tomber une branche. Mais le vieux ch√™ne resta fier et solide malgr√© les ann√©es.,
marchand: Un marchand avait un √¢ne fid√®le qui l‚Äôaidait √† porter ses marchandises. Chaque jour, ils traversaient le village ensemble. Un matin, l‚Äô√¢ne tomba dans un foss√© profond. Le marchand chercha de l‚Äôaide pour le sauver. Finalement, l‚Äô√¢ne fut tir√© hors du trou, et tous deux reprirent leur chemin.,
papillon: Un joli papillon color√© voletait autour d‚Äôune fleur. Il butinait le nectar avec d√©licatesse. La fleur s‚Äôouvrait sous le soleil chaud de l‚Äô√©t√©. Le papillon dansait de fleur en fleur, heureux. Ils vivaient une belle histoire de nature et de beaut√©.,

pluieEte: La pluie d‚Äô√©t√© tombe souvent en fin d‚Äôapr√®s-midi. Elle rafra√Æchit les champs et les jardins. Les enfants aiment sauter dans les flaques d‚Äôeau. Apr√®s la pluie, un arc-en-ciel appara√Æt dans le ciel bleu. La nature remercie la pluie qui fait tout grandir.,

foret: Dans une for√™t enchant√©e, les arbres parlaient aux voyageurs. Les animaux y vivaient en paix et en harmonie. Un petit gar√ßon s‚Äôaventura dans cette for√™t magique. Il rencontra une f√©e qui lui offrit un cadeau merveilleux. Il rentra chez lui avec un c≈ìur rempli de joie.,

vent: Le vent soufflait fort dans les arbres du parc. Les feuilles rouges et jaunes tourbillonnaient dans l‚Äôair. Elles dansaient une danse folle avant de tomber au sol. Le vent riait en emportant les feuilles au loin. C‚Äô√©tait l‚Äôarriv√©e de l‚Äôautomne, saison des couleurs chaudes.,
    };


    let rate = 0.5;
    const minRate = 0.25;
    const maxRate = 2.0;
    let paused = false;
    let speaking = false;
    let queue = [];
    let voice = null;

    function getVoice() {
      const voices = speechSynthesis.getVoices();
      // On garde la m√™me voix dans la variable globale
      if (!voice) {
        voice = voices.find(v => v.lang === 'fr-FR' && /thomas|paul|yves|homme/i.test(v.name)) || voices.find(v => v.lang === 'fr-FR');
      }
      return voice;
    }

    function speak(text) {
      speechSynthesis.cancel();
      queue = [];

      // D√©coupe en parties mots/ponctuations
      const parts = text
        .replace(/\n/g, ' ')
        .split(/([.,;:!?])/g)
        .filter(p => p.trim() !== '');

      for (let part of parts) {
        // Cr√©ation de l'√©nonc√© √† lire
        let utterance = null;
        if (['.', ',', ';', ':', '!', '?'].includes(part)) {
          // On lit la ponctuation sous forme orale (optionnel)
          // ou on peut ne rien lire et juste faire pause
          utterance = new SpeechSynthesisUtterance(part); 
          utterance.lang = 'fr-FR';
          utterance.voice = getVoice();
          utterance.rate = rate;
          // Marque cette utterance comme ponctuation pour pause plus longue
          utterance.isPunctuation = true;
        } else {
          utterance = new SpeechSynthesisUtterance(part.trim());
          utterance.lang = 'fr-FR';
          utterance.voice = getVoice();
          utterance.rate = rate;
          utterance.isPunctuation = false;
        }
        queue.push(utterance);
      }

      speaking = true;
      playQueue();
    }

    async function playQueue() {
      for (let utterance of queue) {
        while (paused) await new Promise(r => setTimeout(r, 100));
        if (!speaking) return;

        speechSynthesis.speak(utterance);
        await new Promise(resolve => {
          utterance.onend = resolve;
        });

        // Pause de 5 secondes apr√®s une ponctuation, sinon pause de 0.5s
        if (utterance.isPunctuation) {
          await new Promise(r => setTimeout(r, 5000)); 
        } else {
          await new Promise(r => setTimeout(r, 500));
        }
      }
      speaking = false;
    }

    function playDictation() {
      const selected = document.getElementById('dictationSelect').value;
      const text = dictations[selected];
      if (text) {
        paused = false;
        speaking = true;
        speak(text);
      }
    }

    function togglePause() {
      paused = !paused;
      if (paused) {
        speechSynthesis.pause();
      } else {
        speechSynthesis.resume();
      }
    }

    function slowDown() {
      if (rate > minRate) {
        rate -= 0.1;
        if (rate < minRate) rate = minRate;
      }
    }

    function speedUp() {
      if (rate < maxRate) {
        rate += 0.1;
        if (rate > maxRate) rate = maxRate;
      }
    }

    function checkDictation() {
      const selected = document.getElementById('dictationSelect').value;
      const original = dictations[selected].replace(/\s+/g, ' ').trim();
      const userText = document.getElementById('userInput').value.replace(/\s+/g, ' ').trim();

      const isExact = original.toLowerCase() === userText.toLowerCase();

      const result = isExact
        ? '‚úÖ Parfait ! Aucune erreur d√©tect√©e.'
        : '‚ùå Il y a des diff√©rences. Relis ta dict√©e et r√©essaie !';

      document.getElementById('result').textContent = `${result}\n\n--- Dict√©e originale ---\n${original}`;
    }

    window.speechSynthesis.onvoiceschanged = () => {
      getVoice();
    };
  </script>
</body>
</html>
