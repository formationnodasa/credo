<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Multijoueur</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            width: 100%;
            max-width: 500px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            overflow: hidden;
        }

        .screen {
            display: none;
            padding: 30px;
            flex-direction: column;
        }

        .active {
            display: flex;
        }

        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 20px;
            font-size: 28px;
        }

        h2 {
            text-align: center;
            color: #555;
            margin-bottom: 15px;
            font-size: 22px;
        }

        p {
            text-align: center;
            color: #666;
            margin-bottom: 25px;
            line-height: 1.5;
        }

        .card {
            background: #f9f9f9;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }

        .btn {
            padding: 15px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 8px 0;
            text-align: center;
            width: 100%;
        }

        .btn-primary {
            background: #2196F3;
            color: white;
        }

        .btn-primary:hover {
            background: #1976D2;
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: transparent;
            border: 2px solid #2196F3;
            color: #2196F3;
        }

        .btn-secondary:hover {
            background: #e3f2fd;
        }

        .btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .room-code {
            text-align: center;
            margin: 20px 0;
        }

        .room-code-label {
            font-size: 16px;
            color: #666;
            margin-bottom: 10px;
        }

        .room-code-value {
            font-size: 36px;
            font-weight: bold;
            letter-spacing: 5px;
            color: #2196F3;
            background: #e3f2fd;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
        }

        .input-group {
            margin: 20px 0;
        }

        .input-label {
            display: block;
            margin-bottom: 8px;
            color: #555;
            font-weight: 500;
        }

        .input-field {
            width: 100%;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            text-align: center;
            transition: border-color 0.3s;
        }

        .input-field:focus {
            border-color: #2196F3;
            outline: none;
        }

        .players-container {
            margin: 20px 0;
        }

        .players-list {
            margin-top: 10px;
            padding-left: 20px;
        }

        .player {
            margin: 5px 0;
            color: #555;
        }

        .quiz-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            padding: 10px;
            background: #f5f5f5;
            border-radius: 8px;
        }

        .timer {
            color: #f44336;
            font-weight: bold;
        }

        .score {
            color: #4CAF50;
            font-weight: bold;
        }

        .question-count {
            color: #2196F3;
            font-weight: bold;
        }

        .question {
            font-size: 20px;
            font-weight: bold;
            text-align: center;
            margin: 20px 0;
            color: #333;
        }

        .options {
            margin: 20px 0;
        }

        .option {
            display: flex;
            align-items: center;
            padding: 15px;
            margin: 10px 0;
            background: #f9f9f9;
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .option:hover {
            background: #e3f2fd;
        }

        .option input {
            margin-right: 10px;
        }

        .result-score {
            text-align: center;
            font-size: 24px;
            font-weight: bold;
            margin: 20px 0;
            color: #333;
        }

        .result-percentage {
            text-align: center;
            font-size: 36px;
            font-weight: bold;
            margin: 20px 0;
            color: #2196F3;
        }

        .info-card {
            background: #e3f2fd;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }

        .info-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
            color: #1976D2;
        }

        .info-text {
            margin: 5px 0;
            color: #555;
        }

        .categories-card {
            background: #f3e5f5;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }

        .hidden {
            display: none;
        }

        @media (max-width: 500px) {
            .container {
                border-radius: 10px;
            }
            
            .screen {
                padding: 20px;
            }
            
            h1 {
                font-size: 24px;
            }
            
            .room-code-value {
                font-size: 28px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Écran d'accueil -->
        <div id="home-screen" class="screen active">
            <h1>Quiz Multijoueur</h1>
            <p>Affrontez vos amis dans un quiz passionnant sur les champs lexicaux français !</p>
            
            <div class="card">
                <button id="create-room-btn" class="btn btn-primary">Créer une salle</button>
                <button id="join-room-btn" class="btn btn-secondary">Rejoindre une salle</button>
            </div>
            
            <div class="info-card">
                <div class="info-title">Comment jouer ?</div>
                <div class="info-text">• Créez une salle ou rejoignez-en une</div>
                <div class="info-text">• Partagez le code avec votre ami</div>
                <div class="info-text">• Répondez aux questions le plus vite possible</div>
                <div class="info-text">• Le gagnant est celui avec le meilleur score !</div>
            </div>
            
            <div class="categories-card">
                <div class="info-title">Catégories disponibles :</div>
                <div class="info-text">• Champ lexical 'able'</div>
                <div class="info-text">• Champ lexical 'eur'</div>
                <div class="info-text">• Champ lexical 'tion'</div>
                <div class="info-text">• Champ lexical 'ment'</div>
                <div class="info-text">• Champ lexical 'isme'</div>
            </div>
        </div>

        <!-- Écran de création de salle -->
        <div id="create-room-screen" class="screen">
            <h1>Créer une salle</h1>
            <p>Partagez ce code avec votre ami pour qu'il puisse vous rejoindre</p>
            
            <div class="room-code">
                <div class="room-code-label">Code de la salle :</div>
                <div id="room-code-value" class="room-code-value">ABC123</div>
            </div>
            
            <button id="create-room-confirm-btn" class="btn btn-primary">Créer la salle</button>
            <button id="generate-new-code-btn" class="btn btn-secondary">Générer un nouveau code</button>
        </div>

        <!-- Écran de rejoindre une salle -->
        <div id="join-room-screen" class="screen">
            <h1>Rejoindre une salle</h1>
            <p>Entrez le code de la salle partagé par votre ami</p>
            
            <div class="input-group">
                <label class="input-label">Code de la salle :</label>
                <input type="text" id="room-code-input" class="input-field" placeholder="Ex: ABC123" maxlength="6">
            </div>
            
            <button id="join-room-confirm-btn" class="btn btn-primary" disabled>Rejoindre la salle</button>
        </div>

        <!-- Écran d'attente -->
        <div id="waiting-screen" class="screen">
            <h1 id="waiting-title">En attente des joueurs...</h1>
            
            <div class="room-code">
                <div class="room-code-label">Code de la salle :</div>
                <div id="waiting-room-code" class="room-code-value">ABC123</div>
            </div>
            
            <div class="players-container">
                <div class="info-title">Joueurs connectés : <span id="players-count">1</span>/2</div>
                <div class="players-list">
                    <div id="player1" class="player">• Joueur 1 (Hôte)</div>
                    <div id="player2" class="player hidden">• Joueur 2</div>
                </div>
            </div>
            
            <button id="start-game-btn" class="btn btn-primary hidden">Commencer le quiz</button>
            <div id="waiting-message" class="info-text">En attente que l'hôte commence le jeu...</div>
        </div>

        <!-- Écran du quiz -->
        <div id="quiz-screen" class="screen">
            <div class="quiz-header">
                <div class="timer">Temps: <span id="time-left">30</span>s</div>
                <div class="score">Score: <span id="current-score">0</span></div>
                <div class="question-count">Question <span id="current-question">1</span>/<span id="total-questions">5</span></div>
            </div>
            
            <div class="card">
                <div id="question-text" class="question">Qui mérite d'être admiré ?</div>
                
                <div class="options">
                    <div class="option">
                        <input type="radio" id="option1" name="quiz-option" value="admirable">
                        <label for="option1">admirable</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="option2" name="quiz-option" value="agréable">
                        <label for="option2">agréable</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="option3" name="quiz-option" value="excusable">
                        <label for="option3">excusable</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="option4" name="quiz-option" value="évitable">
                        <label for="option4">évitable</label>
                    </div>
                </div>
                
                <button id="next-question-btn" class="btn btn-primary" disabled>Question suivante</button>
            </div>
        </div>

        <!-- Écran des résultats -->
        <div id="results-screen" class="screen">
            <h1>Quiz Terminé !</h1>
            
            <div class="result-score">Votre score : <span id="final-score">3</span>/<span id="max-score">5</span></div>
            <div class="result-percentage" id="percentage">60%</div>
            
            <button id="restart-btn" class="btn btn-primary">Rejouer</button>
            <button id="home-btn" class="btn btn-secondary">Retour à l'accueil</button>
        </div>
    </div>

    <script>
        // Données des questions
        const quizQuestions = [
            {
                category: "Champ lexical 'able'",
                questions: [
                    { question: "Qui mérite d'être admiré ?", answer: "admirable", options: ["admirable", "agréable", "excusable", "évitable"] },
                    { question: "Qui peut être excusé ?", answer: "excusable", options: ["excusable", "regrettable", "appréciable", "tolérable"] },
                    { question: "Qui peut être évité ?", answer: "évitable", options: ["évitable", "comptable", "corrigeable", "louable"] },
                    { question: "Qui peut être regretté ?", answer: "regrettable", options: ["regrettable", "critiquable", "respectable", "comparable"] },
                    { question: "Qui peut être apprécié ?", answer: "appréciable", options: ["appréciable", "aimable", "modifiable", "supportable"] }
                ]
            },
            {
                category: "Champ lexical 'eur'",
                questions: [
                    { question: "Celui qui chante ?", answer: "chanteur", options: ["chanteur", "vendeur", "lecteur", "formateur"] },
                    { question: "Celui qui vend ?", answer: "vendeur", options: ["vendeur", "spectateur", "traducteur", "orateur"] },
                    { question: "Celui qui lit ?", answer: "lecteur", options: ["lecteur", "inventeur", "auteur", "directeur"] },
                    { question: "Celui qui enseigne ?", answer: "formateur", options: ["formateur", "docteur", "sauveur", "entrepreneur"] },
                    { question: "Celui qui observe ?", answer: "spectateur", options: ["spectateur", "tricheur", "inspecteur", "appreneur"] }
                ]
            },
            {
                category: "Champ lexical 'tion'",
                questions: [
                    { question: "Action de créer ?", answer: "création", options: ["création", "décision", "correction", "punition"] },
                    { question: "Action de décider ?", answer: "décision", options: ["décision", "organisation", "éducation", "communication"] },
                    { question: "Action de corriger ?", answer: "correction", options: ["correction", "évaluation", "préparation", "explication"] },
                    { question: "Action de punir ?", answer: "punition", options: ["punition", "imagination", "information", "transformation"] },
                    { question: "Action d'organiser ?", answer: "organisation", options: ["organisation", "production", "respiration", "création"] }
                ]
            },
            {
                category: "Champ lexical 'ment'",
                questions: [
                    { question: "Transformation ou modification de quelque chose ?", answer: "changement", options: ["changement", "développement", "jugement", "déplacement"] },
                    { question: "Croissance ou progrès dans une activité ou un projet ?", answer: "développement", options: ["développement", "amélioration", "sentiment", "doucement"] },
                    { question: "Décision rendue par un tribunal ou un juge ?", answer: "jugement", options: ["jugement", "engagement", "traitement", "entraînement"] },
                    { question: "Action de se déplacer d'un endroit à un autre ?", answer: "déplacement", options: ["déplacement", "règlement", "accomplissement", "paiement"] },
                    { question: "Amélioration d'une situation ou d'un comportement ?", answer: "amélioration", options: ["amélioration", "gouvernement", "raisonnement", "changement"] }
                ]
            },
            {
                category: "Champ lexical 'isme'",
                questions: [
                    { question: "Doctrine politique prônant l'égalité sociale ?", answer: "socialisme", options: ["socialisme", "capitalisme", "monothéisme", "anarchisme"] },
                    { question: "Système économique basé sur le capital et le profit ?", answer: "capitalisme", options: ["capitalisme", "romantisme", "athéisme", "racisme"] },
                    { question: "Croyance en un seul Dieu ?", answer: "monothéisme", options: ["monothéisme", "polythéisme", "hédonisme", "égoïsme"] },
                    { question: "Doctrine prônant l'absence d'autorité ou d'État ?", answer: "anarchisme", options: ["anarchisme", "spiritisme", "sexisme", "cubisme"] },
                    { question: "Mouvement artistique qui privilégie l'émotion et l'individu ?", answer: "romantisme", options: ["romantisme", "bouddhisme", "fascisme", "socialisme"] }
                ]
            }
        ];

        // Variables d'état du jeu
        let currentScreen = 'home-screen';
        let roomCode = '';
        let isHost = false;
        let currentQuestionIndex = 0;
        let score = 0;
        let timeLeft = 30;
        let timerInterval;
        let selectedQuestions = [];

        // Éléments DOM
        const screens = {
            home: document.getElementById('home-screen'),
            createRoom: document.getElementById('create-room-screen'),
            joinRoom: document.getElementById('join-room-screen'),
            waiting: document.getElementById('waiting-screen'),
            quiz: document.getElementById('quiz-screen'),
            results: document.getElementById('results-screen')
        };

        // Fonctions de navigation
        function showScreen(screenId) {
            // Cacher tous les écrans
            Object.values(screens).forEach(screen => {
                screen.classList.remove('active');
            });
            
            // Afficher l'écran demandé
            screens[screenId].classList.add('active');
            currentScreen = screenId;
        }

        // Génération de code de salle
        function generateRoomCode() {
            const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
            let code = '';
            for (let i = 0; i < 6; i++) {
                code += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            return code;
        }

        // Initialisation du jeu
        function initGame() {
            // Événements des boutons
            document.getElementById('create-room-btn').addEventListener('click', () => {
                roomCode = generateRoomCode();
                document.getElementById('room-code-value').textContent = roomCode;
                showScreen('create-room-screen');
            });

            document.getElementById('join-room-btn').addEventListener('click', () => {
                showScreen('join-room-screen');
            });

            document.getElementById('generate-new-code-btn').addEventListener('click', () => {
                roomCode = generateRoomCode();
                document.getElementById('room-code-value').textContent = roomCode;
            });

            document.getElementById('create-room-confirm-btn').addEventListener('click', () => {
                isHost = true;
                document.getElementById('waiting-room-code').textContent = roomCode;
                document.getElementById('waiting-title').textContent = 'En attente des joueurs...';
                document.getElementById('start-game-btn').classList.remove('hidden');
                document.getElementById('waiting-message').classList.add('hidden');
                showScreen('waiting-screen');
                
                // Simulation d'un joueur qui rejoint après 3 secondes
                setTimeout(() => {
                    document.getElementById('player2').classList.remove('hidden');
                    document.getElementById('players-count').textContent = '2';
                }, 3000);
            });

            document.getElementById('room-code-input').addEventListener('input', (e) => {
                const code = e.target.value.toUpperCase();
                document.getElementById('join-room-confirm-btn').disabled = code.length !== 6;
            });

            document.getElementById('join-room-confirm-btn').addEventListener('click', () => {
                roomCode = document.getElementById('room-code-input').value.toUpperCase();
                isHost = false;
                document.getElementById('waiting-room-code').textContent = roomCode;
                document.getElementById('waiting-title').textContent = 'En attente du début du jeu...';
                document.getElementById('start-game-btn').classList.add('hidden');
                document.getElementById('waiting-message').classList.remove('hidden');
                document.getElementById('player1').textContent = '• Joueur 1 (Hôte)';
                document.getElementById('player2').classList.remove('hidden');
                document.getElementById('player2').textContent = '• Joueur 2';
                document.getElementById('players-count').textContent = '2';
                showScreen('waiting-screen');
            });

            document.getElementById('start-game-btn').addEventListener('click', startQuiz);

            document.getElementById('next-question-btn').addEventListener('click', nextQuestion);

            document.getElementById('restart-btn').addEventListener('click', restartGame);

            document.getElementById('home-btn').addEventListener('click', () => {
                showScreen('home-screen');
            });

            // Événements pour les options de réponse
            document.querySelectorAll('input[name="quiz-option"]').forEach(radio => {
                radio.addEventListener('change', (e) => {
                    document.getElementById('next-question-btn').disabled = false;
                });
            });
        }

        // Démarrer le quiz
        function startQuiz() {
            // Sélectionner 5 questions aléatoires
            const allQuestions = quizQuestions.flatMap(category => category.questions);
            selectedQuestions = [...allQuestions].sort(() => 0.5 - Math.random()).slice(0, 5);
            
            // Réinitialiser l'état du jeu
            currentQuestionIndex = 0;
            score = 0;
            timeLeft = 30;
            
            // Mettre à jour l'interface
            document.getElementById('current-score').textContent = score;
            document.getElementById('total-questions').textContent = selectedQuestions.length;
            
            // Afficher la première question
            showQuestion();
            
            // Démarrer le timer
            startTimer();
            
            // Afficher l'écran du quiz
            showScreen('quiz-screen');
        }

        // Afficher une question
        function showQuestion() {
            const question = selectedQuestions[currentQuestionIndex];
            
            // Mettre à jour l'interface
            document.getElementById('question-text').textContent = question.question;
            document.getElementById('current-question').textContent = currentQuestionIndex + 1;
            
            // Mettre à jour les options
            const options = document.querySelectorAll('.option label');
            const radios = document.querySelectorAll('input[name="quiz-option"]');
            
            question.options.forEach((option, index) => {
                options[index].textContent = option;
                radios[index].value = option;
                radios[index].checked = false;
            });
            
            // Désactiver le bouton suivant
            document.getElementById('next-question-btn').disabled = true;
            
            // Mettre à jour le texte du bouton
            document.getElementById('next-question-btn').textContent = 
                currentQuestionIndex < selectedQuestions.length - 1 ? 'Question suivante' : 'Terminer le quiz';
        }

        // Passer à la question suivante
        function nextQuestion() {
            // Vérifier la réponse
            const selectedOption = document.querySelector('input[name="quiz-option"]:checked');
            if (selectedOption) {
                const question = selectedQuestions[currentQuestionIndex];
                if (selectedOption.value === question.answer) {
                    score++;
                    document.getElementById('current-score').textContent = score;
                }
            }
            
            // Passer à la question suivante ou terminer le quiz
            if (currentQuestionIndex < selectedQuestions.length - 1) {
                currentQuestionIndex++;
                timeLeft = 30;
                document.getElementById('time-left').textContent = timeLeft;
                showQuestion();
                startTimer();
            } else {
                endQuiz();
            }
        }

        // Démarrer le timer
        function startTimer() {
            clearInterval(timerInterval);
            timeLeft = 30;
            document.getElementById('time-left').textContent = timeLeft;
            
            timerInterval = setInterval(() => {
                timeLeft--;
                document.getElementById('time-left').textContent = timeLeft;
                
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    nextQuestion();
                }
            }, 1000);
        }

        // Terminer le quiz
        function endQuiz() {
            clearInterval(timerInterval);
            
            // Calculer le pourcentage
            const percentage = Math.round((score / selectedQuestions.length) * 100);
            
            // Mettre à jour l'interface des résultats
            document.getElementById('final-score').textContent = score;
            document.getElementById('max-score').textContent = selectedQuestions.length;
            document.getElementById('percentage').textContent = `${percentage}%`;
            
            // Afficher l'écran des résultats
            showScreen('results-screen');
        }

        // Redémarrer le jeu
        function restartGame() {
            startQuiz();
        }

        // Initialiser l'application au chargement
        document.addEventListener('DOMContentLoaded', initGame);
    </script>
</body>
</html>