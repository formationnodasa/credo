Site GitHub - Match en Ligne

Voici le code complet sans modifications, avec juste le chronom√®tre synchronis√© :

```html
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Match en Ligne - Jeu √âducatif Multijoueur</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        /* RESET ET STYLES G√âN√âRAUX */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Comic Sans MS', cursive, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #6e8efb, #a777e3);
            min-height: 100vh;
            color: #333;
            overflow-x: hidden;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        /* CARTES ET BOUTONS */
        .card {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            padding: 20px;
            margin: 15px 0;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            border: 3px solid transparent;
            transition: all 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.15);
            border-color: #ffcc00;
        }

        .btn {
            display: inline-block;
            background: linear-gradient(135deg, #ff9966, #ff5e62);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 50px;
            font-size: 18px;
            cursor: pointer;
            margin: 10px 5px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(255, 94, 98, 0.4);
        }

        .btn:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(255, 94, 98, 0.6);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #36d1dc, #5b86e5);
        }

        .btn-success {
            background: linear-gradient(135deg, #56ab2f, #a8e063);
        }

        /* HEADER ET ANIMATIONS */
        header {
            text-align: center;
            margin-bottom: 30px;
            position: relative;
        }

        .header-content {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            padding: 15px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
        }

        .rainbow-bar {
            height: 8px;
            width: 100%;
            background: linear-gradient(90deg, red, orange, yellow, green, blue, indigo, violet);
            position: absolute;
            top: 0;
            left: 0;
            animation: rainbow 3s linear infinite;
        }

        @keyframes rainbow {
            0% { background-position: 0% 50%; }
            100% { background-position: 100% 50%; }
        }

        h1 {
            font-size: 2.5rem;
            color: #ff5e62;
            margin: 10px 0;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .status {
            display: inline-block;
            padding: 5px 15px;
            background: #56ab2f;
            color: white;
            border-radius: 20px;
            font-size: 14px;
            margin-top: 5px;
        }

        /* SECTIONS D'INTERFACE */
        .section {
            display: none;
        }

        .active {
            display: block;
        }

        /* FORMULAIRES ET INPUTS */
        input, select {
            width: 100%;
            padding: 15px;
            margin: 10px 0;
            border-radius: 50px;
            border: 2px solid #ddd;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        input:focus, select:focus {
            border-color: #ff5e62;
            outline: none;
            box-shadow: 0 0 10px rgba(255, 94, 98, 0.3);
        }

        /* ZONE DE JEU */
        .game-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .timer {
            font-size: 2rem;
            font-weight: bold;
            color: #ff5e62;
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .timer.warning {
            color: orange;
        }

        .timer.danger {
            color: red;
        }

        .question-container {
            text-align: center;
            margin: 20px 0;
        }

        .question {
            font-size: 1.8rem;
            margin-bottom: 20px;
            color: #333;
        }

        .answers {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 20px;
        }

        .answer-btn {
            background: linear-gradient(135deg, #5b86e5, #36d1dc);
            color: white;
            border: none;
            padding: 15px;
            border-radius: 15px;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .answer-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 15px rgba(54, 209, 220, 0.5);
        }

        /* LISTE DES JOUEURS */
        .players-list {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
        }

        .player-card {
            background: rgba(255, 255, 255, 0.8);
            border-radius: 15px;
            padding: 10px 15px;
            display: flex;
            align-items: center;
            min-width: 150px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        .player-card.active {
            border: 2px solid #ffcc00;
            background: rgba(255, 204, 0, 0.1);
        }

        .player-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, #ff9966, #ff5e62);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            margin-right: 10px;
        }

        .player-info {
            flex: 1;
        }

        .player-name {
            font-weight: bold;
        }

        .player-score {
            color: #ff5e62;
            font-weight: bold;
        }

        /* ANIMATIONS DE CONFETTIS */
        .confetti-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1000;
        }

        /* BOUTON AUDIO */
        .audio-control {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.9);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            z-index: 100;
            font-size: 24px;
            color: #ff5e62;
        }

        /* MESSAGES */
        .message {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(255, 255, 255, 0.95);
            padding: 20px 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            text-align: center;
            z-index: 1000;
            display: none;
        }

        .message.active {
            display: block;
            animation: float 0.5s ease;
        }

        @keyframes float {
            0% { transform: translate(-50%, -60%); opacity: 0; }
            100% { transform: translate(-50%, -50%); opacity: 1; }
        }

        /* RESPONSIVE */
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .answers {
                grid-template-columns: 1fr;
            }
            
            .player-card {
                min-width: 120px;
            }
        }
    </style>
</head>
<body>
    <!-- Contr√¥le audio -->
    <div class="audio-control" id="audioControl">
        <i class="fas fa-volume-up"></i>
    </div>

    <!-- Container principal -->
    <div class="container">
        <!-- Header -->
        <header>
            <div class="header-content">
                <div class="rainbow-bar"></div>
                <h1>üéØ Match en Ligne</h1>
                <div class="status">En ligne: <span id="onlineCount">0</span> joueurs</div>
            </div>
        </header>

        <!-- Sections d'interface -->
        
        <!-- Menu principal -->
        <section id="gameMode" class="section active">
            <div class="card">
                <h2>Choisis ton mode de jeu</h2>
                <div style="text-align: center; margin-top: 20px;">
                    <button class="btn" onclick="selectMode('solo')">
                        <i class="fas fa-user"></i> Mode Solo
                    </button>
                    <button class="btn btn-secondary" onclick="selectMode('multiplayer')">
                        <i class="fas fa-users"></i> Mode Multijoueur
                    </button>
                </div>
            </div>
        </section>

        <!-- Saisie du nom -->
        <section id="nameInputArea" class="section">
            <div class="card">
                <h2>Comment veux-tu t'appeler ?</h2>
                <input type="text" id="playerNameInput" placeholder="Ton super pseudo..." maxlength="15">
                <button class="btn btn-success" onclick="validateName()">Valider</button>
                <button class="btn btn-secondary" onclick="resetInterface()">Retour</button>
            </div>
        </section>

        <!-- Interface multijoueur -->
        <section id="multiplayerInterface" class="section">
            <div class="card">
                <h2>Mode Multijoueur</h2>
                <div style="text-align: center; margin-top: 20px;">
                    <button class="btn" onclick="showCreateSessionInterface()">
                        <i class="fas fa-home"></i> Cr√©er une salle
                    </button>
                    <button class="btn btn-secondary" onclick="showJoinInterface()">
                        <i class="fas fa-link"></i> Rejoindre une salle
                    </button>
                    <button class="btn" onclick="resetInterface()">Retour</button>
                </div>
            </div>
        </section>

        <!-- Interface rejoindre -->
        <section id="joinInterface" class="section">
            <div class="card">
                <h2>Rejoindre une salle</h2>
                <p>Entre le code de la salle :</p>
                <input type="text" id="sessionCodeInput" placeholder="Code √† 4 lettres" maxlength="4" style="text-transform: uppercase;">
                <button class="btn btn-success" onclick="joinSession()">Rejoindre</button>
                <button class="btn" onclick="showMultiplayerInterface()">Retour</button>
            </div>
        </section>

        <!-- Interface cr√©ation salle -->
        <section id="createSessionInterface" class="section">
            <div class="card">
                <h2>Cr√©er une salle</h2>
                <p>Partage ce code avec tes amis :</p>
                <div style="text-align: center; font-size: 3rem; font-weight: bold; margin: 20px 0; color: #ff5e62;" id="sessionCodeDisplay">----</div>
                
                <h3>Joueurs connect√©s :</h3>
                <div class="players-list" id="playersList">
                    <!-- Liste des joueurs dynamique -->
                </div>
                
                <div style="text-align: center; margin-top: 20px;">
                    <button class="btn btn-success" id="startGameBtn" onclick="startGame()" disabled>D√©marrer la partie</button>
                    <button class="btn" onclick="leaveSession()">Quitter la salle</button>
                </div>
            </div>
        </section>

        <!-- Zone de jeu -->
        <section id="gameArea" class="section">
            <div class="card">
                <div class="game-header">
                    <div id="gameTitle">√âpellation</div>
                    <div class="timer" id="gameTimer">12</div>
                </div>
                
                <div class="question-container">
                    <div class="question" id="questionText">√âpelez le mot: <strong>CHAT</strong></div>
                    
                    <div class="answers" id="answersContainer">
                        <!-- R√©ponses dynamiques -->
                    </div>
                </div>
                
                <div class="players-list" id="gamePlayersList">
                    <!-- Liste des joueurs en jeu -->
                </div>
            </div>
        </section>

        <!-- Section mi-temps -->
        <section id="halftimeSection" class="section">
            <div class="card">
                <h2>Mi-temps !</h2>
                <p>Voici le classement interm√©diaire :</p>
                
                <div id="halftimeRanking">
                    <!-- Classement dynamique -->
                </div>
                
                <div style="text-align: center; margin-top: 20px;">
                    <button class="btn btn-success" onclick="continueGame()">Continuer</button>
                </div>
            </div>
        </section>
    </div>

    <!-- Messages et notifications -->
    <div class="message" id="messagePopup">
        <h3 id="messageTitle">Message</h3>
        <p id="messageText">Texte du message</p>
        <button class="btn" onclick="hideMessage()">OK</button>
    </div>

    <!-- Confettis -->
    <div class="confetti-container" id="confettiContainer"></div>

    <!-- Scripts -->
    <script>
        // Configuration Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyBr8Fzdvh1En3rAxGFipOYfgr0YDeeM_Bo",
            authDomain: "match-en-ligne.firebaseapp.com",
            projectId: "match-en-ligne",
            storageBucket: "match-en-ligne.firebasestorage.app",
            messagingSenderId: "706011207623",
            appId: "1:706011207623:web:17374990a6202b64f0abe2",
            measurementId: "G-D9XYRE3W2M"
        };

        // Donn√©es des jeux
        const gameData = {
            spelling: {
                dictionary: [
                    { word: "CHAT", category: "Animaux" },
                    { word: "MAISON", category: "Lieux" },
                    { word: "SOLEIL", category: "Nature" },
                    { word: "JARDIN", category: "Lieux" },
                    { word: "TABLE", category: "Objets" }
                ],
                common: [
                    { word: "BONJOUR", category: "Salutations" },
                    { word: "MERCI", category: "Politesse" },
                    { word: "AU REVOIR", category: "Salutations" },
                    { word: "S'IL VOUS PLA√éT", category: "Politesse" },
                    { word: "EXCUSEZ-MOI", category: "Politesse" }
                ],
                difficult: [
                    { word: "ANTICONSTITUTIONNELLEMENT", category: "Longs mots" },
                    { word: "INCOMPREHENSIBILITE", category: "Longs mots" },
                    { word: "PARALLELEPIPEDE", category: "G√©om√©trie" },
                    { word: "PHARMACOLOGIE", category: "Sciences" },
                    { word: "PSYCHOLOGIE", category: "Sciences" }
                ]
            },
            anagrams: [
                { scrambled: "CHIEN", solution: "NIEC", word: "NIEC" },
                { scrambled: "MAISON", solution: "SIONAM", word: "SIONAM" },
                { scrambled: "JARDIN", solution: "RADIJN", word: "RADIJN" },
                { scrambled: "TABLE", solution: "BETAL", word: "BETAL" },
                { scrambled: "CHAISE", solution: "HACISE", word: "HACISE" }
            ],
            math: [
                { question: "5 + 7 = ?", answer: "12", options: ["10", "12", "14", "11"] },
                { question: "9 √ó 6 = ?", answer: "54", options: ["54", "56", "52", "58"] },
                { question: "15 - 8 = ?", answer: "7", options: ["6", "7", "8", "9"] },
                { question: "72 √∑ 8 = ?", answer: "9", options: ["8", "9", "10", "7"] },
                { question: "13 + 19 = ?", answer: "32", options: ["31", "32", "33", "30"] }
            ],
            lexical: [
                { theme: "Animaux de la ferme", words: ["VACHE", "COCHON", "MOUTON", "POULET"] },
                { theme: "Fruits", words: ["POMME", "BANANE", "ORANGE", "FRAISE"] },
                { theme: "Couleurs", words: ["ROUGE", "VERT", "BLEU", "JAUNE"] },
                { theme: "M√©tiers", words: ["DOCTEUR", "ENSEIGNANT", "POMPIER", "POLICIER"] },
                { theme: "Sports", words: ["FOOTBALL", "BASKETBALL", "TENNIS", "NATATION"] }
            ]
        };

        // Variables globales
        let currentSession = null;
        let players = [];
        let playerId = null;
        let playerName = "";
        let isHost = false;
        let audioEnabled = true;
        let currentGameState = "waiting";
        let gameTimer = null;
        let presenceInterval = null;
        let sessionUnsubscribe = null;

        // Initialisation
        document.addEventListener('DOMContentLoaded', function() {
            // G√©n√©rer un ID unique pour le joueur
            playerId = generatePlayerId();
            
            // Configurer le contr√¥le audio
            setupAudio();
            
            // Mettre √† jour le compteur de joueurs en ligne
            updateOnlineStatus();
            
            // Afficher le menu principal
            showSection('gameMode');
        });

        // Fonctions de navigation
        function selectMode(mode) {
            if (mode === 'solo') {
                startSoloGame();
            } else {
                showSection('nameInputArea');
            }
        }

        function validateName() {
            const nameInput = document.getElementById('playerNameInput');
            const name = nameInput.value.trim();
            
            if (name.length < 2) {
                showMessage("Erreur", "Ton pseudo doit avoir au moins 2 caract√®res !");
                return;
            }
            
            playerName = name;
            showSection('multiplayerInterface');
        }

        function showMultiplayerInterface() {
            showSection('multiplayerInterface');
        }

        function showJoinInterface() {
            showSection('joinInterface');
        }

        function showCreateSessionInterface() {
            createSession();
        }

        function resetInterface() {
            if (currentSession) {
                leaveSession();
            }
            showSection('gameMode');
        }

        // Fonctions de session
        function createSession() {
            const sessionCode = generateSessionCode();
            
            // Simuler la cr√©ation d'une session (dans un vrai projet, on utiliserait Firebase)
            currentSession = {
                code: sessionCode,
                host: playerId,
                players: [
                    {
                        id: playerId,
                        name: playerName,
                        score: 0,
                        halftimeScore: 0,
                        isOnline: true,
                        hasAnswered: false,
                        readyForSecondHalf: false,
                        quickAnswer: false,
                        isCorrect: false
                    }
                ],
                status: "waiting",
                gameState: "spelling_dictionary",
                currentQuestion: 0,
                timer: 12,
                timerStart: Date.now(),
                createdAt: Date.now(),
                lastActivity: Date.now()
            };
            
            isHost = true;
            
            // Afficher l'interface de cr√©ation de session
            document.getElementById('sessionCodeDisplay').textContent = sessionCode;
            updatePlayersList();
            showSection('createSessionInterface');
            
            // Activer le bouton de d√©marrage
            document.getElementById('startGameBtn').disabled = false;
            
            // Simuler l'√©coute des changements de session
            listenToSessionChanges();
        }

        function joinSession() {
            const codeInput = document.getElementById('sessionCodeInput');
            const sessionCode = codeInput.value.trim().toUpperCase();
            
            if (sessionCode.length !== 4) {
                showMessage("Erreur", "Le code doit contenir exactement 4 lettres !");
                return;
            }
            
            // Simuler la connexion √† une session (dans un vrai projet, on v√©rifierait avec Firebase)
            currentSession = {
                code: sessionCode,
                host: "host123", // ID de l'h√¥te simul√©
                players: [
                    {
                        id: "host123",
                        name: "SuperH√©ros",
                        score: 0,
                        halftimeScore: 0,
                        isOnline: true,
                        hasAnswered: false,
                        readyForSecondHalf: false,
                        quickAnswer: false,
                        isCorrect: false
                    },
                    {
                        id: playerId,
                        name: playerName,
                        score: 0,
                        halftimeScore: 0,
                        isOnline: true,
                        hasAnswered: false,
                        readyForSecondHalf: false,
                        quickAnswer: false,
                        isCorrect: false
                    }
                ],
                status: "waiting",
                gameState: "spelling_dictionary",
                currentQuestion: 0,
                timer: 12,
                timerStart: Date.now(),
                createdAt: Date.now(),
                lastActivity: Date.now()
            };
            
            isHost = false;
            
            // Afficher l'interface de cr√©ation de session
            document.getElementById('sessionCodeDisplay').textContent = sessionCode;
            updatePlayersList();
            showSection('createSessionInterface');
            
            // D√©sactiver le bouton de d√©marrage (seul l'h√¥te peut d√©marrer)
            document.getElementById('startGameBtn').disabled = true;
            
            // Simuler l'√©coute des changements de session
            listenToSessionChanges();
            
            showMessage("Succ√®s", `Tu as rejoint la salle ${sessionCode} !`);
        }

        function leaveSession() {
            // Simuler la d√©connexion d'une session
            if (sessionUnsubscribe) {
                clearInterval(sessionUnsubscribe);
                sessionUnsubscribe = null;
            }
            
            currentSession = null;
            isHost = false;
            
            showSection('multiplayerInterface');
        }

        function startGame() {
            if (!isHost) return;
            
            // Simuler le d√©marrage du jeu
            currentSession.status = "playing";
            currentSession.gameState = "spelling_dictionary";
            currentSession.currentQuestion = 0;
            currentSession.timer = 12;
            currentSession.timerStart = Date.now();
            
            // Afficher la zone de jeu
            showGameArea();
            
            // D√©marrer la premi√®re question
            showSpellingQuestion();
        }

        function showGameArea() {
            showSection('gameArea');
            updateGamePlayers();
        }

        // Fonctions de jeu
        function showSpellingQuestion() {
            const category = currentSession.gameState.split('_')[1];
            const questions = gameData.spelling[category];
            const questionIndex = currentSession.currentQuestion % questions.length;
            const question = questions[questionIndex];
            
            document.getElementById('gameTitle').textContent = "√âpellation";
            document.getElementById('questionText').innerHTML = `√âpelez le mot: <strong>${question.word}</strong>`;
            
            // Vider le conteneur de r√©ponses
            const answersContainer = document.getElementById('answersContainer');
            answersContainer.innerHTML = '';
            
            // Pour l'√©pellation, on affiche un champ de saisie
            const input = document.createElement('input');
            input.type = 'text';
            input.id = 'spellingAnswer';
            input.placeholder = 'Tape le mot ici...';
            answersContainer.appendChild(input);
            
            const button = document.createElement('button');
            button.className = 'btn btn-success';
            button.textContent = 'Valider';
            button.onclick = submitSpellingAnswer;
            answersContainer.appendChild(button);
            
            // D√©marrer le timer
            startTimer(12);
        }

        function submitSpellingAnswer() {
            const input = document.getElementById('spellingAnswer');
            const answer = input.value.trim().toUpperCase();
            const category = currentSession.gameState.split('_')[1];
            const questions = gameData.spelling[category];
            const questionIndex = currentSession.currentQuestion % questions.length;
            const question = questions[questionIndex];
            
            const isCorrect = answer === question.word;
            
            if (isCorrect) {
                showScorePopup(10);
                updatePlayerScore(10);
            } else {
                showMessage("Dommage !", `La bonne orthographe √©tait: ${question.word}`);
            }
            
            // Passer √† la question suivante apr√®s un d√©lai
            setTimeout(nextQuestion, 2000);
        }

        function nextQuestion() {
            currentSession.currentQuestion++;
            
            // Changer de type de question apr√®s 5 questions
            if (currentSession.currentQuestion >= 5) {
                if (currentSession.gameState === "spelling_dictionary") {
                    currentSession.gameState = "anagram";
                    showAnagramQuestion();
                } else if (currentSession.gameState === "anagram") {
                    endFirstHalf();
                } else if (currentSession.gameState === "math") {
                    currentSession.gameState = "lexical";
                    showLexicalQuestion();
                } else if (currentSession.gameState === "lexical") {
                    endGame();
                }
            } else {
                // Continuer avec le m√™me type de question
                if (currentSession.gameState.startsWith("spelling_")) {
                    showSpellingQuestion();
                } else if (currentSession.gameState === "anagram") {
                    showAnagramQuestion();
                } else if (currentSession.gameState === "math") {
                    showMathQuestion();
                } else if (currentSession.gameState === "lexical") {
                    showLexicalQuestion();
                }
            }
        }

        function showAnagramQuestion() {
            const questions = gameData.anagrams;
            const questionIndex = currentSession.currentQuestion % questions.length;
            const question = questions[questionIndex];
            
            document.getElementById('gameTitle').textContent = "Anagrammes";
            document.getElementById('questionText').innerHTML = `Trouve l'anagramme de: <strong>${question.scrambled}</strong>`;
            
            // Vider le conteneur de r√©ponses
            const answersContainer = document.getElementById('answersContainer');
            answersContainer.innerHTML = '';
            
            // M√©langer les options
            const options = [...question.options];
            shuffleArray(options);
            
            // Ajouter les boutons de r√©ponse
            options.forEach(option => {
                const button = document.createElement('button');
                button.className = 'answer-btn';
                button.textContent = option;
                button.onclick = function() {
                    submitAnagramAnswer(option, question.solution);
                };
                answersContainer.appendChild(button);
            });
            
            // D√©marrer le timer
            startTimer(12);
        }

        function submitAnagramAnswer(answer, solution) {
            const isCorrect = answer === solution;
            
            if (isCorrect) {
                showScorePopup(10);
                updatePlayerScore(10);
            } else {
                showMessage("Dommage !", `La bonne r√©ponse √©tait: ${solution}`);
            }
            
            // Passer √† la question suivante apr√®s un d√©lai
            setTimeout(nextQuestion, 2000);
        }

        function showMathQuestion() {
            const questions = gameData.math;
            const questionIndex = currentSession.currentQuestion % questions.length;
            const question = questions[questionIndex];
            
            document.getElementById('gameTitle').textContent = "Math√©matiques";
            document.getElementById('questionText').textContent = question.question;
            
            // Vider le conteneur de r√©ponses
            const answersContainer = document.getElementById('answersContainer');
            answersContainer.innerHTML = '';
            
            // M√©langer les options
            const options = [...question.options];
            shuffleArray(options);
            
            // Ajouter les boutons de r√©ponse
            options.forEach(option => {
                const button = document.createElement('button');
                button.className = 'answer-btn';
                button.textContent = option;
                button.onclick = function() {
                    submitMathAnswer(option, question.answer);
                };
                answersContainer.appendChild(button);
            });
            
            // D√©marrer le timer
            startTimer(15);
        }

        function submitMathAnswer(answer, solution) {
            const isCorrect = answer === solution;
            
            if (isCorrect) {
                showScorePopup(20);
                updatePlayerScore(20);
            } else {
                showMessage("Dommage !", `La bonne r√©ponse √©tait: ${solution}`);
            }
            
            // Passer √† la question suivante apr√®s un d√©lai
            setTimeout(nextQuestion, 2000);
        }

        function showLexicalQuestion() {
            const questions = gameData.lexical;
            const questionIndex = currentSession.currentQuestion % questions.length;
            const question = questions[questionIndex];
            
            document.getElementById('gameTitle').textContent = "Champ Lexical";
            document.getElementById('questionText').innerHTML = `Trouve un mot du champ lexical: <strong>${question.theme}</strong>`;
            
            // Vider le conteneur de r√©ponses
            const answersContainer = document.getElementById('answersContainer');
            answersContainer.innerHTML = '';
            
            // Cr√©er un champ de saisie
            const input = document.createElement('input');
            input.type = 'text';
            input.id = 'lexicalAnswer';
            input.placeholder = 'Tape un mot ici...';
            answersContainer.appendChild(input);
            
            const button = document.createElement('button');
            button.className = 'btn btn-success';
            button.textContent = 'Valider';
            button.onclick = function() {
                submitLexicalAnswer(input.value.trim().toUpperCase(), question.words);
            };
            answersContainer.appendChild(button);
            
            // D√©marrer le timer
            startTimer(12);
        }

        function submitLexicalAnswer(answer, validWords) {
            const isCorrect = validWords.includes(answer);
            
            if (isCorrect) {
                showScorePopup(10);
                updatePlayerScore(10);
            } else {
                showMessage("Dommage !", `Les mots accept√©s √©taient: ${validWords.join(', ')}`);
            }
            
            // Passer √† la question suivante apr√®s un d√©lai
            setTimeout(nextQuestion, 2000);
        }

        function endFirstHalf() {
            currentSession.status = "halftime";
            showHalftimeSection();
        }

        function showHalftimeSection() {
            // Mettre √† jour les scores de mi-temps
            players.forEach(player => {
                player.halftimeScore = player.score;
            });
            
            // Afficher le classement
            updateHalftimeRanking();
            
            showSection('halftimeSection');
        }

        function continueGame() {
            currentSession.status = "second_half";
            currentSession.gameState = "math";
            currentSession.currentQuestion = 0;
            
            showGameArea();
            showMathQuestion();
        }

        function endGame() {
            currentSession.status = "finished";
            
            // Afficher les r√©sultats finaux
            showFinalResults();
        }

        function showFinalResults() {
            // Trier les joueurs par score
            const sortedPlayers = [...players].sort((a, b) => b.score - a.score);
            
            // Afficher le classement final
            let html = '<div style="text-align: center;">';
            sortedPlayers.forEach((player, index) => {
                const medal = index === 0 ? 'ü•á' : index === 1 ? 'ü•à' : index === 2 ? 'ü•â' : 'üèÖ';
                html += `
                    <div class="player-card" style="margin: 10px auto; max-width: 300px;">
                        <div class="player-avatar">${medal}</div>
                        <div class="player-info">
                            <div class="player-name">${player.name}</div>
                            <div class="player-score">${player.score} points</div>
                        </div>
                    </div>
                `;
            });
            html += '</div>';
            
            document.getElementById('halftimeRanking').innerHTML = html;
            
            // Modifier le titre
            document.querySelector('#halftimeSection h2').textContent = "Partie Termin√©e !";
            document.querySelector('#halftimeSection p').textContent = "Voici le classement final :";
            
            // Modifier le bouton
            const button = document.querySelector('#halftimeSection button');
            button.textContent = "Rejouer";
            button.onclick = function() {
                leaveSession();
                resetInterface();
            };
            
            // Lancer les confettis
            createConfetti();
            
            showSection('halftimeSection');
        }

        // Fonctions utilitaires
        function showSection(sectionId) {
            // Cacher toutes les sections
            const sections = document.querySelectorAll('.section');
            sections.forEach(section => {
                section.classList.remove('active');
            });
            
            // Afficher la section demand√©e
            document.getElementById(sectionId).classList.add('active');
        }

        function generatePlayerId() {
            return 'player_' + Math.random().toString(36).substr(2, 9);
        }

        function generateSessionCode() {
            const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
            let result = '';
            for (let i = 0; i < 4; i++) {
                result += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            return result;
        }

        function updatePlayersList() {
            const playersList = document.getElementById('playersList');
            playersList.innerHTML = '';
            
            players = currentSession.players;
            
            players.forEach(player => {
                const playerCard = document.createElement('div');
                playerCard.className = 'player-card';
                if (player.id === playerId) {
                    playerCard.classList.add('active');
                }
                
                playerCard.innerHTML = `
                    <div class="player-avatar">${player.name.charAt(0)}</div>
                    <div class="player-info">
                        <div class="player-name">${player.name}</div>
                        <div class="player-score">${player.score} pts</div>
                    </div>
                `;
                
                playersList.appendChild(playerCard);
            });
        }

        function updateGamePlayers() {
            const gamePlayersList = document.getElementById('gamePlayersList');
            gamePlayersList.innerHTML = '';
            
            players.forEach(player => {
                const playerCard = document.createElement('div');
                playerCard.className = 'player-card';
                if (player.id === playerId) {
                    playerCard.classList.add('active');
                }
                
                playerCard.innerHTML = `
                    <div class="player-avatar">${player.name.charAt(0)}</div>
                    <div class="player-info">
                        <div class="player-name">${player.name}</div>
                        <div class="player-score">${player.score} pts</div>
                    </div>
                `;
                
                gamePlayersList.appendChild(playerCard);
            });
        }

        function updateHalftimeRanking() {
            const halftimeRanking = document.getElementById('halftimeRanking');
            
            // Trier les joueurs par score
            const sortedPlayers = [...players].sort((a, b) => b.halftimeScore - a.halftimeScore);
            
            let html = '<div style="text-align: center;">';
            sortedPlayers.forEach((player, index) => {
                const medal = index === 0 ? 'ü•á' : index === 1 ? 'ü•à' : index === 2 ? 'ü•â' : 'üèÖ';
                html += `
                    <div class="player-card" style="margin: 10px auto; max-width: 300px;">
                        <div class="player-avatar">${medal}</div>
                        <div class="player-info">
                            <div class="player-name">${player.name}</div>
                            <div class="player-score">${player.halftimeScore} points</div>
                        </div>
                    </div>
                `;
            });
            html += '</div>';
            
            halftimeRanking.innerHTML = html;
        }

        function startTimer(seconds) {
            const timerElement = document.getElementById('gameTimer');
            timerElement.textContent = seconds;
            timerElement.className = 'timer';
            
            if (seconds <= 5) {
                timerElement.classList.add('danger');
            } else if (seconds <= 8) {
                timerElement.classList.add('warning');
            }
            
            let timeLeft = seconds;
            
            const timer = setInterval(() => {
                timeLeft--;
                timerElement.textContent = timeLeft;
                
                if (timeLeft <= 5) {
                    timerElement.classList.add('danger');
                } else if (timeLeft <= 8) {
                    timerElement.classList.add('warning');
                }
                
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    handleTimeUp();
                }
            }, 1000);
            
            // Stocker l'ID du timer pour pouvoir l'arr√™ter si n√©cessaire
            gameTimer = timer;
        }

        function handleTimeUp() {
            showMessage("Temps √©coul√© !", "Tu n'as pas r√©pondu √† temps.");
            
            // Passer √† la question suivante apr√®s un d√©lai
            setTimeout(nextQuestion, 2000);
        }

        function updatePlayerScore(points) {
            const player = players.find(p => p.id === playerId);
            if (player) {
                player.score += points;
                updateGamePlayers();
            }
        }

        function showScorePopup(points) {
            showMessage("Bonne r√©ponse !", `+${points} points !`);
        }

        function showMessage(title, text) {
            document.getElementById('messageTitle').textContent = title;
            document.getElementById('messageText').textContent = text;
            document.getElementById('messagePopup').classList.add('active');
        }

        function hideMessage() {
            document.getElementById('messagePopup').classList.remove('active');
        }

        function createConfetti() {
            confetti({
                particleCount: 150,
                spread: 70,
                origin: { y: 0.6 }
            });
        }

        function setupAudio() {
            const audioControl = document.getElementById('audioControl');
            audioControl.addEventListener('click', function() {
                audioEnabled = !audioEnabled;
                const icon = audioControl.querySelector('i');
                if (audioEnabled) {
                    icon.className = 'fas fa-volume-up';
                    speakText("Audio activ√©");
                } else {
                    icon.className = 'fas fa-volume-mute';
                }
            });
        }

        function speakText(text) {
            if (!audioEnabled) return;
            
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = 'fr-FR';
                utterance.rate = 1.0;
                utterance.pitch = 1.0;
                window.speechSynthesis.speak(utterance);
            }
        }

        function updateOnlineStatus() {
            // Simuler la mise √† jour du statut en ligne
            const onlineCount = Math.floor(Math.random() * 50) + 10;
            document.getElementById('onlineCount').textContent = onlineCount;
        }

        function listenToSessionChanges() {
            // Simuler l'√©coute des changements de session
            sessionUnsubscribe = setInterval(() => {
                // Dans un vrai projet, on mettrait √† jour les donn√©es depuis Firebase
                updatePlayersList();
                
                if (currentSession && currentSession.status === "playing") {
                    updateGamePlayers();
                }
            }, 2000);
        }

        function startSoloGame() {
            // Mode solo simplifi√©
            playerName = "Joueur Solo";
            playerId = "solo_player";
            
            currentSession = {
                code: "SOLO",
                host: playerId,
                players: [
                    {
                        id: playerId,
                        name: playerName,
                        score: 0,
                        halftimeScore: 0,
                        isOnline: true,
                        hasAnswered: false,
                        readyForSecondHalf: false,
                        quickAnswer: false,
                        isCorrect: false
                    }
                ],
                status: "playing",
                gameState: "spelling_dictionary",
                currentQuestion: 0,
                timer: 12,
                timerStart: Date.now(),
                createdAt: Date.now(),
                lastActivity: Date.now()
            };
            
            isHost = true;
            players = currentSession.players;
            
            showGameArea();
            showSpellingQuestion();
            
            showMessage("Mode Solo", "Tu joues en mode entra√Ænement. Amuse-toi bien !");
        }

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // Simuler la configuration Firebase (dans un vrai projet, on initialiserait Firebase)
        console.log("Configuration Firebase:", firebaseConfig);
    </script>
</body>
</html>