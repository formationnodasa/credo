<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Match en Ligne - Jeu √âducatif</title>
    <style>
        :root {
            --primary: #4a6fa5;
            --secondary: #6b8cbc;
            --accent: #ff6b6b;
            --success: #51cf66;
            --warning: #fcc419;
            --light: #f8f9fa;
            --dark: #343a40;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: var(--light);
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .screen {
            display: none;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 30px;
            box-shadow: var(--shadow);
            margin-bottom: 20px;
        }
        
        .active {
            display: block;
        }
        
        h1, h2, h3 {
            text-align: center;
            margin-bottom: 20px;
            color: white;
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .subtitle {
            text-align: center;
            margin-bottom: 30px;
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        .btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 50px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-block;
            text-align: center;
            box-shadow: var(--shadow);
        }
        
        .btn:hover {
            background: var(--secondary);
            transform: translateY(-2px);
        }
        
        .btn-accent {
            background: var(--accent);
        }
        
        .btn-accent:hover {
            background: #ff5252;
        }
        
        .btn-success {
            background: var(--success);
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
        }
        
        input, select {
            width: 100%;
            padding: 12px 15px;
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 1rem;
        }
        
        input::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }
        
        .code-input {
            font-size: 1.5rem;
            letter-spacing: 5px;
            text-align: center;
            text-transform: uppercase;
        }
        
        .players-container {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin: 20px 0;
        }
        
        .player-card {
            background: rgba(255, 255, 255, 0.15);
            border-radius: 10px;
            padding: 15px;
            min-width: 150px;
            text-align: center;
            position: relative;
        }
        
        .player-status {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }
        
        .online {
            background: var(--success);
        }
        
        .offline {
            background: var(--accent);
        }
        
        .question-container {
            background: rgba(255, 255, 255, 0.15);
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            text-align: center;
        }
        
        .question-text {
            font-size: 1.5rem;
            margin-bottom: 20px;
        }
        
        .answers-container {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
        }
        
        .answer-btn {
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 150px;
        }
        
        .answer-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }
        
        .timer {
            font-size: 2rem;
            text-align: center;
            margin: 20px 0;
            font-weight: bold;
        }
        
        .timer-warning {
            color: var(--warning);
        }
        
        .timer-danger {
            color: var(--accent);
        }
        
        .score-display {
            font-size: 1.5rem;
            text-align: center;
            margin: 10px 0;
        }
        
        .score-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: var(--success);
            color: white;
            padding: 20px 40px;
            border-radius: 10px;
            font-size: 2rem;
            font-weight: bold;
            z-index: 1000;
            animation: popup 1s ease-out;
            display: none;
        }
        
        @keyframes popup {
            0% { opacity: 0; transform: translate(-50%, -50%) scale(0.5); }
            50% { opacity: 1; transform: translate(-50%, -50%) scale(1.2); }
            100% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
        }
        
        .leaderboard {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            overflow: hidden;
        }
        
        .leaderboard th, .leaderboard td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .leaderboard th {
            background: rgba(255, 255, 255, 0.2);
            font-weight: 600;
        }
        
        .leaderboard tr:last-child td {
            border-bottom: none;
        }
        
        .podium {
            display: flex;
            justify-content: center;
            align-items: flex-end;
            margin: 30px 0;
            gap: 20px;
        }
        
        .podium-item {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            min-width: 120px;
        }
        
        .first {
            background: linear-gradient(to bottom, #ffd700, #ffed4e);
            color: var(--dark);
            height: 180px;
        }
        
        .second {
            background: linear-gradient(to bottom, #c0c0c0, #e0e0e0);
            color: var(--dark);
            height: 150px;
        }
        
        .third {
            background: linear-gradient(to bottom, #cd7f32, #e6a65c);
            color: var(--dark);
            height: 120px;
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }
        
        .audio-control {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 100;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--success);
            color: white;
            padding: 15px 25px;
            border-radius: 8px;
            box-shadow: var(--shadow);
            z-index: 100;
            display: none;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .screen {
                padding: 20px;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .players-container {
                justify-content: center;
            }
            
            .answers-container {
                flex-direction: column;
            }
            
            .answer-btn {
                width: 100%;
            }
            
            .podium {
                flex-direction: column;
                align-items: center;
            }
            
            .podium-item {
                width: 100%;
                max-width: 250px;
            }
        }
    </style>
</head>
<body>
    <!-- Contr√¥le audio -->
    <button class="audio-control" id="audioToggle">
        <i>üîä</i>
    </button>
    
    <!-- Notification -->
    <div class="notification" id="notification"></div>
    
    <!-- Popup de score -->
    <div class="score-popup" id="scorePopup"></div>
    
    <div class="container">
        <!-- √âcran d'accueil -->
        <div class="screen active" id="homeScreen">
            <h1>Match en Ligne</h1>
            <p class="subtitle">Jeu √âducatif Multijoueur</p>
            
            <div class="form-group">
                <label for="playerName">Votre nom</label>
                <input type="text" id="playerName" placeholder="Entrez votre nom" maxlength="15">
            </div>
            
            <div class="controls">
                <button class="btn" id="createRoomBtn">Cr√©er une salle</button>
                <button class="btn btn-accent" id="joinRoomBtn">Rejoindre une salle</button>
            </div>
            
            <div style="margin-top: 30px; text-align: center;">
                <button class="btn" id="soloModeBtn" disabled>Mode Solo (bient√¥t disponible)</button>
            </div>
        </div>
        
        <!-- √âcran de cr√©ation de salle -->
        <div class="screen" id="createRoomScreen">
            <h2>Cr√©er une salle</h2>
            
            <div class="form-group">
                <label for="roomCodeDisplay">Code de votre salle</label>
                <input type="text" id="roomCodeDisplay" class="code-input" readonly>
            </div>
            
            <div class="players-container" id="createRoomPlayers">
                <!-- Les cartes des joueurs seront ajout√©es ici -->
            </div>
            
            <div class="controls">
                <button class="btn" id="startGameBtn">D√©marrer la partie</button>
                <button class="btn btn-accent" id="backFromCreateBtn">Retour</button>
            </div>
        </div>
        
        <!-- √âcran de rejoindre une salle -->
        <div class="screen" id="joinRoomScreen">
            <h2>Rejoindre une salle</h2>
            
            <div class="form-group">
                <label for="roomCodeInput">Code de la salle</label>
                <input type="text" id="roomCodeInput" class="code-input" placeholder="ABCD" maxlength="4">
            </div>
            
            <div class="players-container" id="joinRoomPlayers">
                <!-- Les cartes des joueurs seront ajout√©es ici -->
            </div>
            
            <div class="controls">
                <button class="btn" id="confirmJoinBtn">Rejoindre</button>
                <button class="btn btn-accent" id="backFromJoinBtn">Retour</button>
            </div>
        </div>
        
        <!-- √âcran de jeu -->
        <div class="screen" id="gameScreen">
            <h2 id="gameTitle">Partie en cours</h2>
            
            <div class="timer" id="timer">30</div>
            
            <div class="question-container">
                <div class="question-text" id="questionText">Question appara√Ætra ici</div>
                <div class="answers-container" id="answersContainer">
                    <!-- Les boutons de r√©ponse seront ajout√©s ici -->
                </div>
            </div>
            
            <div class="score-display">
                Votre score: <span id="currentScore">0</span> points
            </div>
            
            <div class="players-container" id="gamePlayers">
                <!-- Les cartes des joueurs seront ajout√©es ici -->
            </div>
        </div>
        
        <!-- √âcran de mi-temps -->
        <div class="screen" id="halftimeScreen">
            <h2>Mi-temps</h2>
            
            <div class="score-display">
                Score √† la mi-temps: <span id="halftimeScore">0</span> points
            </div>
            
            <table class="leaderboard" id="halftimeLeaderboard">
                <thead>
                    <tr>
                        <th>Position</th>
                        <th>Joueur</th>
                        <th>Score</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Les lignes du classement seront ajout√©es ici -->
                </tbody>
            </table>
            
            <div class="controls">
                <button class="btn" id="continueGameBtn">Continuer</button>
            </div>
        </div>
        
        <!-- √âcran de r√©sultats finaux -->
        <div class="screen" id="resultsScreen">
            <h2>R√©sultats finaux</h2>
            
            <div class="score-display">
                Score final: <span id="finalScore">0</span> points
            </div>
            
            <div class="podium" id="podium">
                <!-- Les √©l√©ments du podium seront ajout√©s ici -->
            </div>
            
            <table class="leaderboard" id="finalLeaderboard">
                <thead>
                    <tr>
                        <th>Position</th>
                        <th>Joueur</th>
                        <th>Score</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Les lignes du classement seront ajout√©es ici -->
                </tbody>
            </table>
            
            <div class="controls">
                <button class="btn" id="playAgainBtn">Rejouer</button>
                <button class="btn btn-accent" id="backToHomeBtn">Retour √† l'accueil</button>
            </div>
        </div>
    </div>

    <script>
        // Variables globales
        let playerName = '';
        let roomCode = '';
        let isHost = false;
        let audioEnabled = true;
        let currentScore = 0;
        let halftimeScore = 0;
        let players = [];
        let currentQuestion = null;
        let timerInterval = null;
        let timeLeft = 30;
        
        // Donn√©es du jeu
        const gameData = {
            spelling: {
                dictionary: [
                    { word: "BONJOUR", hint: "Salutation courante" },
                    { word: "AMITI√â", hint: "Relation affective entre personnes" },
                    { word: "√âCOLE", hint: "Lieu d'apprentissage" },
                    { word: "LIVRE", hint: "Objet contenant des pages √©crites" },
                    { word: "MAISON", hint: "Lieu d'habitation" }
                ],
                discovery: [
                    { word: "CURIOSIT√â", hint: "D√©sir d'apprendre et de conna√Ætre" },
                    { word: "APPRENTISSAGE", hint: "Processus d'acquisition de connaissances" },
                    { word: "D√âCOUVERTE", hint: "Action de trouver quelque chose de nouveau" },
                    { word: "CONNAISSANCE", hint: "Ce que l'on sait gr√¢ce √† l'√©tude" },
                    { word: "√âDUCATION", hint: "Formation de l'esprit et du caract√®re" }
                ],
                goodTimes: [
                    { word: "PARTAGE", hint: "Action de diviser avec d'autres" },
                    { word: "GENTILLESSE", hint: "Qualit√© d'une personne bienveillante" },
                    { word: "SOURIRE", hint: "Expression faciale de joie" },
                    { word: "JOIE", hint: "Sentiment de bonheur intense" },
                    { word: "AMOUR", hint: "Sentiment d'affection profonde" }
                ]
            },
            anagrams: [
                { word: "CHAT", scrambled: "ACHT" },
                { word: "TABLE", scrambled: "BATEL" },
                { word: "JARDIN", scrambled: "JARDNI" },
                { word: "MONTAGNE", scrambled: "MONTAGEN" },
                { word: "LUMI√àRE", scrambled: "LUMI√àER" }
            ],
            math: [
                { problem: "5 + 3 √ó 2", answer: "11" },
                { problem: "12 √∑ 4 + 5", answer: "8" },
                { problem: "7 √ó 3 - 9", answer: "12" },
                { problem: "15 - 6 √∑ 2", answer: "12" },
                { problem: "4 √ó (5 + 2)", answer: "28" }
            ],
            wordField: [
                { theme: "Animaux", letter: "A", answers: ["Aigle", "Antilope", "√Çne", "Autruche"] },
                { theme: "Fruits", letter: "P", answers: ["Pomme", "Poire", "P√™che", "Prune"] },
                { theme: "Pays", letter: "F", answers: ["France", "Finlande", "Fidji", "Philippines"] },
                { theme: "Couleurs", letter: "B", answers: ["Bleu", "Blanc", "Brun", "Beige"] },
                { theme: "M√©tiers", letter: "M", answers: ["M√©decin", "Menuisier", "Musicien", "Magasinier"] }
            ]
        };
        
        // √âl√©ments DOM
        const screens = {
            home: document.getElementById('homeScreen'),
            createRoom: document.getElementById('createRoomScreen'),
            joinRoom: document.getElementById('joinRoomScreen'),
            game: document.getElementById('gameScreen'),
            halftime: document.getElementById('halftimeScreen'),
            results: document.getElementById('resultsScreen')
        };
        
        // Initialisation
        document.addEventListener('DOMContentLoaded', function() {
            // Configuration des √©couteurs d'√©v√©nements
            setupEventListeners();
            
            // G√©n√©rer un code de salle pour l'h√¥te
            document.getElementById('roomCodeDisplay').value = generateRoomCode();
        });
        
        function setupEventListeners() {
            // Boutons de navigation
            document.getElementById('createRoomBtn').addEventListener('click', createRoom);
            document.getElementById('joinRoomBtn').addEventListener('click', showJoinRoom);
            document.getElementById('backFromCreateBtn').addEventListener('click', backToHome);
            document.getElementById('backFromJoinBtn').addEventListener('click', backToHome);
            document.getElementById('confirmJoinBtn').addEventListener('click', joinRoom);
            document.getElementById('startGameBtn').addEventListener('click', startGame);
            document.getElementById('continueGameBtn').addEventListener('click', continueGame);
            document.getElementById('playAgainBtn').addEventListener('click', playAgain);
            document.getElementById('backToHomeBtn').addEventListener('click', backToHome);
            
            // Contr√¥le audio
            document.getElementById('audioToggle').addEventListener('click', toggleAudio);
            
            // Entr√©e du nom du joueur
            document.getElementById('playerName').addEventListener('input', function() {
                playerName = this.value.trim();
            });
            
            // Entr√©e du code de salle
            document.getElementById('roomCodeInput').addEventListener('input', function() {
                this.value = this.value.toUpperCase();
            });
        }
        
        function showScreen(screenName) {
            // Masquer tous les √©crans
            Object.values(screens).forEach(screen => {
                screen.classList.remove('active');
            });
            
            // Afficher l'√©cran demand√©
            screens[screenName].classList.add('active');
        }
        
        function backToHome() {
            showScreen('home');
            resetGameState();
        }
        
        function createRoom() {
            if (!playerName) {
                showNotification("Veuillez entrer votre nom");
                return;
            }
            
            roomCode = document.getElementById('roomCodeDisplay').value;
            isHost = true;
            
            // Ajouter le joueur h√¥te
            players = [{ name: playerName, score: 0, isOnline: true, isHost: true }];
            updatePlayersDisplay('createRoomPlayers');
            
            showScreen('createRoom');
        }
        
        function showJoinRoom() {
            if (!playerName) {
                showNotification("Veuillez entrer votre nom");
                return;
            }
            
            showScreen('joinRoom');
        }
        
        function joinRoom() {
            const codeInput = document.getElementById('roomCodeInput').value;
            
            if (!codeInput || codeInput.length !== 4) {
                showNotification("Code de salle invalide");
                return;
            }
            
            roomCode = codeInput;
            isHost = false;
            
            // Simuler l'ajout √† une salle existante
            players = [
                { name: "H√¥te", score: 0, isOnline: true, isHost: true },
                { name: playerName, score: 0, isOnline: true, isHost: false }
            ];
            updatePlayersDisplay('joinRoomPlayers');
            
            showScreen('joinRoom');
        }
        
        function startGame() {
            if (players.length < 1) {
                showNotification("Au moins un joueur est n√©cessaire pour d√©marrer");
                return;
            }
            
            // Initialiser les scores
            players.forEach(player => {
                player.score = 0;
                player.halftimeScore = 0;
            });
            
            currentScore = 0;
            halftimeScore = 0;
            
            // D√©marrer la premi√®re mi-temps
            startFirstHalf();
        }
        
        function startFirstHalf() {
            showScreen('game');
            document.getElementById('gameTitle').textContent = "Premi√®re mi-temps";
            
            // Premier jeu : √âpellation Dictionnaire
            startSpellingGame('dictionary');
        }
        
        function startSpellingGame(category) {
            const categoryData = gameData.spelling[category];
            const questionIndex = Math.floor(Math.random() * categoryData.length);
            const question = categoryData[questionIndex];
            
            currentQuestion = {
                type: 'spelling',
                category: category,
                word: question.word,
                hint: question.hint,
                points: 10
            };
            
            displayQuestion(
                `√âpelez le mot: "${question.hint}"`,
                ["Voir le mot", "Passer"],
                ['show', 'skip']
            );
        }
        
        function startAnagramGame() {
            const questionIndex = Math.floor(Math.random() * gameData.anagrams.length);
            const question = gameData.anagrams[questionIndex];
            
            currentQuestion = {
                type: 'anagram',
                word: question.word,
                scrambled: question.scrambled,
                points: 10
            };
            
            displayQuestion(
                `Trouvez le mot √† partir de l'anagramme: ${question.scrambled}`,
                ["Voir la r√©ponse", "Passer"],
                ['show', 'skip']
            );
        }
        
        function startMathGame() {
            const questionIndex = Math.floor(Math.random() * gameData.math.length);
            const question = gameData.math[questionIndex];
            
            currentQuestion = {
                type: 'math',
                problem: question.problem,
                answer: question.answer,
                points: 20
            };
            
            displayQuestion(
                `R√©solvez: ${question.problem}`,
                ["Voir la r√©ponse", "Passer"],
                ['show', 'skip']
            );
        }
        
        function startWordFieldGame() {
            const questionIndex = Math.floor(Math.random() * gameData.wordField.length);
            const question = gameData.wordField[questionIndex];
            
            currentQuestion = {
                type: 'wordField',
                theme: question.theme,
                letter: question.letter,
                answers: question.answers,
                points: 10
            };
            
            displayQuestion(
                `Trouvez un mot du champ lexical "${question.theme}" commen√ßant par "${question.letter}"`,
                ["Voir des exemples", "Passer"],
                ['show', 'skip']
            );
        }
        
        function displayQuestion(questionText, answerTexts, answerActions) {
            document.getElementById('questionText').textContent = questionText;
            
            const answersContainer = document.getElementById('answersContainer');
            answersContainer.innerHTML = '';
            
            answerTexts.forEach((text, index) => {
                const button = document.createElement('button');
                button.className = 'answer-btn';
                button.textContent = text;
                button.dataset.action = answerActions[index];
                button.addEventListener('click', handleAnswer);
                answersContainer.appendChild(button);
            });
            
            startTimer(30);
        }
        
        function handleAnswer(event) {
            const action = event.target.dataset.action;
            
            clearInterval(timerInterval);
            
            if (action === 'show') {
                if (currentQuestion.type === 'spelling') {
                    showNotification(`Le mot est: ${currentQuestion.word}`);
                    addScore(currentQuestion.points);
                } else if (currentQuestion.type === 'anagram') {
                    showNotification(`Le mot est: ${currentQuestion.word}`);
                    addScore(currentQuestion.points);
                } else if (currentQuestion.type === 'math') {
                    showNotification(`La r√©ponse est: ${currentQuestion.answer}`);
                    addScore(currentQuestion.points);
                } else if (currentQuestion.type === 'wordField') {
                    const examples = currentQuestion.answers.slice(0, 3).join(', ');
                    showNotification(`Exemples: ${examples}`);
                    addScore(currentQuestion.points);
                }
                
                // Passer √† la question suivante apr√®s un d√©lai
                setTimeout(nextQuestion, 2000);
            } else if (action === 'skip') {
                nextQuestion();
            }
        }
        
        function nextQuestion() {
            // Logique pour d√©terminer la prochaine question selon la mi-temps
            // Pour la d√©monstration, nous alternons entre les types de questions
            
            if (document.getElementById('gameTitle').textContent === "Premi√®re mi-temps") {
                // Premi√®re mi-temps: √âpellation, Anagrammes
                const games = ['spelling-dictionary', 'spelling-discovery', 'spelling-goodTimes', 'anagram'];
                const nextGame = games[Math.floor(Math.random() * games.length)];
                
                if (nextGame.startsWith('spelling-')) {
                    const category = nextGame.split('-')[1];
                    startSpellingGame(category);
                } else if (nextGame === 'anagram') {
                    startAnagramGame();
                }
            } else {
                // Deuxi√®me mi-temps: Math√©matiques, Champ lexical
                const games = ['math', 'wordField'];
                const nextGame = games[Math.floor(Math.random() * games.length)];
                
                if (nextGame === 'math') {
                    startMathGame();
                } else if (nextGame === 'wordField') {
                    startWordFieldGame();
                }
            }
            
            updatePlayersDisplay('gamePlayers');
        }
        
        function startTimer(seconds) {
            timeLeft = seconds;
            const timerElement = document.getElementById('timer');
            timerElement.textContent = timeLeft;
            timerElement.className = 'timer';
            
            timerInterval = setInterval(() => {
                timeLeft--;
                timerElement.textContent = timeLeft;
                
                if (timeLeft <= 10) {
                    timerElement.classList.add('timer-warning');
                }
                
                if (timeLeft <= 5) {
                    timerElement.classList.add('timer-danger');
                }
                
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    showNotification("Temps √©coul√© !");
                    nextQuestion();
                }
            }, 1000);
        }
        
        function addScore(points) {
            currentScore += points;
            
            // Mettre √† jour le score du joueur actuel
            const currentPlayer = players.find(p => p.name === playerName);
            if (currentPlayer) {
                currentPlayer.score += points;
            }
            
            // Afficher le popup de score
            const scorePopup = document.getElementById('scorePopup');
            scorePopup.textContent = `+${points} points`;
            scorePopup.style.display = 'block';
            
            setTimeout(() => {
                scorePopup.style.display = 'none';
            }, 1000);
            
            // Mettre √† jour l'affichage du score
            document.getElementById('currentScore').textContent = currentScore;
            
            // Jouer un son si l'audio est activ√©
            if (audioEnabled) {
                playScoreSound();
            }
        }
        
        function playScoreSound() {
            // Pour une vraie impl√©mentation, vous ajouteriez un son ici
            console.log("Son de score jou√©");
        }
        
        function showHalftime() {
            halftimeScore = currentScore;
            
            // Sauvegarder les scores de mi-temps pour tous les joueurs
            players.forEach(player => {
                player.halftimeScore = player.score;
            });
            
            document.getElementById('halftimeScore').textContent = halftimeScore;
            updateLeaderboard('halftimeLeaderboard', true);
            showScreen('halftime');
        }
        
        function continueGame() {
            showScreen('game');
            document.getElementById('gameTitle').textContent = "Deuxi√®me mi-temps";
            
            // D√©marrer avec les math√©matiques
            startMathGame();
        }
        
        function showResults() {
            document.getElementById('finalScore').textContent = currentScore;
            updateLeaderboard('finalLeaderboard', false);
            createPodium();
            showScreen('results');
        }
        
        function updatePlayersDisplay(containerId) {
            const container = document.getElementById(containerId);
            container.innerHTML = '';
            
            players.forEach(player => {
                const playerCard = document.createElement('div');
                playerCard.className = 'player-card';
                
                playerCard.innerHTML = `
                    <div class="player-status ${player.isOnline ? 'online' : 'offline'}"></div>
                    <h3>${player.name}</h3>
                    <p>Score: ${player.score}</p>
                    ${player.isHost ? '<p><small>H√¥te</small></p>' : ''}
                `;
                
                container.appendChild(playerCard);
            });
        }
        
        function updateLeaderboard(tableId, isHalftime) {
            const tableBody = document.querySelector(`#${tableId} tbody`);
            tableBody.innerHTML = '';
            
            // Trier les joueurs par score
            const sortedPlayers = [...players].sort((a, b) => b.score - a.score);
            
            sortedPlayers.forEach((player, index) => {
                const row = document.createElement('tr');
                
                row.innerHTML = `
                    <td>${index + 1}</td>
                    <td>${player.name} ${player.isHost ? 'üëë' : ''}</td>
                    <td>${isHalftime ? player.halftimeScore || player.score : player.score}</td>
                `;
                
                tableBody.appendChild(row);
            });
        }
        
        function createPodium() {
            const podiumContainer = document.getElementById('podium');
            podiumContainer.innerHTML = '';
            
            // Trier les joueurs par score
            const sortedPlayers = [...players].sort((a, b) => b.score - a.score);
            
            // Cr√©er les places du podium
            const positions = ['first', 'second', 'third'];
            
            sortedPlayers.slice(0, 3).forEach((player, index) => {
                const podiumItem = document.createElement('div');
                podiumItem.className = `podium-item ${positions[index]}`;
                
                podiumItem.innerHTML = `
                    <h3>${index + 1}${getOrdinalSuffix(index + 1)}</h3>
                    <p>${player.name}</p>
                    <p><strong>${player.score} pts</strong></p>
                `;
                
                podiumContainer.appendChild(podiumItem);
            });
        }
        
        function getOrdinalSuffix(number) {
            if (number === 1) return 'er';
            return '√®me';
        }
        
        function generateRoomCode() {
            const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
            let result = '';
            for (let i = 0; i < 4; i++) {
                result += characters.charAt(Math.floor(Math.random() * characters.length));
            }
            return result;
        }
        
        function toggleAudio() {
            audioEnabled = !audioEnabled;
            const audioToggle = document.getElementById('audioToggle');
            audioToggle.innerHTML = audioEnabled ? 'üîä' : 'üîá';
            showNotification(audioEnabled ? "Audio activ√©" : "Audio d√©sactiv√©");
        }
        
        function showNotification(message) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.style.display = 'block';
            
            setTimeout(() => {
                notification.style.display = 'none';
            }, 3000);
        }
        
        function resetGameState() {
            playerName = '';
            roomCode = '';
            isHost = false;
            currentScore = 0;
            halftimeScore = 0;
            players = [];
            currentQuestion = null;
            
            if (timerInterval) {
                clearInterval(timerInterval);
            }
            
            document.getElementById('playerName').value = '';
            document.getElementById('roomCodeInput').value = '';
            document.getElementById('currentScore').textContent = '0';
        }
        
        function playAgain() {
            // R√©initialiser les scores
            players.forEach(player => {
                player.score = 0;
                player.halftimeScore = 0;
            });
            
            currentScore = 0;
            halftimeScore = 0;
            
            // Red√©marrer la premi√®re mi-temps
            startFirstHalf();
        }
        
        // Pour la d√©monstration, nous allons simuler le d√©roulement d'une partie
        // Dans une vraie impl√©mentation, cela serait g√©r√© par le serveur
        
        // Simulation du d√©roulement du jeu pour la d√©mo
        setTimeout(() => {
            // Simuler la fin de la premi√®re mi-temps apr√®s quelques questions
            if (screens.game.classList.contains('active')) {
                showHalftime();
            }
        }, 30000); // Apr√®s 30 secondes
        
        setTimeout(() => {
            // Simuler la fin de la deuxi√®me mi-temps
            if (screens.game.classList.contains('active')) {
                showResults();
            }
        }, 60000); // Apr√®s 60 secondes
    </script>
</body>
</html>