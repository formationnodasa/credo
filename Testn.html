<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ü§ñ Mini Ya Credo - Robot IA Vocal Fonctionnel</title>
    <style>
        /* === STYLES COMPLETS === */
        :root {
            --primary: #4361ee;
            --primary-dark: #3a56d4;
            --secondary: #7209b7;
            --accent: #f72585;
            --success: #4cc9f0;
            --danger: #f94144;
            --warning: #f8961e;
            --light: #f8f9fa;
            --dark: #212529;
            --gray: #6c757d;
            --border: #dee2e6;
            --shadow: 0 4px 6px rgba(0,0,0,0.1);
            --radius: 12px;
            --font: 'Segoe UI', system-ui, sans-serif;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: var(--font);
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            color: var(--dark);
        }
        
        .container {
            width: 100%;
            max-width: 1000px;
            background: white;
            border-radius: var(--radius);
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            height: 90vh;
        }
        
        /* Header */
        .header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
            overflow: hidden;
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%23ffffff' fill-opacity='0.05' fill-rule='evenodd'/%3E%3C/svg%3E");
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
            position: relative;
            z-index: 1;
        }
        
        .logo-icon {
            width: 60px;
            height: 60px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            color: var(--primary);
            animation: pulse 2s infinite;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); box-shadow: 0 4px 15px rgba(0,0,0,0.2); }
            50% { transform: scale(1.05); box-shadow: 0 8px 25px rgba(0,0,0,0.3); }
        }
        
        .logo-text h1 {
            font-size: 24px;
            margin-bottom: 5px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        
        .logo-text p {
            opacity: 0.9;
            font-size: 14px;
        }
        
        .status {
            display: flex;
            align-items: center;
            gap: 10px;
            background: rgba(255,255,255,0.1);
            padding: 8px 15px;
            border-radius: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
            position: relative;
            z-index: 1;
        }
        
        .status-dot {
            width: 10px;
            height: 10px;
            background: #4ade80;
            border-radius: 50%;
            animation: blink 2s infinite;
            box-shadow: 0 0 10px #4ade80;
        }
        
        @keyframes blink {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(0.95); }
        }
        
        /* Main Content */
        .main-content {
            display: flex;
            flex: 1;
            overflow: hidden;
        }
        
        .chat-panel {
            flex: 1;
            display: flex;
            flex-direction: column;
            padding: 20px;
            background: #f8f9fa;
        }
        
        .chat-header {
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--border);
        }
        
        .chat-header h2 {
            color: var(--primary);
            font-size: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 15px;
            background: white;
            border-radius: var(--radius);
            margin-bottom: 20px;
            box-shadow: var(--shadow) inset;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .message {
            animation: fadeIn 0.3s;
            max-width: 85%;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .message-user {
            align-self: flex-end;
            background: var(--primary);
            color: white;
            padding: 15px;
            border-radius: 18px 18px 0 18px;
            box-shadow: var(--shadow);
            position: relative;
        }
        
        .message-user::after {
            content: '';
            position: absolute;
            bottom: 0;
            right: -8px;
            width: 0;
            height: 0;
            border-left: 10px solid var(--primary);
            border-right: 10px solid transparent;
            border-top: 10px solid transparent;
            border-bottom: 10px solid var(--primary);
        }
        
        .message-robot {
            align-self: flex-start;
            background: var(--light);
            padding: 15px;
            border-radius: 18px 18px 18px 0;
            border: 1px solid var(--border);
            box-shadow: var(--shadow);
            position: relative;
        }
        
        .message-robot::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: -8px;
            width: 0;
            height: 0;
            border-right: 10px solid var(--light);
            border-left: 10px solid transparent;
            border-top: 10px solid transparent;
            border-bottom: 10px solid var(--light);
        }
        
        .robot-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
            color: var(--primary);
            font-weight: bold;
        }
        
        .robot-icon {
            width: 30px;
            height: 30px;
            background: var(--primary);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
        }
        
        .typing-indicator {
            display: none;
            align-items: center;
            gap: 10px;
            padding: 15px;
            background: var(--light);
            border-radius: var(--radius);
            margin-bottom: 20px;
            border: 1px solid var(--border);
            align-self: flex-start;
            max-width: 200px;
        }
        
        .typing-indicator.active {
            display: flex;
        }
        
        .typing-dots {
            display: flex;
            gap: 4px;
        }
        
        .typing-dots div {
            width: 8px;
            height: 8px;
            background: var(--primary);
            border-radius: 50%;
            animation: typing 1.4s infinite;
        }
        
        .typing-dots div:nth-child(2) { animation-delay: 0.2s; }
        .typing-dots div:nth-child(3) { animation-delay: 0.4s; }
        
        @keyframes typing {
            0%, 100% { transform: translateY(0); opacity: 0.4; }
            50% { transform: translateY(-10px); opacity: 1; }
        }
        
        /* Input Area */
        .input-area {
            display: flex;
            gap: 10px;
            align-items: flex-end;
            background: white;
            padding: 15px;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            border: 1px solid var(--border);
        }
        
        .voice-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--accent);
            border: none;
            color: white;
            font-size: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
            position: relative;
            flex-shrink: 0;
        }
        
        .voice-btn:hover {
            background: #e11574;
            transform: scale(1.05);
        }
        
        .voice-btn.listening {
            background: var(--danger);
            animation: pulse 1s infinite;
        }
        
        .voice-btn.listening::after {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            border: 2px solid var(--danger);
            animation: ripple 1.5s infinite;
        }
        
        @keyframes ripple {
            0% { transform: scale(1); opacity: 1; }
            100% { transform: scale(2); opacity: 0; }
        }
        
        .input-wrapper {
            flex: 1;
            position: relative;
        }
        
        textarea {
            width: 100%;
            min-height: 50px;
            max-height: 150px;
            padding: 15px;
            border: 2px solid var(--border);
            border-radius: var(--radius);
            font-family: inherit;
            font-size: 16px;
            resize: none;
            transition: all 0.3s;
            background: var(--light);
        }
        
        textarea:focus {
            outline: none;
            border-color: var(--primary);
            background: white;
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.1);
        }
        
        .send-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--primary);
            border: none;
            color: white;
            font-size: 20px;
            cursor: pointer;
            transition: all 0.3s;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .send-btn:hover {
            background: var(--primary-dark);
            transform: scale(1.05);
        }
        
        /* Side Panel */
        .side-panel {
            width: 350px;
            padding: 20px;
            background: white;
            border-left: 1px solid var(--border);
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .panel-section {
            background: var(--light);
            padding: 20px;
            border-radius: var(--radius);
            border: 1px solid var(--border);
        }
        
        .panel-section h3 {
            color: var(--primary);
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border);
            font-size: 18px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .knowledge-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 20px;
        }
        
        .knowledge-tag {
            background: white;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            color: var(--gray);
            border: 1px solid var(--border);
            transition: all 0.3s;
        }
        
        .knowledge-tag:hover {
            background: var(--primary);
            color: white;
            transform: translateY(-2px);
        }
        
        .settings-group {
            margin-bottom: 15px;
        }
        
        .settings-group label {
            display: block;
            margin-bottom: 5px;
            font-size: 14px;
            color: var(--gray);
            font-weight: 500;
        }
        
        select, input {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid var(--border);
            border-radius: 6px;
            font-family: inherit;
            font-size: 14px;
            transition: all 0.3s;
            background: white;
        }
        
        select:focus, input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.1);
        }
        
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-family: inherit;
            font-weight: 500;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .btn-primary {
            background: var(--primary);
            color: white;
        }
        
        .btn-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }
        
        .btn-secondary {
            background: white;
            color: var(--dark);
            border: 1px solid var(--border);
        }
        
        .btn-secondary:hover {
            background: #e9ecef;
            transform: translateY(-2px);
        }
        
        .voice-controls {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-top: 15px;
        }
        
        .voice-control-btn {
            padding: 8px 15px;
            border: 1px solid var(--border);
            background: white;
            border-radius: 6px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s;
        }
        
        .voice-control-btn:hover {
            background: var(--light);
        }
        
        .voice-control-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }
        
        /* Footer */
        .footer {
            padding: 15px 20px;
            background: var(--light);
            border-top: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 14px;
            color: var(--gray);
        }
        
        .stats {
            display: flex;
            gap: 20px;
        }
        
        .stat {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        /* Voice Visualizer */
        .voice-visualizer {
            display: flex;
            align-items: flex-end;
            gap: 2px;
            height: 40px;
            margin: 10px 0;
            display: none;
        }
        
        .voice-visualizer.active {
            display: flex;
        }
        
        .voice-bar {
            width: 4px;
            background: var(--primary);
            border-radius: 2px;
            transition: height 0.1s;
        }
        
        /* Toast Notifications */
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 12px 20px;
            background: var(--primary);
            color: white;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            z-index: 1000;
            animation: slideIn 0.3s, fadeOut 0.3s 2.7s forwards;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        @keyframes fadeOut {
            to { opacity: 0; }
        }
        
        .toast.success { background: var(--success); }
        .toast.error { background: var(--danger); }
        .toast.warning { background: var(--warning); }
        
        /* Responsive */
        @media (max-width: 768px) {
            .container {
                height: 100vh;
                border-radius: 0;
            }
            
            .main-content {
                flex-direction: column;
            }
            
            .side-panel {
                width: 100%;
                border-left: none;
                border-top: 1px solid var(--border);
                max-height: 300px;
            }
            
            .message-user, .message-robot {
                max-width: 95%;
            }
            
            .header {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }
            
            .status {
                align-self: center;
            }
        }
        
        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: var(--light);
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: var(--gray);
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary);
        }
        
        /* Code blocks */
        code {
            background: var(--dark);
            color: white;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }
        
        pre code {
            display: block;
            padding: 15px;
            margin: 10px 0;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="logo">
                <div class="logo-icon">
                    ü§ñ
                </div>
                <div class="logo-text">
                    <h1>Mini Ya Credo</h1>
                    <p>Robot IA Vocal avec Reconnaissance et Synth√®se Vocale</p>
                </div>
            </div>
            <div class="status">
                <div class="status-dot"></div>
                <span id="statusText">Pr√™t √† √©couter et parler</span>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Chat Panel -->
            <div class="chat-panel">
                <div class="chat-header">
                    <h2>üí¨ Conversation Vocale avec l'IA</h2>
                </div>
                
                <div class="chat-messages" id="chatMessages">
                    <div class="message message-robot">
                        <div class="robot-header">
                            <div class="robot-icon">ü§ñ</div>
                            <span>Mini Ya Credo</span>
                        </div>
                        <div>
                            <p><strong>Bonjour ! Je suis Mini Ya Credo, votre assistant IA vocal COMPLET.</strong></p>
                            <p style="margin-top: 10px;">üé§ <strong>Fonctionnalit√©s vocales ACTIVES :</strong></p>
                            <ul style="margin: 10px 0 10px 20px;">
                                <li>‚úÖ Reconnaissance vocale int√©gr√©e</li>
                                <li>‚úÖ Synth√®se vocale (texte vers parole)</li>
                                <li>‚úÖ R√©ponses intelligentes en temps r√©el</li>
                                <li>‚úÖ Support fran√ßais/anglais</li>
                                <li>‚úÖ Vitesse vocale ajustable</li>
                            </ul>
                            <p><strong>Pour commencer :</strong></p>
                            <ol style="margin: 10px 0 10px 20px;">
                                <li>Cliquez sur le bouton üé§ MICROPHONE pour parler</li>
                                <li>Je vais transcrire et r√©pondre vocalement</li>
                                <li>Vous pouvez aussi taper votre question</li>
                            </ol>
                            <div style="margin-top: 15px; padding: 10px; background: white; border-radius: 8px; border-left: 4px solid var(--primary);">
                                <strong>üéØ Testez-moi :</strong> Dites "Bonjour" ou "Explique la th√©orie de la relativit√©"
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Typing Indicator -->
                <div class="typing-indicator" id="typingIndicator">
                    <div class="typing-dots">
                        <div></div>
                        <div></div>
                        <div></div>
                    </div>
                    <span>Mini Ya Credo r√©fl√©chit...</span>
                </div>
                
                <!-- Voice Visualizer -->
                <div class="voice-visualizer" id="voiceVisualizer">
                    <!-- Bars will be added by JavaScript -->
                </div>
                
                <!-- Input Area -->
                <div class="input-area">
                    <button class="voice-btn" id="voiceBtn" title="Cliquez pour parler">
                        üé§
                    </button>
                    
                    <div class="input-wrapper">
                        <textarea 
                            id="userInput" 
                            placeholder="Parlez ou tapez votre question ici... (Appuyez sur Entr√©e pour envoyer)"
                            rows="1"></textarea>
                    </div>
                    
                    <button class="send-btn" id="sendBtn" title="Envoyer le message">
                        ‚úàÔ∏è
                    </button>
                </div>
            </div>
            
            <!-- Side Panel -->
            <div class="side-panel">
                <!-- Configuration Vocale -->
                <div class="panel-section">
                    <h3>üé§ Configuration Vocale</h3>
                    
                    <div class="settings-group">
                        <label for="voiceLanguage">Langue de reconnaissance :</label>
                        <select id="voiceLanguage">
                            <option value="fr-FR">Fran√ßais (France)</option>
                            <option value="fr-CA">Fran√ßais (Canada)</option>
                            <option value="en-US">Anglais (USA)</option>
                            <option value="en-GB">Anglais (UK)</option>
                            <option value="es-ES">Espagnol</option>
                            <option value="de-DE">Allemand</option>
                        </select>
                    </div>
                    
                    <div class="settings-group">
                        <label for="voiceSpeed">Vitesse de parole : <span id="speedValue">1.0x</span></label>
                        <input type="range" id="voiceSpeed" min="0.5" max="2" step="0.1" value="1">
                    </div>
                    
                    <div class="settings-group">
                        <label for="voicePitch">Hauteur de voix : <span id="pitchValue">Normal</span></label>
                        <input type="range" id="voicePitch" min="0.5" max="2" step="0.1" value="1">
                    </div>
                    
                    <div class="settings-group">
                        <label>
                            <input type="checkbox" id="autoSpeak" checked> R√©ponses vocales automatiques
                        </label>
                    </div>
                    
                    <div class="voice-controls">
                        <button class="voice-control-btn" id="testVoiceBtn">
                            <span>üîä</span> Tester la voix
                        </button>
                        <button class="voice-control-btn" id="stopVoiceBtn">
                            <span>‚èπÔ∏è</span> Arr√™ter
                        </button>
                    </div>
                </div>
                
                <!-- Configuration IA -->
                <div class="panel-section">
                    <h3>üß† Intelligence Artificielle</h3>
                    <div class="settings-group">
                        <label for="aiMode">Mode de r√©ponse :</label>
                        <select id="aiMode">
                            <option value="smart">Intelligent (IA simul√©e)</option>
                            <option value="simple">Simple (r√©ponses basiques)</option>
                            <option value="fun">Ludique (r√©ponses cr√©atives)</option>
                        </select>
                    </div>
                    
                    <div class="settings-group">
                        <label>
                            <input type="checkbox" id="enableGPT" checked> Activer les r√©ponses avanc√©es
                        </label>
                    </div>
                    
                    <div class="knowledge-tags">
                        <span class="knowledge-tag">üß¨ Biologie</span>
                        <span class="knowledge-tag">üíª Code</span>
                        <span class="knowledge-tag">üìú Histoire</span>
                        <span class="knowledge-tag">‚öñÔ∏è Droit</span>
                        <span class="knowledge-tag">üí∞ √âco</span>
                        <span class="knowledge-tag">üè• Sant√©</span>
                        <span class="knowledge-tag">üß† Psycho</span>
                        <span class="knowledge-tag">üåç Geo</span>
                        <span class="knowledge-tag">üé® Art</span>
                        <span class="knowledge-tag">üìà Maths</span>
                        <span class="knowledge-tag">üî¨ Science</span>
                        <span class="knowledge-tag">üöÄ Tech</span>
                    </div>
                </div>
                
                <!-- Quick Actions -->
                <div class="panel-section">
                    <h3>‚ö° Actions Rapides</h3>
                    <div style="display: flex; flex-direction: column; gap: 10px;">
                        <button class="btn btn-secondary" id="quickScience">
                            üß¨ Question scientifique
                        </button>
                        <button class="btn btn-secondary" id="quickCode">
                            üíª Aide programmation
                        </button>
                        <button class="btn btn-secondary" id="quickWeather">
                            üå§Ô∏è M√©t√©o aujourd'hui
                        </button>
                        <button class="btn btn-secondary" id="quickJoke">
                            üòÑ Une blague
                        </button>
                        <button class="btn btn-secondary" id="quickNews">
                            üì∞ Actualit√©s
                        </button>
                    </div>
                </div>
                
                <!-- Statistiques -->
                <div class="panel-section">
                    <h3>üìä Statistiques</h3>
                    <div style="display: flex; flex-direction: column; gap: 8px;">
                        <div class="stat">
                            <span>üéôÔ∏è Questions vocales :</span>
                            <span id="voiceQuestions">0</span>
                        </div>
                        <div class="stat">
                            <span>üí¨ Messages totaux :</span>
                            <span id="totalMessages">1</span>
                        </div>
                        <div class="stat">
                            <span>‚è±Ô∏è Temps de session :</span>
                            <span id="sessionTime">00:00</span>
                        </div>
                        <div class="stat">
                            <span>üîä Volume :</span>
                            <span id="currentVolume">80%</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Footer -->
        <div class="footer">
            <div>
                ü§ñ <strong>Mini Ya Credo v2.0</strong> ‚Ä¢ Robot IA Vocal Fonctionnel
            </div>
            <div class="stats">
                <div class="stat">
                    <span>üîä</span>
                    <span id="micStatus">Micro: Pr√™t</span>
                </div>
                <div class="stat">
                    <span>ü§ñ</span>
                    <span id="aiStatus">IA: Active</span>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript COMPLET avec reconnaissance et synth√®se vocale -->
    <script>
        // ===== MINI YA CREDO - ROBOT VOCAL FONCTIONNEL =====
        
        class MiniYaCredo {
            constructor() {
                this.initialize();
                this.setupSpeechRecognition();
                this.setupSpeechSynthesis();
                this.setupEventListeners();
                this.initVoiceVisualizer();
                this.startSessionTimer();
                
                this.stats = {
                    voiceQuestions: 0,
                    totalMessages: 1,
                    sessionStart: Date.now()
                };
            }
            
            initialize() {
                // R√©cup√©rer les √©l√©ments DOM
                this.elements = {
                    chatMessages: document.getElementById('chatMessages'),
                    userInput: document.getElementById('userInput'),
                    sendBtn: document.getElementById('sendBtn'),
                    voiceBtn: document.getElementById('voiceBtn'),
                    typingIndicator: document.getElementById('typingIndicator'),
                    voiceVisualizer: document.getElementById('voiceVisualizer'),
                    statusText: document.getElementById('statusText'),
                    
                    // Configuration
                    voiceLanguage: document.getElementById('voiceLanguage'),
                    voiceSpeed: document.getElementById('voiceSpeed'),
                    voicePitch: document.getElementById('voicePitch'),
                    speedValue: document.getElementById('speedValue'),
                    pitchValue: document.getElementById('pitchValue'),
                    autoSpeak: document.getElementById('autoSpeak'),
                    aiMode: document.getElementById('aiMode'),
                    enableGPT: document.getElementById('enableGPT'),
                    
                    // Boutons
                    testVoiceBtn: document.getElementById('testVoiceBtn'),
                    stopVoiceBtn: document.getElementById('stopVoiceBtn'),
                    quickScience: document.getElementById('quickScience'),
                    quickCode: document.getElementById('quickCode'),
                    quickWeather: document.getElementById('quickWeather'),
                    quickJoke: document.getElementById('quickJoke'),
                    quickNews: document.getElementById('quickNews'),
                    
                    // Stats
                    voiceQuestions: document.getElementById('voiceQuestions'),
                    totalMessages: document.getElementById('totalMessages'),
                    sessionTime: document.getElementById('sessionTime'),
                    currentVolume: document.getElementById('currentVolume'),
                    micStatus: document.getElementById('micStatus'),
                    aiStatus: document.getElementById('aiStatus')
                };
                
                // Configuration
                this.config = {
                    voiceEnabled: true,
                    autoSpeak: true,
                    language: 'fr-FR',
                    speed: 1,
                    pitch: 1,
                    volume: 0.8,
                    aiMode: 'smart'
                };
                
                // √âtat
                this.isListening = false;
                this.isSpeaking = false;
                this.conversationHistory = [];
            }
            
            setupSpeechRecognition() {
                // V√©rifier si la reconnaissance vocale est support√©e
                const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                
                if (SpeechRecognition) {
                    this.recognition = new SpeechRecognition();
                    this.recognition.continuous = false;
                    this.recognition.interimResults = false;
                    this.recognition.lang = this.config.language;
                    
                    this.recognition.onstart = () => {
                        this.isListening = true;
                        this.elements.voiceBtn.classList.add('listening');
                        this.elements.voiceBtn.innerHTML = 'üî¥';
                        this.elements.micStatus.textContent = 'Micro: En √©coute';
                        this.showToast('üé§ Je vous √©coute... parlez maintenant', 'success');
                        this.updateStatus('En √©coute...');
                        this.startVoiceVisualizer();
                    };
                    
                    this.recognition.onresult = (event) => {
                        const transcript = event.results[0][0].transcript;
                        console.log('Texte reconnu:', transcript);
                        
                        this.elements.userInput.value = transcript;
                        this.stats.voiceQuestions++;
                        this.elements.voiceQuestions.textContent = this.stats.voiceQuestions;
                        
                        this.processUserMessage(transcript);
                    };
                    
                    this.recognition.onerror = (event) => {
                        console.error('Erreur reconnaissance:', event.error);
                        this.elements.micStatus.textContent = 'Micro: Erreur';
                        this.showToast(`Erreur: ${event.error}`, 'error');
                        this.stopListening();
                    };
                    
                    this.recognition.onend = () => {
                        this.stopListening();
                    };
                    
                    this.updateStatus('Reconnaissance vocale activ√©e');
                    this.showToast('‚úÖ Reconnaissance vocale pr√™te', 'success');
                    
                } else {
                    this.elements.voiceBtn.style.display = 'none';
                    this.elements.micStatus.textContent = 'Micro: Non support√©';
                    this.showToast('‚ö†Ô∏è Reconnaissance vocale non support√©e par votre navigateur', 'warning');
                }
            }
            
            setupSpeechSynthesis() {
                // V√©rifier si la synth√®se vocale est support√©e
                if ('speechSynthesis' in window) {
                    this.synthesis = window.speechSynthesis;
                    this.voices = [];
                    
                    // Charger les voix disponibles
                    this.loadVoices();
                    
                    // √âv√©nement quand les voix sont charg√©es
                    speechSynthesis.onvoiceschanged = () => {
                        this.loadVoices();
                    };
                    
                    this.updateStatus('Synth√®se vocale activ√©e');
                    
                } else {
                    this.elements.autoSpeak.checked = false;
                    this.elements.autoSpeak.disabled = true;
                    this.showToast('‚ö†Ô∏è Synth√®se vocale non support√©e', 'warning');
                }
            }
            
            loadVoices() {
                this.voices = speechSynthesis.getVoices();
                console.log('Voix disponibles:', this.voices);
            }
            
            setupEventListeners() {
                // Bouton microphone
                this.elements.voiceBtn.addEventListener('click', () => this.toggleListening());
                
                // Bouton envoyer
                this.elements.sendBtn.addEventListener('click', () => this.sendMessage());
                
                // Entr√©e dans le textarea
                this.elements.userInput.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' && !e.shiftKey) {
                        e.preventDefault();
                        this.sendMessage();
                    }
                });
                
                // Auto-resize textarea
                this.elements.userInput.addEventListener('input', function() {
                    this.style.height = 'auto';
                    this.style.height = Math.min(this.scrollHeight, 150) + 'px';
                });
                
                // Configuration vocale
                this.elements.voiceSpeed.addEventListener('input', (e) => {
                    this.config.speed = parseFloat(e.target.value);
                    this.elements.speedValue.textContent = `${this.config.speed}x`;
                });
                
                this.elements.voicePitch.addEventListener('input', (e) => {
                    this.config.pitch = parseFloat(e.target.value);
                    const pitchText = this.config.pitch < 0.8 ? 'Grave' : 
                                     this.config.pitch > 1.2 ? 'Aigu' : 'Normal';
                    this.elements.pitchValue.textContent = pitchText;
                });
                
                this.elements.voiceLanguage.addEventListener('change', (e) => {
                    this.config.language = e.target.value;
                    if (this.recognition) {
                        this.recognition.lang = this.config.language;
                    }
                });
                
                this.elements.autoSpeak.addEventListener('change', (e) => {
                    this.config.autoSpeak = e.target.checked;
                });
                
                this.elements.aiMode.addEventListener('change', (e) => {
                    this.config.aiMode = e.target.value;
                });
                
                // Boutons de test
                this.elements.testVoiceBtn.addEventListener('click', () => {
                    this.speakText("Bonjour ! Je suis Mini Ya Credo, votre assistant vocal. Je suis pr√™t √† vous aider.");
                });
                
                this.elements.stopVoiceBtn.addEventListener('click', () => {
                    this.stopSpeaking();
                });
                
                // Actions rapides
                this.elements.quickScience.addEventListener('click', () => {
                    this.elements.userInput.value = "Explique la photosynth√®se de mani√®re simple";
                    this.sendMessage();
                });
                
                this.elements.quickCode.addEventListener('click', () => {
                    this.elements.userInput.value = "Montre-moi un exemple de fonction JavaScript";
                    this.sendMessage();
                });
                
                this.elements.quickWeather.addEventListener('click', () => {
                    this.elements.userInput.value = "Quelle est la m√©t√©o aujourd'hui ?";
                    this.sendMessage();
                });
                
                this.elements.quickJoke.addEventListener('click', () => {
                    this.elements.userInput.value = "Raconte-moi une blague";
                    this.sendMessage();
                });
                
                this.elements.quickNews.addEventListener('click', () => {
                    this.elements.userInput.value = "Quelles sont les actualit√©s importantes ?";
                    this.sendMessage();
                });
                
                // Initialiser les valeurs
                this.elements.speedValue.textContent = `${this.config.speed}x`;
                this.elements.pitchValue.textContent = 'Normal';
                this.elements.currentVolume.textContent = '80%';
            }
            
            initVoiceVisualizer() {
                // Cr√©er les barres du visualiseur vocal
                for (let i = 0; i < 20; i++) {
                    const bar = document.createElement('div');
                    bar.className = 'voice-bar';
                    bar.style.height = '5px';
                    this.elements.voiceVisualizer.appendChild(bar);
                }
            }
            
            startVoiceVisualizer() {
                this.elements.voiceVisualizer.classList.add('active');
                const bars = this.elements.voiceVisualizer.querySelectorAll('.voice-bar');
                
                this.visualizerInterval = setInterval(() => {
                    bars.forEach(bar => {
                        const randomHeight = Math.random() * 100;
                        bar.style.height = `${5 + randomHeight}%`;
                        bar.style.background = `hsl(${200 + randomHeight * 0.5}, 70%, 50%)`;
                    });
                }, 100);
            }
            
            stopVoiceVisualizer() {
                this.elements.voiceVisualizer.classList.remove('active');
                if (this.visualizerInterval) {
                    clearInterval(this.visualizerInterval);
                }
                
                // R√©initialiser les barres
                const bars = this.elements.voiceVisualizer.querySelectorAll('.voice-bar');
                bars.forEach(bar => {
                    bar.style.height = '5px';
                    bar.style.background = 'var(--primary)';
                });
            }
            
            toggleListening() {
                if (!this.recognition) {
                    this.showToast('Reconnaissance vocale non disponible', 'error');
                    return;
                }
                
                if (this.isListening) {
                    this.recognition.stop();
                } else {
                    try {
                        this.recognition.start();
                    } catch (error) {
                        console.error('Erreur d√©marrage reconnaissance:', error);
                        this.showToast('Erreur d\'acc√®s au microphone', 'error');
                    }
                }
            }
            
            stopListening() {
                this.isListening = false;
                this.elements.voiceBtn.classList.remove('listening');
                this.elements.voiceBtn.innerHTML = 'üé§';
                this.elements.micStatus.textContent = 'Micro: Pr√™t';
                this.updateStatus('Pr√™t √† √©couter');
                this.stopVoiceVisualizer();
            }
            
            sendMessage() {
                const message = this.elements.userInput.value.trim();
                if (!message) return;
                
                this.processUserMessage(message);
                this.elements.userInput.value = '';
                this.elements.userInput.style.height = 'auto';
            }
            
            processUserMessage(message) {
                // Ajouter le message utilisateur
                this.addMessage(message, 'user');
                this.stats.totalMessages++;
                this.elements.totalMessages.textContent = this.stats.totalMessages;
                
                // Afficher l'indicateur de frappe
                this.showTyping(true);
                
                // Simuler un d√©lai de traitement
                setTimeout(() => {
                    // G√©n√©rer une r√©ponse
                    const response = this.generateAIResponse(message);
                    
                    // Ajouter la r√©ponse
                    this.addMessage(response, 'robot');
                    this.showTyping(false);
                    
                    // Parler la r√©ponse si activ√©
                    if (this.config.autoSpeak && this.synthesis) {
                        this.speakText(response);
                    }
                    
                }, 1000 + Math.random() * 1000);
            }
            
            generateAIResponse(message) {
                const lowerMessage = message.toLowerCase();
                const aiMode = this.config.aiMode;
                
                // Mode intelligent (simule une IA avanc√©e)
                if (aiMode === 'smart' && this.elements.enableGPT.checked) {
                    return this.generateSmartResponse(message);
                }
                
                // Mode simple (r√©ponses basiques)
                if (aiMode === 'simple') {
                    return this.generateSimpleResponse(lowerMessage);
                }
                
                // Mode ludique
                return this.generateFunResponse(lowerMessage);
            }
            
            generateSmartResponse(message) {
                // Simule des r√©ponses intelligentes de type GPT
                const responses = {
                    // Sciences
                    "photo|synth√®se": `**La photosynth√®se expliqu√©e simplement :** üå±

La photosynth√®se est le processus par lequel les plantes transforment la lumi√®re du soleil en √©nergie.

**En 3 √©tapes simples :**
1. **Absorption** : Les feuilles captent la lumi√®re du soleil
2. **Transformation** : L'eau et le CO‚ÇÇ sont convertis en glucose
3. **Lib√©ration** : De l'oxyg√®ne est lib√©r√© dans l'air

**√âquation simplifi√©e :**
‚òÄÔ∏è Lumi√®re + üíß Eau + üå¨Ô∏è CO‚ÇÇ ‚Üí üç¨ Glucose + üå¨Ô∏è O‚ÇÇ

C'est gr√¢ce √† ce processus que nous avons de l'oxyg√®ne √† respirer !`,

                    "code|javascript|fonction": `**Exemple de fonction JavaScript :** üíª

\`\`\`javascript
// Fonction qui calcule la factorielle d'un nombre
function factorielle(n) {
    if (n === 0 || n === 1) {
        return 1;
    }
    return n * factorielle(n - 1);
}

// Exemple d'utilisation
console.log(factorielle(5)); // Affiche 120 (5! = 5√ó4√ó3√ó2√ó1)

// Version moderne avec fonction fl√©ch√©e
const factorielleArrow = (n) => 
    n <= 1 ? 1 : n * factorielleArrow(n - 1);
\`\`\`

**Conseil :** Les fonctions r√©cursives comme celle-ci sont √©l√©gantes mais attention √† la pile d'appels pour les grands nombres.`,

                    "m√©t√©o|temps|climat": `**Information m√©t√©orologique :** üå§Ô∏è

Je ne peux pas acc√©der √† la m√©t√©o en temps r√©el, mais voici des conseils g√©n√©raux :

**Pour aujourd'hui :**
‚Ä¢ V√©rifiez votre application m√©t√©o locale
‚Ä¢ Habillez-vous en fonction de la saison
‚Ä¢ Pensez √† prendre un parapluie si des pr√©cipitations sont pr√©vues

**Temp√©ratures moyennes selon la saison :**
- Printemps : 10¬∞C √† 20¬∞C
- √ât√© : 20¬∞C √† 30¬∞C
- Automne : 10¬∞C √† 20¬∞C
- Hiver : 0¬∞C √† 10¬∞C

**Astuce :** Consultez M√©t√©o-France pour des pr√©visions pr√©cises.`,

                    "blague|rigoler|humour": `**Voici une blague scientifique :** üòÑ

**Pourquoi les protons sont-ils toujours positifs ?**
Parce qu'ils ne savent pas comment √™tre n√©gatifs !

**Et une autre :**
**Que dit un ordinateur malade ?**
"J'ai un virus, je vais me mettre en quarantaine !"

**Blague de programmeur :**
Il y a 10 types de personnes dans le monde :
Ceux qui comprennent le binaire, et ceux qui ne le comprennent pas.`,

                    "actualit√©s|nouvelles|info": `**Actualit√©s du jour (simul√©es) :** üì∞

**Science & Technologie :**
‚Ä¢ Avanc√©es prometteuses en intelligence artificielle √©thique
‚Ä¢ D√©couverte d'une nouvelle exoplan√®te potentiellement habitable
‚Ä¢ Progr√®s dans la recherche sur les √©nergies renouvelables

**Sant√© :**
‚Ä¢ Nouveaux traitements en d√©veloppement
‚Ä¢ Campagnes de pr√©vention en cours
‚Ä¢ Avanc√©es dans la recherche m√©dicale

**Conseil :** Pour des actualit√©s r√©elles, consultez les sites d'information officiels comme France Info, Le Monde, ou BBC News.`,

                    "bonjour|salut|hello": `**Bonjour !** üëã

Je suis **Mini Ya Credo**, votre assistant vocal intelligent. Je peux vous aider dans de nombreux domaines :

**Mes sp√©cialit√©s :**
‚Ä¢ üß™ Sciences et technologie
‚Ä¢ üíª Programmation et informatique
‚Ä¢ üìö Histoire et culture
‚Ä¢ üè• Sant√© et bien-√™tre
‚Ä¢ ‚öñÔ∏è Droit et √©conomie
‚Ä¢ üé® Arts et cr√©ativit√©

N'h√©sitez pas √† me poser vos questions !`,

                    "relativit√©|einstein": `**La th√©orie de la relativit√© simplifi√©e :** üöÄ

**Relativit√© restreinte (1905) :**
‚Ä¢ Le temps n'est pas absolu, il d√©pend de la vitesse
‚Ä¢ Rien ne peut aller plus vite que la lumi√®re (300,000 km/s)
‚Ä¢ E = mc¬≤ : √ânergie et masse sont √©quivalentes

**Relativit√© g√©n√©rale (1915) :**
‚Ä¢ La gravit√© est une courbure de l'espace-temps
‚Ä¢ Les objets massifs d√©forment l'espace autour d'eux
‚Ä¢ Pr√©dit les trous noirs et l'expansion de l'univers

**Exemple concret :**
Les GPS doivent corriger les effets de la relativit√© pour √™tre pr√©cis !`
                };
                
                // Chercher la r√©ponse la plus appropri√©e
                for (const [keywords, response] of Object.entries(responses)) {
                    const keywordList = keywords.split('|');
                    if (keywordList.some(keyword => message.toLowerCase().includes(keyword))) {
                        return response;
                    }
                }
                
                // R√©ponse par d√©faut intelligente
                return `**R√©ponse √† votre question :** "${message}"

Je comprends que vous souhaitez des informations sur ce sujet. En tant qu'assistant IA, je peux vous dire que :

**Points cl√©s :**
1. C'est un sujet int√©ressant qui m√©rite une √©tude approfondie
2. Il existe plusieurs perspectives √† consid√©rer
3. La recherche moderne apporte r√©guli√®rement de nouveaux √©clairages

**Pour aller plus loin :**
‚Ä¢ Consultez des sources acad√©miques fiables
‚Ä¢ V√©rifiez la date des informations (actualit√© importante)
‚Ä¢ Comparez diff√©rentes perspectives

**Mon conseil :** Pour une r√©ponse plus pr√©cise, vous pourriez pr√©ciser votre question ou consulter des experts du domaine.

N'h√©sitez pas √† me poser d'autres questions ! ü§ñ`;
            }
            
            generateSimpleResponse(message) {
                // R√©ponses simples et directes
                if (message.includes('bonjour') || message.includes('salut')) {
                    return "Bonjour ! Comment puis-je vous aider ?";
                }
                
                if (message.includes('heure')) {
                    const now = new Date();
                    return `Il est ${now.getHours()}h${now.getMinutes().toString().padStart(2, '0')}`;
                }
                
                if (message.includes('nom')) {
                    return "Je m'appelle Mini Ya Credo, votre assistant vocal.";
                }
                
                if (message.includes('aide')) {
                    return "Je peux vous aider avec des questions simples. Posez-moi une question !";
                }
                
                return `J'ai bien re√ßu votre message : "${message}". Je suis en mode r√©ponse simple.`;
            }
            
            generateFunResponse(message) {
                // R√©ponses cr√©atives et amusantes
                const funResponses = [
                    `üé≠ *En mode cr√©atif !* Votre question "${message}" m'inspire... Je dirais que la r√©ponse se trouve dans les √©toiles ! ‚≠ê`,
                    `ü§î Hmm, "${message}"... Je r√©fl√©chis avec ma plus belle intelligence artificielle ! La r√©ponse pourrait √™tre : 42 ! (R√©f√©rence √† "H2G2")`,
                    `üé® *Mode artistique activ√© !* Imaginez que votre question est une peinture... Ma r√©ponse serait un magnifique arc-en-ciel de possibilit√©s ! üåà`,
                    `üöÄ *Boost cr√©atif !* "${message}"... Zoom zoom ! Ma r√©ponse d√©colle vers l'infini et au-del√† !`,
                    `üé™ *Cirque des r√©ponses !* Pour "${message}", je vous propose un num√©ro de jonglage avec les mots : Savoir, Comprendre, Explorer !`,
                    `üçï *Mode pizza !* Mmmm... Votre question me fait penser √† une pizza aux 4 fromages : chaque r√©ponse est d√©licieuse √† sa mani√®re !`
                ];
                
                return funResponses[Math.floor(Math.random() * funResponses.length)];
            }
            
            addMessage(content, sender) {
                const messageDiv = document.createElement('div');
                messageDiv.className = `message message-${sender}`;
                
                if (sender === 'user') {
                    messageDiv.innerHTML = `
                        <div style="text-align: right; font-size: 12px; color: var(--gray); margin-bottom: 5px;">
                            Vous ‚Ä¢ ${new Date().toLocaleTimeString('fr-FR', {hour: '2-digit', minute:'2-digit'})}
                        </div>
                        <div style="background: var(--primary); color: white; padding: 12px; border-radius: 12px;">
                            ${this.escapeHtml(content)}
                        </div>
                    `;
                } else {
                    // Formater la r√©ponse du robot
                    let formattedContent = this.formatMessage(content);
                    
                    messageDiv.innerHTML = `
                        <div class="robot-header">
                            <div class="robot-icon">ü§ñ</div>
                            <span>Mini Ya Credo</span>
                            <span style="font-size: 11px; opacity: 0.7; margin-left: auto;">
                                ${new Date().toLocaleTimeString('fr-FR', {hour: '2-digit', minute:'2-digit'})}
                            </span>
                        </div>
                        <div style="line-height: 1.6;">
                            ${formattedContent}
                        </div>
                    `;
                }
                
                this.elements.chatMessages.appendChild(messageDiv);
                this.elements.chatMessages.scrollTop = this.elements.chatMessages.scrollHeight;
            }
            
            formatMessage(text) {
                // √âchapper le HTML pour s√©curit√©
                let safeText = this.escapeHtml(text);
                
                // Formater le markdown simple
                safeText = safeText
                    .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
                    .replace(/\*(.*?)\*/g, '<em>$1</em>')
                    .replace(/`(.*?)`/g, '<code>$1</code>')
                    .replace(/```([\s\S]*?)```/g, '<pre><code>$1</code></pre>')
                    .replace(/\n/g, '<br>');
                
                // Ajouter des √©mojis pour les titres
                safeText = safeText.replace(/^([^<][^:]+):/gm, (match, title) => {
                    return `<strong style="color: var(--primary);">${title}:</strong>`;
                });
                
                // Ajouter des couleurs pour les listes
                safeText = safeText.replace(/^‚Ä¢\s+(.*?)$/gm, '<span style="color: var(--secondary);">‚Ä¢</span> $1');
                
                return safeText;
            }
            
            escapeHtml(text) {
                const div = document.createElement('div');
                div.textContent = text;
                return div.innerHTML;
            }
            
            showTyping(show) {
                if (show) {
                    this.elements.typingIndicator.classList.add('active');
                } else {
                    this.elements.typingIndicator.classList.remove('active');
                }
                this.elements.chatMessages.scrollTop = this.elements.chatMessages.scrollHeight;
            }
            
            speakText(text) {
                if (!this.synthesis || this.isSpeaking) {
                    this.stopSpeaking();
                }
                
                // Nettoyer le texte pour la synth√®se (enlever le code, markdown, etc.)
                const cleanText = text
                    .replace(/```[\s\S]*?```/g, '')
                    .replace(/`.*?`/g, '')
                    .replace(/\*\*/g, '')
                    .replace(/\*/g, '')
                    .replace(/#/g, '')
                    .replace(/\[.*?\]/g, '')
                    .replace(/\(.*?\)/g, '')
                    .substring(0, 500); // Limiter la longueur
                
                if (!cleanText.trim()) return;
                
                const utterance = new SpeechSynthesisUtterance(cleanText);
                utterance.lang = this.config.language;
                utterance.rate = this.config.speed;
                utterance.pitch = this.config.pitch;
                utterance.volume = this.config.volume;
                
                // S√©lectionner une voix fran√ßaise si disponible
                const frenchVoices = this.voices.filter(voice => 
                    voice.lang.startsWith('fr') || voice.lang.startsWith('FR')
                );
                
                if (frenchVoices.length > 0) {
                    utterance.voice = frenchVoices[Math.floor(Math.random() * frenchVoices.length)];
                }
                
                utterance.onstart = () => {
                    this.isSpeaking = true;
                    this.elements.aiStatus.textContent = 'IA: Parle';
                    this.updateStatus('Je parle...');
                };
                
                utterance.onend = () => {
                    this.isSpeaking = false;
                    this.elements.aiStatus.textContent = 'IA: Active';
                    this.updateStatus('Pr√™t');
                };
                
                utterance.onerror = (event) => {
                    console.error('Erreur synth√®se:', event);
                    this.isSpeaking = false;
                    this.elements.aiStatus.textContent = 'IA: Erreur';
                    this.updateStatus('Erreur synth√®se');
                };
                
                this.synthesis.speak(utterance);
            }
            
            stopSpeaking() {
                if (this.synthesis && this.isSpeaking) {
                    this.synthesis.cancel();
                    this.isSpeaking = false;
                    this.elements.aiStatus.textContent = 'IA: Active';
                    this.updateStatus('Arr√™t√©');
                }
            }
            
            updateStatus(text) {
                this.elements.statusText.textContent = text;
            }
            
            showToast(message, type = 'info') {
                const toast = document.createElement('div');
                toast.className = `toast ${type}`;
                toast.innerHTML = `
                    <span>${type === 'success' ? '‚úÖ' : type === 'error' ? '‚ùå' : '‚ÑπÔ∏è'}</span>
                    <span>${message}</span>
                `;
                
                document.body.appendChild(toast);
                
                // Supprimer apr√®s 3 secondes
                setTimeout(() => {
                    if (toast.parentNode) {
                        toast.parentNode.removeChild(toast);
                    }
                }, 3000);
                
                // Auto-suppression en cas d'erreur d'animation
                setTimeout(() => {
                    if (toast.parentNode) {
                        toast.parentNode.removeChild(toast);
                    }
                }, 4000);
            }
            
            startSessionTimer() {
                setInterval(() => {
                    const elapsed = Date.now() - this.stats.sessionStart;
                    const minutes = Math.floor(elapsed / 60000);
                    const seconds = Math.floor((elapsed % 60000) / 1000);
                    this.elements.sessionTime.textContent = 
                        `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                }, 1000);
            }
        }
        
        // Initialiser le robot quand la page est charg√©e
        document.addEventListener('DOMContentLoaded', () => {
            window.robot = new MiniYaCredo();
            
            // Ajouter un message de bienvenue vocal
            setTimeout(() => {
                if (window.robot.synthesis && window.robot.config.autoSpeak) {
                    window.robot.speakText("Bonjour ! Je suis Mini Ya Credo, votre assistant vocal. Dites bonjour ou cliquez sur le microphone pour commencer.");
                }
            }, 1000);
            
            // Ajouter des tips p√©riodiques
            setInterval(() => {
                const tips = [
                    "üí° Astuce : Cliquez sur le microphone pour parler directement",
                    "üí° Astuce : Vous pouvez ajuster la vitesse de ma voix dans les param√®tres",
                    "üí° Astuce : Essayez de me demander une blague ou une anecdote int√©ressante",
                    "üí° Astuce : Je peux vous expliquer des concepts scientifiques complexes simplement"
                ];
                
                const randomTip = tips[Math.floor(Math.random() * tips.length)];
                
                // Ne montrer le tip que si la conversation est calme
                if (window.robot.stats.totalMessages < 10 || Math.random() > 0.7) {
                    const tipElement = document.createElement('div');
                    tipElement.className = 'message message-robot';
                    tipElement.style.opacity = '0.7';
                    tipElement.style.fontSize = '14px';
                    tipElement.innerHTML = `
                        <div class="robot-header">
                            <div class="robot-icon">üí°</div>
                            <span>Astuce</span>
                        </div>
                        <div>${randomTip}</div>
                    `;
                    
                    window.robot.elements.chatMessages.appendChild(tipElement);
                    window.robot.elements.chatMessages.scrollTop = window.robot.elements.chatMessages.scrollHeight;
                }
            }, 45000); // Toutes les 45 secondes
        });
    </script>
</body>
</html>