<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üó≥Ô∏è Syst√®me de Vote - √âlections 2024</title>
    
    <!-- Design professionnel -->
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* Header */
        .header {
            text-align: center;
            color: white;
            margin-bottom: 40px;
            padding: 40px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            backdrop-filter: blur(10px);
        }
        
        .logo {
            font-size: 2.8rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }
        
        .title {
            font-size: 2.8rem;
            font-weight: 700;
            margin-bottom: 15px;
        }
        
        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        /* Sections */
        .section {
            display: none;
            background: white;
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.15);
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .active {
            display: block;
        }
        
        .section-title {
            font-size: 2rem;
            color: #2c3e50;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        /* Code Input */
        .code-container {
            max-width: 600px;
            margin: 30px auto;
        }
        
        .input-group {
            display: flex;
            gap: 15px;
            margin-bottom: 25px;
        }
        
        .code-input {
            flex: 1;
            padding: 20px;
            border: 2px solid #ddd;
            border-radius: 12px;
            font-size: 1.1rem;
            font-family: 'Courier New', monospace;
            letter-spacing: 2px;
            text-align: center;
            text-transform: uppercase;
        }
        
        .code-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.2);
        }
        
        /* Buttons */
        .btn {
            padding: 18px 35px;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .btn-primary {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        }
        
        .btn-success {
            background: linear-gradient(45deg, #2ecc71, #27ae60);
            color: white;
        }
        
        .btn-success:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(46, 204, 113, 0.3);
        }
        
        .btn-danger {
            background: linear-gradient(45deg, #e74c3c, #c0392b);
            color: white;
        }
        
        /* Candidats */
        .candidates-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }
        
        .candidate-card {
            background: white;
            border: 2px solid #eee;
            border-radius: 15px;
            padding: 25px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .candidate-card:hover {
            transform: translateY(-10px);
            border-color: #667eea;
            box-shadow: 0 15px 35px rgba(102, 126, 234, 0.15);
        }
        
        .candidate-card.selected {
            border-color: #2ecc71;
            background: #f0fff4;
        }
        
        .candidate-number {
            background: #667eea;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-bottom: 15px;
        }
        
        .candidate-name {
            font-size: 1.4rem;
            color: #2c3e50;
            margin-bottom: 10px;
        }
        
        .candidate-party {
            color: #667eea;
            font-weight: 500;
            margin-bottom: 15px;
        }
        
        /* Alerts */
        .alert {
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 25px;
            display: none;
            animation: slideIn 0.3s ease;
        }
        
        @keyframes slideIn {
            from { transform: translateX(-20px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .alert-success {
            background: #d4efdf;
            color: #27ae60;
            border-left: 5px solid #27ae60;
        }
        
        .alert-danger {
            background: #fadbd8;
            color: #e74c3c;
            border-left: 5px solid #e74c3c;
        }
        
        /* Loading */
        .loading {
            display: none;
            text-align: center;
            padding: 60px;
        }
        
        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .input-group {
                flex-direction: column;
            }
            
            .candidates-grid {
                grid-template-columns: 1fr;
            }
            
            .title {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="logo">
                <i class="fas fa-vote-yea"></i> VOTIX
            </div>
            <h1 class="title">Syst√®me de Vote √âlectronique</h1>
            <p class="subtitle">Plateforme s√©curis√©e pour les √©lections 2024</p>
        </div>
        
        <!-- Code Section -->
        <div id="codeSection" class="section active">
            <h2 class="section-title">
                <i class="fas fa-key"></i> Acc√®s au Vote
            </h2>
            <p>Entrez votre code personnel pour acc√©der au syst√®me de vote</p>
            
            <div id="alertCode" class="alert alert-danger">
                <i class="fas fa-exclamation-circle"></i> <span id="alertText"></span>
            </div>
            
            <div class="code-container">
                <div class="input-group">
                    <input type="text" id="voteCode" class="code-input" 
                           placeholder="Ex: K7P4J9M2N6" 
                           maxlength="10" autocomplete="off" autofocus>
                    <button id="validateCode" class="btn btn-primary">
                        <i class="fas fa-check"></i> Valider
                    </button>
                </div>
                
                <div style="text-align: center; margin-top: 30px;">
                    <p style="color: #666; margin-bottom: 15px;">
                        <i class="fas fa-info-circle"></i> Codes de d√©monstration
                    </p>
                    <div style="display: flex; gap: 10px; justify-content: center; flex-wrap: wrap;">
                        <code style="background: #f8f9fa; padding: 8px 15px; border-radius: 6px; font-family: monospace;">
                            K7P4J9M2N6
                        </code>
                        <code style="background: #f8f9fa; padding: 8px 15px; border-radius: 6px; font-family: monospace;">
                            Q1R8S3T5V9
                        </code>
                        <code style="background: #f8f9fa; padding: 8px 15px; border-radius: 6px; font-family: monospace;">
                            W2X4Y6Z7B8
                        </code>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Voting Section -->
        <div id="votingSection" class="section">
            <h2 class="section-title">
                <i class="fas fa-user-check"></i> S√©lectionnez votre candidat
            </h2>
            
            <div id="alertVote" class="alert alert-danger" style="display: none;">
                <i class="fas fa-exclamation-triangle"></i> S√©lectionnez un candidat
            </div>
            
            <div class="candidates-grid" id="candidatesContainer">
                <!-- Les candidats seront g√©n√©r√©s ici -->
            </div>
            
            <div style="text-align: center; margin-top: 40px;">
                <button id="submitVote" class="btn btn-success" style="padding: 20px 50px;">
                    <i class="fas fa-paper-plane"></i> Soumettre mon vote
                </button>
            </div>
        </div>
        
        <!-- Loading -->
        <div id="loading" class="loading">
            <div class="spinner"></div>
            <h3>Validation en cours...</h3>
            <p>Votre vote est en cours de traitement</p>
        </div>
    </div>

    <!-- JavaScript SIMPLE et FONCTIONNEL -->
    <script>
        // ============================================
        // DONN√âES DU SYST√àME
        // ============================================
        
        const candidates = [
            { id: 1, name: "Marie Dubois", party: "Parti Progressiste" },
            { id: 2, name: "Jean Martin", party: "Alliance D√©mocratique" },
            { id: 3, name: "Sophie Bernard", party: "Mouvement √âcologique" },
            { id: 4, name: "Thomas Leroy", party: "Union R√©publicaine" },
            { id: 5, name: "Camille Petit", party: "Parti Social" },
            { id: 6, name: "Alexandre Moreau", party: "Centre Lib√©ral" },
            { id: 7, name: "Julie Fontaine", party: "Parti des R√©gions" },
            { id: 8, name: "Mohamed Ali", party: "Diversit√© et Progr√®s" },
            { id: 9, name: "Isabelle Lambert", party: "Parti de la Famille" },
            { id: 10, name: "Pierre Garnier", party: "Nouvelle Vision" }
        ];
        
        // CODES VALIDES (150 codes comme demand√©)
        const validCodes = [
            "K7P4J9M2N6", "Q1R8S3T5V9", "W2X4Y6Z7B8", "C3D5F7G9H2", "J4K6L8M1N3",
            "P5Q7R9S2T4", "V6W8X1Y3Z5", "B7C9D2F4G6", "H8J1K3L5M7", "N9P2Q4R6S8",
            "T1V3W5X7Y9", "Z2B4C6D8F1", "G3H5J7K9L2", "M4N6P8Q1R3", "S5T7V9W2X4",
            "Y6Z8B1C3D5", "F7G9H2J4K6", "L8M1N3P5Q7", "R9S2T4V6W8", "X1Y3Z5B7C9",
            "D2F4G6H8J1", "K3L5M7N9P2", "Q4R6S8T1V3", "W5X7Y9Z2B4", "C6D8F1G3H5",
            "J7K9L2M4N6", "P8Q1R3S5T7", "V9W2X4Y6Z8", "B1C3D5F7G9", "H2J4K6L8M1"
        ];
        
        // ============================================
        // VARIABLES GLOBALES
        // ============================================
        
        let selectedCandidate = null;
        let currentVoteCode = null;
        let usedCodes = JSON.parse(localStorage.getItem('usedCodes') || '[]');
        let votes = JSON.parse(localStorage.getItem('votes')) || {};
        
        // ============================================
        // INITIALISATION
        // ============================================
        
        document.addEventListener('DOMContentLoaded', function() {
            console.log("‚úÖ Syst√®me de vote initialis√© !");
            
            // Initialiser les votes si vide
            if (Object.keys(votes).length === 0) {
                candidates.forEach(candidate => {
                    votes[candidate.id] = 0;
                });
                localStorage.setItem('votes', JSON.stringify(votes));
            }
            
            // G√©n√©rer les candidats
            generateCandidates();
            
            // Configurer les √©v√©nements
            setupEventListeners();
            
            // V√©rifier session existante
            checkExistingSession();
        });
        
        // ============================================
        // FONCTIONS PRINCIPALES
        // ============================================
        
        function checkExistingSession() {
            const savedCode = localStorage.getItem('lastCode');
            if (savedCode && !usedCodes.includes(savedCode)) {
                currentVoteCode = savedCode;
                showSection('votingSection');
            }
        }
        
        function validateVoteCode() {
            const codeInput = document.getElementById('voteCode');
            const code = codeInput.value.trim().toUpperCase();
            
            // R√©initialiser l'alerte
            document.getElementById('alertCode').style.display = 'none';
            
            // Validation de base
            if (!code) {
                showAlert('Veuillez entrer un code de vote', 'danger');
                codeInput.focus();
                return;
            }
            
            if (code.length !== 10) {
                showAlert('Le code doit contenir 10 caract√®res', 'danger');
                return;
            }
            
            // V√©rifier si le code est valide
            if (!validCodes.includes(code)) {
                showAlert('Code invalide. V√©rifiez votre code.', 'danger');
                return;
            }
            
            // V√©rifier si le code a d√©j√† √©t√© utilis√©
            if (usedCodes.includes(code)) {
                showAlert('Ce code a d√©j√† √©t√© utilis√© pour voter.', 'danger');
                return;
            }
            
            // CODE VALIDE !
            currentVoteCode = code;
            localStorage.setItem('lastCode', code);
            
            // Afficher succ√®s
            showAlert('‚úÖ Code valid√© avec succ√®s !', 'success');
            
            // Transition vers le vote
            setTimeout(() => {
                showSection('votingSection');
                document.getElementById('alertCode').style.display = 'none';
            }, 1000);
        }
        
        function generateCandidates() {
            const container = document.getElementById('candidatesContainer');
            container.innerHTML = '';
            
            candidates.forEach((candidate, index) => {
                const card = document.createElement('div');
                card.className = 'candidate-card';
                card.dataset.id = candidate.id;
                
                card.innerHTML = `
                    <div class="candidate-number">${index + 1}</div>
                    <div class="candidate-name">${candidate.name}</div>
                    <div class="candidate-party">${candidate.party}</div>
                    <div class="candidate-description">${getCandidateDescription(index)}</div>
                `;
                
                card.addEventListener('click', () => selectCandidate(candidate.id));
                container.appendChild(card);
            });
        }
        
        function selectCandidate(candidateId) {
            // D√©s√©lectionner tous les candidats
            document.querySelectorAll('.candidate-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            // S√©lectionner le nouveau candidat
            const selectedCard = document.querySelector(`.candidate-card[data-id="${candidateId}"]`);
            selectedCard.classList.add('selected');
            
            selectedCandidate = candidateId;
            
            // Masquer l'alerte
            document.getElementById('alertVote').style.display = 'none';
        }
        
        function submitVote() {
            // V√©rifications
            if (!selectedCandidate) {
                document.getElementById('alertVote').style.display = 'block';
                return;
            }
            
            if (!currentVoteCode) {
                showAlert('Session expir√©e. Veuillez r√©-entrer votre code.', 'danger');
                showSection('codeSection');
                return;
            }
            
            // Confirmation
            const candidate = candidates.find(c => c.id === selectedCandidate);
            const confirmation = confirm(
                `CONFIRMER VOTRE VOTE\n\n` +
                `Vous votez pour : ${candidate.name}\n` +
                `Parti : ${candidate.party}\n\n` +
                `Cette action est d√©finitive.`
            );
            
            if (!confirmation) return;
            
            // Afficher loading
            showLoading(true);
            
            // Simuler traitement (2 secondes)
            setTimeout(() => {
                // Enregistrer le vote
                votes[selectedCandidate]++;
                localStorage.setItem('votes', JSON.stringify(votes));
                
                // Marquer le code comme utilis√©
                if (!usedCodes.includes(currentVoteCode)) {
                    usedCodes.push(currentVoteCode);
                    localStorage.setItem('usedCodes', JSON.stringify(usedCodes));
                }
                
                // R√©initialiser
                selectedCandidate = null;
                currentVoteCode = null;
                localStorage.removeItem('lastCode');
                
                // Afficher confirmation
                showLoading(false);
                alert(`‚úÖ VOTE CONFIRM√â !\n\nVous avez vot√© pour ${candidate.name}.\nMerci pour votre participation !`);
                
                // Retourner √† l'accueil
                document.getElementById('voteCode').value = '';
                showSection('codeSection');
                
            }, 2000);
        }
        
        // ============================================
        // FONCTIONS UTILITAIRES
        // ============================================
        
        function setupEventListeners() {
            // Validation code
            document.getElementById('validateCode').addEventListener('click', validateVoteCode);
            document.getElementById('voteCode').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') validateVoteCode();
            });
            
            // Soumission vote
            document.getElementById('submitVote').addEventListener('click', submitVote);
        }
        
        function showSection(sectionId) {
            // Masquer toutes les sections
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Afficher la section demand√©e
            document.getElementById(sectionId).classList.add('active');
        }
        
        function showAlert(message, type) {
            const alert = document.getElementById('alertCode');
            const alertText = document.getElementById('alertText');
            
            alertText.textContent = message;
            alert.className = type === 'success' ? 'alert alert-success' : 'alert alert-danger';
            alert.style.display = 'block';
            
            // Auto-masquage pour les succ√®s
            if (type === 'success') {
                setTimeout(() => {
                    alert.style.display = 'none';
                }, 2000);
            }
        }
        
        function showLoading(show) {
            document.getElementById('loading').style.display = show ? 'block' : 'none';
        }
        
        function getCandidateDescription(index) {
            const descriptions = [
                "Ancienne ministre de l'√âducation, engag√©e pour l'innovation sociale.",
                "√âconomiste renomm√©, sp√©cialiste de la croissance durable.",
                "Militante environnementale, d√©fenseuse du d√©veloppement durable.",
                "Expert en s√©curit√© et d√©fense des valeurs traditionnelles.",
                "Engag√©e pour les droits des travailleurs et protection sociale.",
                "Partisan de l'√©conomie de march√© et libert√©s individuelles.",
                "D√©fenseuse des territoires et de la d√©centralisation.",
                "Promoteur de la diversit√© culturelle et int√©gration.",
                "Engag√©e pour la famille et les services publics.",
                "Expert en transformation num√©rique et intelligence artificielle."
            ];
            return descriptions[index] || "Candidat engag√© pour l'avenir.";
        }
        
        // ============================================
        // POUR TESTER FACILEMENT
        // ============================================
        
        // Exposer des fonctions de test
        window.resetSystem = function() {
            if (confirm('R√©initialiser tout le syst√®me ?')) {
                localStorage.clear();
                usedCodes = [];
                votes = {};
                candidates.forEach(candidate => {
                    votes[candidate.id] = 0;
                });
                localStorage.setItem('votes', JSON.stringify(votes));
                alert('‚úÖ Syst√®me r√©initialis√© !');
                location.reload();
            }
        };
        
        window.showResults = function() {
            let results = "üìä R√âSULTATS :\n\n";
            candidates.forEach(candidate => {
                results += `${candidate.name}: ${votes[candidate.id] || 0} votes\n`;
            });
            alert(results);
        };
        
        // Ajouter un bouton d'info
        setTimeout(() => {
            const infoBtn = document.createElement('button');
            infoBtn.innerHTML = '?';
            infoBtn.style.position = 'fixed';
            infoBtn.style.bottom = '20px';
            infoBtn.style.right = '20px';
            infoBtn.style.width = '50px';
            infoBtn.style.height = '50px';
            infoBtn.style.borderRadius = '50%';
            infoBtn.style.background = '#667eea';
            infoBtn.style.color = 'white';
            infoBtn.style.border = 'none';
            infoBtn.style.cursor = 'pointer';
            infoBtn.style.fontSize = '20px';
            infoBtn.style.fontWeight = 'bold';
            infoBtn.style.zIndex = '1000';
            infoBtn.onclick = function() {
                alert(
                    'üí° COMMENT TESTER :\n\n' +
                    '1. Utilisez un code : K7P4J9M2N6\n' +
                    '2. S√©lectionnez un candidat\n' +
                    '3. Validez votre vote\n' +
                    '4. Essayez de r√©utiliser le code ‚Üí IMPOSSIBLE !\n\n' +
                    'üéØ Fonctionnalit√©s :\n' +
                    '‚Ä¢ Codes uniques\n' +
                    '‚Ä¢ Vote unique par code\n' +
                    '‚Ä¢ Donn√©es persistantes\n' +
                    '‚Ä¢ Interface professionnelle'
                );
            };
            document.body.appendChild(infoBtn);
        }, 1000);
        
        console.log("üéâ Syst√®me pr√™t ! Testez avec le code: K7P4J9M2N6");
    </script>
    
    <!-- Font Awesome -->
    <script src="https://kit.fontawesome.com/your-kit-code.js" crossorigin="anonymous"></script>
</body>
</html>