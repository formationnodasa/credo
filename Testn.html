


<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ü§ñ Mini Ya Credo - Robot IA Vocal Complet</title>
    <style>
        /* === STYLES COMPLETS === */
        :root {
            --primary: #4361ee;
            --primary-dark: #3a56d4;
            --secondary: #7209b7;
            --accent: #f72585;
            --success: #4cc9f0;
            --danger: #f94144;
            --light: #f8f9fa;
            --dark: #212529;
            --gray: #6c757d;
            --border: #dee2e6;
            --shadow: 0 4px 6px rgba(0,0,0,0.1);
            --radius: 12px;
            --font: 'Segoe UI', system-ui, sans-serif;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: var(--font);
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            color: var(--dark);
        }
        
        .container {
            width: 100%;
            max-width: 1200px;
            background: white;
            border-radius: var(--radius);
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            height: 95vh;
        }
        
        /* Header */
        .header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .logo-icon {
            width: 60px;
            height: 60px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            color: var(--primary);
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .logo-text h1 {
            font-size: 24px;
            margin-bottom: 5px;
        }
        
        .logo-text p {
            opacity: 0.9;
            font-size: 14px;
        }
        
        .status {
            display: flex;
            align-items: center;
            gap: 10px;
            background: rgba(255,255,255,0.1);
            padding: 8px 15px;
            border-radius: 20px;
        }
        
        .status-dot {
            width: 10px;
            height: 10px;
            background: #4ade80;
            border-radius: 50%;
            animation: blink 2s infinite;
        }
        
        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        /* Main Content */
        .main-content {
            display: flex;
            flex: 1;
            overflow: hidden;
        }
        
        .chat-panel {
            flex: 1;
            display: flex;
            flex-direction: column;
            padding: 20px;
            background: #f8f9fa;
        }
        
        .chat-header {
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--border);
        }
        
        .chat-header h2 {
            color: var(--primary);
            font-size: 20px;
        }
        
        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 10px;
            background: white;
            border-radius: var(--radius);
            margin-bottom: 20px;
            box-shadow: var(--shadow) inset;
        }
        
        .message {
            margin-bottom: 20px;
            animation: fadeIn 0.3s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .message-user {
            background: var(--primary);
            color: white;
            padding: 15px;
            border-radius: 18px 18px 0 18px;
            margin-left: 20%;
            max-width: 80%;
        }
        
        .message-robot {
            background: var(--light);
            padding: 15px;
            border-radius: 18px 18px 18px 0;
            margin-right: 20%;
            max-width: 80%;
            border: 1px solid var(--border);
        }
        
        .message-robot strong {
            color: var(--primary);
            display: block;
            margin-bottom: 5px;
        }
        
        .typing-indicator {
            display: none;
            align-items: center;
            gap: 10px;
            padding: 10px;
            background: var(--light);
            border-radius: var(--radius);
            margin-bottom: 20px;
        }
        
        .typing-dots {
            display: flex;
            gap: 4px;
        }
        
        .typing-dots div {
            width: 8px;
            height: 8px;
            background: var(--primary);
            border-radius: 50%;
            animation: typing 1.4s infinite;
        }
        
        .typing-dots div:nth-child(2) { animation-delay: 0.2s; }
        .typing-dots div:nth-child(3) { animation-delay: 0.4s; }
        
        @keyframes typing {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        /* Input Area */
        .input-area {
            display: flex;
            gap: 10px;
            align-items: flex-end;
        }
        
        .voice-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--accent);
            border: none;
            color: white;
            font-size: 18px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }
        
        .voice-btn:hover {
            background: #e11574;
            transform: scale(1.05);
        }
        
        .voice-btn.listening {
            background: var(--danger);
            animation: pulse 1s infinite;
        }
        
        .input-wrapper {
            flex: 1;
        }
        
        textarea {
            width: 100%;
            min-height: 50px;
            max-height: 150px;
            padding: 15px;
            border: 2px solid var(--border);
            border-radius: var(--radius);
            font-family: inherit;
            font-size: 16px;
            resize: none;
            transition: border 0.3s;
        }
        
        textarea:focus {
            outline: none;
            border-color: var(--primary);
        }
        
        .send-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--primary);
            border: none;
            color: white;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .send-btn:hover {
            background: var(--primary-dark);
            transform: scale(1.05);
        }
        
        /* Side Panel */
        .side-panel {
            width: 300px;
            padding: 20px;
            background: white;
            border-left: 1px solid var(--border);
            overflow-y: auto;
        }
        
        .panel-section {
            margin-bottom: 25px;
        }
        
        .panel-section h3 {
            color: var(--primary);
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border);
            font-size: 18px;
        }
        
        .knowledge-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 20px;
        }
        
        .knowledge-tag {
            background: var(--light);
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            color: var(--gray);
            border: 1px solid var(--border);
        }
        
        .settings-group {
            margin-bottom: 15px;
        }
        
        .settings-group label {
            display: block;
            margin-bottom: 5px;
            font-size: 14px;
            color: var(--gray);
        }
        
        select, input {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid var(--border);
            border-radius: 6px;
            font-family: inherit;
        }
        
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-family: inherit;
            font-weight: 500;
            transition: all 0.3s;
        }
        
        .btn-primary {
            background: var(--primary);
            color: white;
        }
        
        .btn-primary:hover {
            background: var(--primary-dark);
        }
        
        .btn-secondary {
            background: var(--light);
            color: var(--dark);
            border: 1px solid var(--border);
        }
        
        .btn-secondary:hover {
            background: #e9ecef;
        }
        
        /* Footer */
        .footer {
            padding: 15px 20px;
            background: var(--light);
            border-top: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 14px;
            color: var(--gray);
        }
        
        .stats {
            display: flex;
            gap: 20px;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .container {
                height: 100vh;
                border-radius: 0;
            }
            
            .main-content {
                flex-direction: column;
            }
            
            .side-panel {
                width: 100%;
                border-left: none;
                border-top: 1px solid var(--border);
                max-height: 300px;
            }
            
            .message-user, .message-robot {
                margin-left: 0;
                margin-right: 0;
                max-width: 100%;
            }
        }
        
        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: var(--light);
        }
        
        ::-webkit-scrollbar-thumb {
            background: var(--gray);
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary);
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="logo">
                <div class="logo-icon">
                    ü§ñ
                </div>
                <div class="logo-text">
                    <h1>Mini Ya Credo</h1>
                    <p>Robot IA Vocal avec Connaissances Illimit√©es</p>
                </div>
            </div>
            <div class="status">
                <div class="status-dot"></div>
                <span>IA Connect√©e ‚Ä¢ Pr√™t √† parler</span>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Chat Panel -->
            <div class="chat-panel">
                <div class="chat-header">
                    <h2>üí¨ Conversation avec l'IA</h2>
                </div>
                
                <div class="chat-messages" id="chatMessages">
                    <div class="message message-robot">
                        <strong>ü§ñ Mini Ya Credo :</strong>
                        Bonjour ! Je suis **Mini Ya Credo**, votre assistant IA vocal complet. 
                        Je poss√®de des connaissances dans **tous les domaines** : sciences, histoire, 
                        programmation, m√©decine, droit, √©conomie, philosophie, et bien plus encore.
                        
                        <div style="margin-top: 10px; font-size: 14px;">
                            üé§ <strong>Fonctionnalit√©s :</strong>
                            <ul style="margin-top: 5px; padding-left: 20px;">
                                <li>R√©ponses vocales et texte</li>
                                <li>Connexion √† GPT-4 (cl√© API requise)</li>
                                <li>Reconnaissance vocale int√©gr√©e</li>
                                <li>Support multilingue</li>
                                <li>Connaissances illimit√©es</li>
                            </ul>
                        </div>
                        
                        <div style="margin-top: 15px; padding: 10px; background: white; border-radius: 8px; border-left: 4px solid var(--primary);">
                            <strong>‚ö° Pour commencer :</strong>
                            <p style="margin-top: 5px;">1. Cliquez sur le microphone pour parler</p>
                            <p>2. Ou tapez votre question ci-dessous</p>
                            <p>3. Configurez votre cl√© API OpenAI pour d√©bloquer toutes les fonctionnalit√©s</p>
                        </div>
                    </div>
                </div>
                
                <!-- Typing Indicator -->
                <div class="typing-indicator" id="typingIndicator">
                    <div class="typing-dots">
                        <div></div>
                        <div></div>
                        <div></div>
                    </div>
                    <span>Mini Ya Credo r√©fl√©chit...</span>
                </div>
                
                <!-- Input Area -->
                <div class="input-area">
                    <button class="voice-btn" id="voiceBtn" title="Parler">
                        üé§
                    </button>
                    
                    <div class="input-wrapper">
                        <textarea 
                            id="userInput" 
                            placeholder="Posez votre question ici... (Entr√©e pour envoyer, Shift+Entr√©e pour nouvelle ligne)"
                            rows="1"></textarea>
                    </div>
                    
                    <button class="send-btn" id="sendBtn" title="Envoyer">
                        ‚úàÔ∏è
                    </button>
                </div>
            </div>
            
            <!-- Side Panel -->
            <div class="side-panel">
                <!-- Configuration IA -->
                <div class="panel-section">
                    <h3>‚öôÔ∏è Configuration IA</h3>
                    <div class="settings-group">
                        <label for="aiModel">Mod√®le d'IA :</label>
                        <select id="aiModel">
                            <option value="gpt-4">GPT-4 (Recommand√©)</option>
                            <option value="gpt-3.5-turbo">GPT-3.5 Turbo</option>
                        </select>
                    </div>
                    
                    <div class="settings-group">
                        <label for="apiKey">Cl√© API OpenAI :</label>
                        <input type="password" id="apiKey" placeholder="sk-...">
                    </div>
                    
                    <button class="btn btn-primary" id="saveConfig" style="width: 100%; margin-top: 10px;">
                        üíæ Sauvegarder
                    </button>
                </div>
                
                <!-- Configuration Vocale -->
                <div class="panel-section">
                    <h3>üé§ Configuration Vocale</h3>
                    <div class="settings-group">
                        <label for="voice">Voix :</label>
                        <select id="voice">
                            <option value="fr-FR">Fran√ßais (Homme)</option>
                            <option value="fr-CA">Fran√ßais (Femme)</option>
                            <option value="en-US">Anglais</option>
                        </select>
                    </div>
                    
                    <div class="settings-group">
                        <label for="voiceSpeed">Vitesse : <span id="speedValue">1.0x</span></label>
                        <input type="range" id="voiceSpeed" min="0.5" max="2" step="0.1" value="1">
                    </div>
                    
                    <div class="settings-group">
                        <label>
                            <input type="checkbox" id="autoVoice" checked> R√©ponses vocales automatiques
                        </label>
                    </div>
                </div>
                
                <!-- Connaissances -->
                <div class="panel-section">
                    <h3>üìö Domaines de Connaissance</h3>
                    <div class="knowledge-tags">
                        <span class="knowledge-tag">üß™ Sciences</span>
                        <span class="knowledge-tag">üíª Tech</span>
                        <span class="knowledge-tag">üìú Histoire</span>
                        <span class="knowledge-tag">‚öñÔ∏è Droit</span>
                        <span class="knowledge-tag">üí∞ √âconomie</span>
                        <span class="knowledge-tag">üè• M√©decine</span>
                        <span class="knowledge-tag">üß† Psycho</span>
                        <span class="knowledge-tag">üé® Arts</span>
                        <span class="knowledge-tag">üìà Maths</span>
                        <span class="knowledge-tag">üåç G√©ographie</span>
                        <span class="knowledge-tag">üî¨ Recherche</span>
                    </div>
                </div>
                
                <!-- Quick Actions -->
                <div class="panel-section">
                    <h3>‚ö° Actions Rapides</h3>
                    <div style="display: flex; flex-direction: column; gap: 10px;">
                        <button class="btn btn-secondary" id="quickScience">
                            üß¨ Question scientifique
                        </button>
                        <button class="btn btn-secondary" id="quickCode">
                            üíª Aide programmation
                        </button>
                        <button class="btn btn-secondary" id="quickExplain">
                            üìñ Expliquer simplement
                        </button>
                        <button class="btn btn-secondary" id="quickTranslate">
                            üåç Traduire un texte
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Footer -->
        <div class="footer">
            <div>
                ü§ñ <strong>Mini Ya Credo v1.0</strong> ‚Ä¢ Robot IA Vocal Complet
            </div>
            <div class="stats">
                <span>üß† Connaissances : <span id="knowledgeCount">Illimit√©es</span></span>
                <span>üí¨ Messages : <span id="messageCount">1</span></span>
            </div>
        </div>
    </div>

    <!-- JavaScript Complet -->
    <script>
        // ===== MINI YA CREDO - ROBOT IA VOCAL COMPLET =====
        
        class MiniYaCredo {
            constructor() {
                this.initialize();
                this.loadConfig();
                this.setupEventListeners();
                this.setupSpeech();
                this.messageCount = 1;
            }
            
            initialize() {
                // R√©cup√©rer les √©l√©ments
                this.elements = {
                    chatMessages: document.getElementById('chatMessages'),
                    userInput: document.getElementById('userInput'),
                    sendBtn: document.getElementById('sendBtn'),
                    voiceBtn: document.getElementById('voiceBtn'),
                    typingIndicator: document.getElementById('typingIndicator'),
                    apiKey: document.getElementById('apiKey'),
                    aiModel: document.getElementById('aiModel'),
                    voiceSpeed: document.getElementById('voiceSpeed'),
                    speedValue: document.getElementById('speedValue'),
                    messageCount: document.getElementById('messageCount'),
                    saveConfig: document.getElementById('saveConfig'),
                    quickScience: document.getElementById('quickScience'),
                    quickCode: document.getElementById('quickCode'),
                    quickExplain: document.getElementById('quickExplain'),
                    quickTranslate: document.getElementById('quickTranslate')
                };
                
                // Configuration par d√©faut
                this.config = {
                    apiKey: '',
                    aiModel: 'gpt-4',
                    voiceEnabled: true,
                    voiceSpeed: 1,
                    knowledgeContext: `Tu es Mini Ya Credo, un assistant IA vocal avec des connaissances compl√®tes dans tous les domaines.
                    
                    DOMAINES DE CONNAISSANCES :
                    - Sciences (physique, chimie, biologie, astronomie)
                    - Technologies (IA, programmation, web, mobile)
                    - M√©decine (anatomie, physiologie, pathologies g√©n√©rales)
                    - Droit (droit fran√ßais, europ√©en, international)
                    - √âconomie (macro, micro, finance, commerce)
                    - Histoire (mondiale, fran√ßaise, √©v√©nements majeurs)
                    - G√©ographie (pays, capitales, drapeaux, cultures)
                    - Arts (peinture, musique, litt√©rature, cin√©ma)
                    - Philosophie (courants, philosophes, concepts)
                    - Langues (traduction, grammaire, vocabulaire)
                    - Math√©matiques (alg√®bre, g√©om√©trie, calcul, statistiques)
                    
                    TON R√îLE :
                    1. R√©pondre de mani√®re pr√©cise et p√©dagogique
                    2. Adapter la complexit√© au niveau de l'utilisateur
                    3. Fournir des explications claires et structur√©es
                    4. Citer tes sources quand c'est pertinent
                    5. Proposer des analogies pour faciliter la compr√©hension
                    6. √ätre bienveillant et encourageant
                    
                    FORMAT DES R√âPONSES :
                    - Commence par un titre clair
                    - Utilise des sections si n√©cessaire
                    - Ajoute des exemples concrets
                    - Termine par un r√©sum√© si la r√©ponse est longue
                    - Propose des ressources pour aller plus loin
                    
                    R√àGLES IMPORTANTES :
                    - Ne donne jamais de conseils m√©dicaux personnalis√©s
                    - N'encourage pas les activit√©s ill√©gales
                    - Respecte la confidentialit√©
                    - Mentionne tes limitations si n√©cessaire`
                };
                
                this.isListening = false;
                this.conversationHistory = [];
            }
            
            loadConfig() {
                const saved = localStorage.getItem('miniYaCredoConfig');
                if (saved) {
                    this.config = { ...this.config, ...JSON.parse(saved) };
                    this.elements.apiKey.value = this.config.apiKey;
                    this.elements.aiModel.value = this.config.aiModel;
                    this.elements.voiceSpeed.value = this.config.voiceSpeed;
                    this.elements.speedValue.textContent = `${this.config.voiceSpeed}x`;
                }
            }
            
            saveConfig() {
                this.config.apiKey = this.elements.apiKey.value;
                this.config.aiModel = this.elements.aiModel.value;
                this.config.voiceSpeed = parseFloat(this.elements.voiceSpeed.value);
                localStorage.setItem('miniYaCredoConfig', JSON.stringify(this.config));
                this.showMessage('Configuration sauvegard√©e !', 'success');
            }
            
            setupEventListeners() {
                // Envoyer message
                this.elements.sendBtn.addEventListener('click', () => this.sendMessage());
                this.elements.userInput.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' && !e.shiftKey) {
                        e.preventDefault();
                        this.sendMessage();
                    }
                });
                
                // Reconnaissance vocale
                this.elements.voiceBtn.addEventListener('click', () => this.toggleVoiceInput());
                
                // Configuration
                this.elements.saveConfig.addEventListener('click', () => this.saveConfig());
                this.elements.voiceSpeed.addEventListener('input', (e) => {
                    this.elements.speedValue.textContent = `${e.target.value}x`;
                });
                
                // Actions rapides
                this.elements.quickScience.addEventListener('click', () => {
                    this.elements.userInput.value = "Explique la th√©orie de la relativit√© d'Einstein de mani√®re simple";
                    this.sendMessage();
                });
                
                this.elements.quickCode.addEventListener('click', () => {
                    this.elements.userInput.value = "√âcris une fonction Python qui calcule les nombres premiers";
                    this.sendMessage();
                });
                
                this.elements.quickExplain.addEventListener('click', () => {
                    this.elements.userInput.value = "Explique le changement climatique comme si j'avais 10 ans";
                    this.sendMessage();
                });
                
                this.elements.quickTranslate.addEventListener('click', () => {
                    this.elements.userInput.value = "Traduis 'Bonjour, comment allez-vous ?' en anglais, espagnol et allemand";
                    this.sendMessage();
                });
                
                // Auto-resize textarea
                this.elements.userInput.addEventListener('input', function() {
                    this.style.height = 'auto';
                    this.style.height = Math.min(this.scrollHeight, 150) + 'px';
                });
            }
            
            setupSpeech() {
                // Reconnaissance vocale
                if ('webkitSpeechRecognition' in window) {
                    this.recognition = new webkitSpeechRecognition();
                    this.recognition.continuous = false;
                    this.recognition.interimResults = false;
                    this.recognition.lang = 'fr-FR';
                    
                    this.recognition.onstart = () => {
                        this.isListening = true;
                        this.elements.voiceBtn.classList.add('listening');
                        this.elements.voiceBtn.textContent = 'üî¥';
                        this.showMessage('üé§ √âcoute en cours...', 'info');
                    };
                    
                    this.recognition.onresult = (event) => {
                        const transcript = event.results[0][0].transcript;
                        this.elements.userInput.value = transcript;
                        this.elements.voiceBtn.classList.remove('listening');
                        this.elements.voiceBtn.textContent = 'üé§';
                        this.sendMessage();
                    };
                    
                    this.recognition.onerror = () => {
                        this.isListening = false;
                        this.elements.voiceBtn.classList.remove('listening');
                        this.elements.voiceBtn.textContent = 'üé§';
                        this.showMessage('Erreur de reconnaissance vocale', 'error');
                    };
                    
                    this.recognition.onend = () => {
                        this.isListening = false;
                        this.elements.voiceBtn.classList.remove('listening');
                        this.elements.voiceBtn.textContent = 'üé§';
                    };
                } else {
                    this.elements.voiceBtn.style.display = 'none';
                    this.showMessage('La reconnaissance vocale n\'est pas support√©e', 'warning');
                }
                
                // Synth√®se vocale
                this.synthesis = window.speechSynthesis;
            }
            
            toggleVoiceInput() {
                if (!this.recognition) {
                    this.showMessage('Reconnaissance vocale non disponible', 'error');
                    return;
                }
                
                if (this.isListening) {
                    this.recognition.stop();
                } else {
                    this.recognition.start();
                }
            }
            
            async sendMessage() {
                const message = this.elements.userInput.value.trim();
                if (!message) return;
                
                // Ajouter le message utilisateur
                this.addMessage(message, 'user');
                this.elements.userInput.value = '';
                this.elements.userInput.style.height = 'auto';
                this.messageCount++;
                this.elements.messageCount.textContent = this.messageCount;
                
                // Afficher l'indicateur de frappe
                this.showTyping(true);
                
                try {
                    // Obtenir la r√©ponse
                    const response = await this.getAIResponse(message);
                    
                    // Masquer l'indicateur
                    this.showTyping(false);
                    
                    // Ajouter la r√©ponse
                    this.addMessage(response, 'robot');
                    
                    // Parler la r√©ponse
                    if (this.config.voiceEnabled) {
                        this.speak(response);
                    }
                    
                } catch (error) {
                    this.showTyping(false);
                    console.error('Erreur:', error);
                    this.addMessage(
                        "Je suis d√©sol√©, une erreur est survenue. V√©rifiez votre connexion Internet et votre cl√© API OpenAI.",
                        'robot'
                    );
                }
            }
            
            async getAIResponse(message) {
                // Si pas de cl√© API, utiliser des r√©ponses pr√©d√©finies
                if (!this.config.apiKey) {
                    return this.getFallbackResponse(message);
                }
                
                // Pr√©parer les messages pour l'API
                const messages = [
                    {
                        role: "system",
                        content: this.config.knowledgeContext
                    },
                    ...this.conversationHistory.slice(-6),
                    {
                        role: "user",
                        content: message
                    }
                ];
                
                try {
                    const response = await fetch('https://api.openai.com/v1/chat/completions', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': `Bearer ${this.config.apiKey}`
                        },
                        body: JSON.stringify({
                            model: this.config.aiModel,
                            messages: messages,
                            max_tokens: 1500,
                            temperature: 0.7
                        })
                    });
                    
                    if (!response.ok) {
                        const error = await response.json();
                        throw new Error(error.error?.message || 'Erreur API');
                    }
                    
                    const data = await response.json();
                    const answer = data.choices[0].message.content.trim();
                    
                    // Mettre √† jour l'historique
                    this.conversationHistory.push(
                        { role: "user", content: message },
                        { role: "assistant", content: answer }
                    );
                    
                    // Limiter l'historique
                    if (this.conversationHistory.length > 20) {
                        this.conversationHistory = this.conversationHistory.slice(-20);
                    }
                    
                    return answer;
                    
                } catch (error) {
                    console.error('API Error:', error);
                    throw error;
                }
            }
            
            getFallbackResponse(message) {
                const lowerMessage = message.toLowerCase();
                
                // R√©ponses pr√©d√©finies pour d√©monstration
                const responses = {
                    science: "La th√©orie de la relativit√©, d√©velopp√©e par Einstein, explique comment le temps et l'espace sont li√©s. En version simple : plus on va vite, plus le temps ralentit ! Pour des explications compl√®tes, configurez votre cl√© API OpenAI.",
                    code: "Voici une fonction Python simple pour les nombres premiers :\n```python\ndef est_premier(n):\n    if n < 2:\n        return False\n    for i in range(2, int(n**0.5)+1):\n        if n % i == 0:\n            return False\n    return True\n```\nPour plus d'aide en programmation, connectez-vous √† l'IA compl√®te !",
                    bonjour: "Bonjour ! Je suis Mini Ya Credo, votre assistant IA. Pour d√©bloquer toutes mes connaissances, veuillez entrer votre cl√© API OpenAI dans les param√®tres.",
                    aide: "Je peux vous aider dans tous les domaines : sciences, technologie, m√©decine, droit, etc. Pour des r√©ponses pr√©cises et compl√®tes, configurez votre connexion √† l'IA.",
                    default: `Merci pour votre question : "${message}". Je suis Mini Ya Credo, un assistant IA avec des connaissances illimit√©es. Pour des r√©ponses d√©taill√©es et pr√©cises, veuillez configurer votre cl√© API OpenAI (gratuite jusqu'√† 5$ de cr√©dit).`
                };
                
                if (lowerMessage.includes('relativit√©') || lowerMessage.includes('einstein')) {
                    return responses.science;
                } else if (lowerMessage.includes('python') || lowerMessage.includes('code') || lowerMessage.includes('programmation')) {
                    return responses.code;
                } else if (lowerMessage.includes('bonjour') || lowerMessage.includes('salut') || lowerMessage.includes('hello')) {
                    return responses.bonjour;
                } else if (lowerMessage.includes('aide') || lowerMessage.includes('help')) {
                    return responses.aide;
                }
                
                return responses.default;
            }
            
            addMessage(content, sender) {
                const messageDiv = document.createElement('div');
                messageDiv.className = `message message-${sender}`;
                
                if (sender === 'user') {
                    messageDiv.innerHTML = `
                        <div style="display: flex; justify-content: flex-end; margin-bottom: 5px;">
                            <span style="font-size: 12px; color: var(--gray);">Vous</span>
                        </div>
                        <div>${content}</div>
                    `;
                } else {
                    messageDiv.innerHTML = `
                        <strong>ü§ñ Mini Ya Credo :</strong>
                        <div style="margin-top: 8px;">${this.formatMessage(content)}</div>
                    `;
                }
                
                this.elements.chatMessages.appendChild(messageDiv);
                this.elements.chatMessages.scrollTop = this.elements.chatMessages.scrollHeight;
            }
            
            formatMessage(text) {
                // Formater le texte (liens, code, etc.)
                let formatted = text
                    .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
                    .replace(/\*(.*?)\*/g, '<em>$1</em>')
                    .replace(/`(.*?)`/g, '<code>$1</code>')
                    .replace(/\n/g, '<br>');
                
                // Ajouter des couleurs pour les titres
                formatted = formatted.replace(/^(#+)\s*(.*?)$/gm, (match, hashes, title) => {
                    const level = hashes.length;
                    const color = level === 1 ? 'var(--primary)' : level === 2 ? 'var(--secondary)' : 'var(--dark)';
                    return `<div style="color: ${color}; font-weight: bold; margin: 10px 0 5px 0; font-size: ${level === 1 ? '1.2em' : '1em'}">${title}</div>`;
                });
                
                return formatted;
            }
            
            showTyping(show) {
                this.elements.typingIndicator.style.display = show ? 'flex' : 'none';
                if (show) {
                    this.elements.chatMessages.scrollTop = this.elements.chatMessages.scrollHeight;
                }
            }
            
            speak(text) {
                if (!this.synthesis || !this.config.voiceEnabled) return;
                
                // Arr√™ter toute parole en cours
                this.synthesis.cancel();
                
                // Extraire le texte √† parler (sans code)
                const cleanText = text.replace(/```[\s\S]*?```/g, '')
                                     .replace(/`.*?`/g, '')
                                     .replace(/#{1,6}\s/g, '')
                                     .substring(0, 1000); // Limiter la longueur
                
                const utterance = new SpeechSynthesisUtterance(cleanText);
                utterance.lang = 'fr-FR';
                utterance.rate = this.config.voiceSpeed;
                utterance.volume = 1;
                utterance.pitch = 1;
                
                this.synthesis.speak(utterance);
            }
            
            showMessage(text, type = 'info') {
                // Cr√©er une notification temporaire
                const notification = document.createElement('div');
                notification.textContent = text;
                notification.style.cssText = `
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    padding: 12px 20px;
                    background: ${type === 'error' ? 'var(--danger)' : type === 'success' ? 'var(--success)' : 'var(--primary)'};
                    color: white;
                    border-radius: var(--radius);
                    z-index: 1000;
                    animation: fadeIn 0.3s, fadeOut 0.3s 2.7s;
                    box-shadow: var(--shadow);
                `;
                
                document.body.appendChild(notification);
                
                setTimeout(() => {
                    notification.remove();
                }, 3000);
            }
        }
        
        // Initialiser le robot
        document.addEventListener('DOMContentLoaded', () => {
            window.robot = new MiniYaCredo();
            
            // Ajouter un CSS pour les animations de notification
            const style = document.createElement('style');
            style.textContent = `
                @keyframes fadeIn {
                    from { opacity: 0; transform: translateY(-20px); }
                    to { opacity: 1; transform: translateY(0); }
                }
                @keyframes fadeOut {
                    from { opacity: 1; transform: translateY(0); }
                    to { opacity: 0; transform: translateY(-20px); }
                }
            `;
            document.head.appendChild(style);
            
            // Exemple de questions d'accueil
            setTimeout(() => {
                const questions = [
                    "Pour d√©bloquer toutes mes capacit√©s, entrez votre cl√© API OpenAI dans les param√®tres !",
                    "J'ai des connaissances en m√©decine, droit, sciences, technologie, arts... Demandez-moi n'importe quoi !",
                    "Cliquez sur le microphone üé§ pour parler, ou tapez votre question."
                ];
                
                let index = 0;
                setInterval(() => {
                    const tip = document.createElement('div');
                    tip.className = 'message message-robot';
                    tip.style.fontSize = '14px';
                    tip.style.opacity = '0.8';
                    tip.innerHTML = `<em>üí° ${questions[index]}</em>`;
                    
                    window.robot.elements.chatMessages.appendChild(tip);
                    window.robot.elements.chatMessages.scrollTop = window.robot.elements.chatMessages.scrollHeight;
                    
                    index = (index + 1) % questions.length;
                }, 15000);
            }, 5000);
        });
    </script>
</body>
</html>