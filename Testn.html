

<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Quiz Multijoueur - Temps R√©el</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&family=Montserrat:wght@900&display=swap" rel="stylesheet">
    <style>
        /* RESET COMPLET */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --secondary: #f59e0b;
            --success: #10b981;
            --danger: #ef4444;
            --dark: #1f2937;
            --light: #f9fafb;
            --gradient: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            --gradient-hot: linear-gradient(135deg, #f59e0b 0%, #ef4444 100%);
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
            min-height: 100vh;
            color: white;
            overflow-x: hidden;
            padding: 20px;
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* PARTICULES ANIM√âES */
        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }

        .particle {
            position: absolute;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            animation: float 20s infinite linear;
        }

        @keyframes float {
            0% { transform: translateY(100vh) rotate(0deg); }
            100% { transform: translateY(-100px) rotate(360deg); }
        }

        /* CONTAINER PRINCIPAL */
        .container {
            max-width: 500px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border-radius: 30px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            overflow: hidden;
        }

        /* STATUT CONNEXION */
        .connection-status {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.9);
            padding: 10px 20px;
            border-radius: 50px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 600;
            color: var(--dark);
            z-index: 1000;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            animation: slideDown 0.5s ease;
        }

        .status-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--success);
            animation: pulse 2s infinite;
        }

        .status-dot.offline {
            background: var(--danger);
            animation: none;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* √âCRANS */
        .screen {
            display: none;
            padding: 30px;
            min-height: 85vh;
        }

        .screen.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* LOGO ANIM√â */
        .logo {
            text-align: center;
            margin: 30px 0 50px;
            animation: bounce 2s infinite;
        }

        .logo h1 {
            font-family: 'Montserrat', sans-serif;
            font-size: 3.5rem;
            font-weight: 900;
            background: linear-gradient(45deg, #fff, #f59e0b);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
            margin-bottom: 15px;
        }

        .logo .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
            font-weight: 500;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        /* BOUTONS */
        .btn {
            display: block;
            width: 100%;
            padding: 20px;
            border: none;
            border-radius: 20px;
            font-family: 'Poppins', sans-serif;
            font-size: 1.2rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            margin: 15px 0;
            position: relative;
            overflow: hidden;
        }

        .btn-primary {
            background: var(--gradient-hot);
            color: white;
            box-shadow: 0 10px 30px rgba(245, 158, 11, 0.4);
        }

        .btn-primary:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(245, 158, 11, 0.6);
        }

        .btn-primary:active {
            transform: translateY(0);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-3px);
        }

        .btn i {
            margin-right: 10px;
        }

        /* STATS */
        .stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 40px;
        }

        .stat {
            background: rgba(255, 255, 255, 0.15);
            padding: 20px;
            border-radius: 20px;
            text-align: center;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: transform 0.3s ease;
        }

        .stat:hover {
            transform: scale(1.05);
        }

        .stat i {
            font-size: 2rem;
            margin-bottom: 10px;
            color: var(--secondary);
        }

        /* CODE SALLE */
        .room-code {
            background: rgba(255, 255, 255, 0.15);
            padding: 30px;
            border-radius: 25px;
            text-align: center;
            margin: 30px 0;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            animation: pulseGlow 2s infinite;
        }

        @keyframes pulseGlow {
            0%, 100% { box-shadow: 0 0 20px rgba(245, 158, 11, 0.3); }
            50% { box-shadow: 0 0 40px rgba(245, 158, 11, 0.6); }
        }

        .code-label {
            font-size: 1.1rem;
            opacity: 0.9;
            margin-bottom: 15px;
        }

        .code-value {
            font-family: 'Montserrat', sans-serif;
            font-size: 4rem;
            font-weight: 900;
            letter-spacing: 5px;
            color: var(--secondary);
            text-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            margin: 20px 0;
        }

        /* SELECTION QUESTIONS */
        .question-selection {
            background: rgba(255, 255, 255, 0.15);
            padding: 25px;
            border-radius: 25px;
            margin: 25px 0;
            backdrop-filter: blur(10px);
        }

        .question-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            margin: 20px 0;
        }

        .question-btn {
            padding: 15px 5px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            color: white;
            font-weight: 700;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .question-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-3px);
        }

        .question-btn.selected {
            background: var(--gradient);
            border-color: transparent;
            box-shadow: 0 5px 20px rgba(99, 102, 241, 0.4);
            transform: scale(1.05);
        }

        /* LISTE JOUEURS */
        .players-list {
            background: rgba(255, 255, 255, 0.15);
            padding: 25px;
            border-radius: 25px;
            margin: 25px 0;
            backdrop-filter: blur(10px);
        }

        .player {
            display: flex;
            align-items: center;
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            margin: 10px 0;
            transition: all 0.3s ease;
            animation: slideInLeft 0.5s ease;
        }

        .player:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateX(10px);
        }

        .player.host {
            background: linear-gradient(45deg, rgba(245, 158, 11, 0.2), rgba(239, 68, 68, 0.2));
            border-left: 5px solid var(--secondary);
        }

        .player i {
            font-size: 1.5rem;
            margin-right: 15px;
            color: var(--secondary);
        }

        @keyframes slideInLeft {
            from {
                opacity: 0;
                transform: translateX(-30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        /* FORMULAIRES */
        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            font-size: 1.1rem;
        }

        .form-control {
            width: 100%;
            padding: 18px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            color: white;
            font-family: 'Poppins', sans-serif;
            font-size: 1.1rem;
            transition: all 0.3s ease;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--secondary);
            background: rgba(255, 255, 255, 0.15);
            box-shadow: 0 0 0 3px rgba(245, 158, 11, 0.2);
        }

        .form-control::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }

        /* TIMER */
        .timer-container {
            position: relative;
            width: 100px;
            height: 100px;
            margin: 0 auto;
        }

        .timer-svg {
            transform: rotate(-90deg);
            width: 100%;
            height: 100%;
        }

        .timer-circle-bg {
            fill: none;
            stroke: rgba(255, 255, 255, 0.2);
            stroke-width: 8;
        }

        .timer-circle {
            fill: none;
            stroke: var(--secondary);
            stroke-width: 8;
            stroke-linecap: round;
            stroke-dasharray: 283;
            stroke-dashoffset: 283;
            transition: stroke-dashoffset 1s linear;
        }

        .timer-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 2.5rem;
            font-weight: 900;
            color: white;
        }

        /* QUESTION */
        .question-card {
            background: rgba(255, 255, 255, 0.15);
            padding: 30px;
            border-radius: 25px;
            margin: 25px 0;
            backdrop-filter: blur(10px);
            animation: slideUp 0.5s ease;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .question-prefix {
            font-size: 1.3rem;
            color: var(--secondary);
            font-weight: 700;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .question-text {
            font-size: 1.8rem;
            font-weight: 700;
            line-height: 1.4;
            margin-bottom: 20px;
        }

        .question-hint {
            font-size: 1.1rem;
            opacity: 0.9;
            font-style: italic;
            margin-top: 15px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
        }

        /* R√âPONSE */
        .answer-input-container {
            display: flex;
            gap: 15px;
            margin: 25px 0;
        }

        .answer-input {
            flex: 1;
            padding: 18px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            color: white;
            font-family: 'Poppins', sans-serif;
            font-size: 1.2rem;
            font-weight: 600;
        }

        .answer-input:focus {
            outline: none;
            border-color: var(--secondary);
        }

        /* CLASSEMENT */
        .scoreboard {
            background: rgba(255, 255, 255, 0.15);
            padding: 25px;
            border-radius: 25px;
            margin: 25px 0;
            backdrop-filter: blur(10px);
        }

        .score-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            margin: 10px 0;
            transition: all 0.3s ease;
        }

        .score-item.current {
            background: linear-gradient(45deg, rgba(99, 102, 241, 0.3), rgba(139, 92, 246, 0.3));
            border-left: 5px solid var(--primary);
        }

        .score-item.leading {
            background: linear-gradient(45deg, rgba(245, 158, 11, 0.3), rgba(239, 68, 68, 0.3));
        }

        .player-rank {
            font-weight: 900;
            font-size: 1.5rem;
            color: var(--secondary);
            min-width: 40px;
        }

        .player-name {
            flex: 1;
            font-weight: 600;
            font-size: 1.2rem;
        }

        .player-score {
            font-weight: 900;
            font-size: 1.5rem;
            color: var(--secondary);
        }

        /* NOTIFICATIONS */
        .notification {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: rgba(255, 255, 255, 0.95);
            color: var(--dark);
            padding: 20px;
            border-radius: 20px;
            max-width: 300px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            z-index: 1000;
            animation: slideInRight 0.3s ease;
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(100px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        /* RESPONSIVE */
        @media (max-width: 600px) {
            .container {
                max-width: 100%;
                border-radius: 20px;
            }
            
            .screen {
                padding: 20px;
            }
            
            .logo h1 {
                font-size: 2.5rem;
            }
            
            .question-grid {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .code-value {
                font-size: 3rem;
            }
            
            .answer-input-container {
                flex-direction: column;
            }
            
            .btn {
                padding: 18px;
            }
        }

        /* ANIMATIONS SUPPL√âMENTAIRES */
        .animate-float {
            animation: float 6s ease-in-out infinite;
        }

        .animate-pulse {
            animation: pulse 2s infinite;
        }

        .animate-shake {
            animation: shake 0.5s;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }
    </style>
</head>
<body>
    <!-- PARTICULES ANIM√âES -->
    <div class="particles" id="particles"></div>
    
    <!-- STATUT CONNEXION -->
    <div class="connection-status">
        <div class="status-dot" id="statusDot"></div>
        <span id="statusText">En ligne</span>
    </div>

    <!-- CONTAINER PRINCIPAL -->
    <div class="container">
        <!-- √âCRAN D'ACCUEIL -->
        <div id="homeScreen" class="screen active">
            <div class="logo animate-float">
                <h1>üß† QUIZ DUO</h1>
                <p class="subtitle">D√©fie tes amis en temps r√©el !</p>
            </div>
            
            <div class="button-group">
                <button id="createRoomBtn" class="btn btn-primary">
                    <i class="fas fa-plus-circle"></i> Cr√©er une salle
                </button>
                <button id="joinRoomBtn" class="btn btn-secondary">
                    <i class="fas fa-door-open"></i> Rejoindre
                </button>
            </div>

            <div class="stats">
                <div class="stat">
                    <i class="fas fa-users"></i>
                    <div class="stat-value" id="onlineCount">0</div>
                    <div class="stat-label">En ligne</div>
                </div>
                <div class="stat">
                    <i class="fas fa-trophy"></i>
                    <div class="stat-value" id="gamesPlayed">0</div>
                    <div class="stat-label">Parties</div>
                </div>
            </div>
        </div>

        <!-- √âCRAN CR√âATION SALLE -->
        <div id="createScreen" class="screen">
            <div class="header">
                <button class="btn btn-secondary" id="backFromCreate">
                    <i class="fas fa-arrow-left"></i> Retour
                </button>
                <h2 style="text-align: center; margin: 20px 0; font-size: 2rem;">Cr√©er une salle</h2>
            </div>
            
            <div class="room-code">
                <div class="code-label">Code de la salle</div>
                <div class="code-value" id="roomCode">-----</div>
                <button class="btn btn-primary" id="copyCodeBtn">
                    <i class="fas fa-copy"></i> Copier le code
                </button>
            </div>

            <div class="question-selection">
                <h3 style="margin-bottom: 20px; font-size: 1.5rem;">
                    <i class="fas fa-question-circle"></i> Nombre de questions
                </h3>
                <div class="question-grid">
                    <button class="question-btn" data-count="10">10</button>
                    <button class="question-btn" data-count="20">20</button>
                    <button class="question-btn" data-count="30">30</button>
                    <button class="question-btn" data-count="40">40</button>
                    <button class="question-btn" data-count="50">50</button>
                    <button class="question-btn" data-count="60">60</button>
                    <button class="question-btn" data-count="70">70</button>
                    <button class="question-btn" data-count="80">80</button>
                    <button class="question-btn" data-count="90">90</button>
                    <button class="question-btn" data-count="100">100</button>
                </div>
                <div style="text-align: center; margin-top: 20px; font-size: 1.2rem;">
                    S√©lectionn√© : <span id="selectedCount" style="color: var(--secondary); font-weight: 900;">10</span> questions
                </div>
            </div>

            <div class="players-list">
                <h3 style="margin-bottom: 20px; font-size: 1.5rem;">
                    <i class="fas fa-users"></i> Joueurs (1/10)
                </h3>
                <div id="playersList">
                    <div class="player host">
                        <i class="fas fa-crown"></i>
                        <span>Vous (H√¥te)</span>
                    </div>
                </div>
            </div>

            <button id="startGameBtn" class="btn btn-primary" style="margin-top: 30px;">
                <i class="fas fa-play"></i> Lancer la partie
            </button>
        </div>

        <!-- √âCRAN REJOINDRE SALLE -->
        <div id="joinScreen" class="screen">
            <div class="header">
                <button class="btn btn-secondary" id="backFromJoin">
                    <i class="fas fa-arrow-left"></i> Retour
                </button>
                <h2 style="text-align: center; margin: 20px 0; font-size: 2rem;">Rejoindre</h2>
            </div>
            
            <div style="background: rgba(255, 255, 255, 0.15); padding: 30px; border-radius: 25px; margin: 30px 0;">
                <div class="form-group">
                    <label><i class="fas fa-key"></i> Code de la salle</label>
                    <input type="text" class="form-control" id="roomCodeInput" placeholder="Ex: ABC123" maxlength="6" style="text-transform: uppercase;">
                </div>
                
                <div class="form-group">
                    <label><i class="fas fa-user"></i> Ton pseudo</label>
                    <input type="text" class="form-control" id="playerNameInput" placeholder="Entre ton pseudo">
                </div>
                
                <button id="joinRoomConfirmBtn" class="btn btn-primary">
                    <i class="fas fa-sign-in-alt"></i> Rejoindre la salle
                </button>
                
                <div id="joinError" style="color: #ff6b6b; text-align: center; margin-top: 20px; display: none;"></div>
            </div>
        </div>

        <!-- √âCRAN SALLE D'ATTENTE -->
        <div id="waitingScreen" class="screen">
            <div class="header">
                <button class="btn btn-secondary" id="backFromWaiting">
                    <i class="fas fa-arrow-left"></i> Quitter
                </button>
                <h2 style="text-align: center; margin: 20px 0; font-size: 2rem;">Salle d'attente</h2>
            </div>
            
            <div class="room-code" style="margin: 20px 0;">
                <div class="code-label">Code de la salle</div>
                <div class="code-value" id="waitingRoomCode">-----</div>
            </div>

            <div class="players-list">
                <h3 style="margin-bottom: 20px; font-size: 1.5rem;">
                    <i class="fas fa-users"></i> Joueurs (<span id="playerCount">1</span>/10)
                </h3>
                <div id="waitingPlayersList">
                    <!-- Liste des joueurs -->
                </div>
            </div>

            <div id="waitingMessage" style="text-align: center; padding: 40px 20px;">
                <div class="timer-container" style="margin-bottom: 30px;">
                    <svg class="timer-svg">
                        <circle class="timer-circle-bg" cx="50" cy="50" r="45"></circle>
                        <circle class="timer-circle" cx="50" cy="50" r="45"></circle>
                    </svg>
                    <div class="timer-text">?</div>
                </div>
                <p style="font-size: 1.3rem;">En attente du lancement par l'h√¥te...</p>
            </div>

            <div id="hostControls" style="display: none;">
                <div style="text-align: center; margin-bottom: 30px; font-size: 1.2rem;">
                    <i class="fas fa-question-circle"></i>
                    Questions s√©lectionn√©es : <span id="selectedCountWaiting" style="color: var(--secondary); font-weight: 900;">10</span>
                </div>
                <button id="startGameWaitingBtn" class="btn btn-primary">
                    <i class="fas fa-rocket"></i> Lancer la partie !
                </button>
            </div>
        </div>

        <!-- √âCRAN DE JEU -->
        <div id="gameScreen" class="screen">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
                <div style="background: rgba(255, 255, 255, 0.15); padding: 15px 25px; border-radius: 20px;">
                    <div style="font-size: 1.1rem;">Question</div>
                    <div style="font-size: 1.8rem; font-weight: 900;">
                        <span id="currentQuestion">1</span>/<span id="totalQuestions">10</span>
                    </div>
                </div>
                
                <div class="timer-container">
                    <svg class="timer-svg">
                        <circle class="timer-circle-bg" cx="50" cy="50" r="45"></circle>
                        <circle class="timer-circle" id="timerCircle" cx="50" cy="50" r="45"></circle>
                    </svg>
                    <div class="timer-text" id="timer">12</div>
                </div>
                
                <div style="background: rgba(255, 255, 255, 0.15); padding: 15px 25px; border-radius: 20px;">
                    <div style="font-size: 1.1rem;">Score</div>
                    <div style="font-size: 1.8rem; font-weight: 900; color: var(--secondary);" id="playerScore">0</div>
                </div>
            </div>

            <div class="question-card">
                <div class="question-prefix">
                    <i class="fas fa-font"></i>
                    Champ lexical avec "<span id="lexicalPrefix" style="color: var(--secondary);">Im</span>"
                </div>
                
                <div class="question-text" id="questionText">
                    Trouvez un mot qui commence par "Im"
                </div>
                
                <div class="question-hint" id="questionHint">
                    Indice appara√Ætra ici
                </div>
            </div>

            <div class="answer-input-container">
                <input type="text" class="answer-input" id="answerInput" placeholder="√âcris ta r√©ponse ici...">
                <button id="submitAnswerBtn" class="btn btn-primary" style="width: auto; padding: 0 30px;">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>

            <div style="display: flex; gap: 10px; margin: 20px 0; flex-wrap: wrap;">
                <button class="question-btn" onclick="document.getElementById('answerInput').value = 'Im'">Im</button>
                <button class="question-btn" onclick="document.getElementById('answerInput').value = 'Di'">Di</button>
                <button class="question-btn" onclick="document.getElementById('answerInput').value = 'Em'">Em</button>
                <button class="question-btn" onclick="document.getElementById('answerInput').value = 'Pe'">Pe</button>
                <button class="question-btn" onclick="document.getElementById('answerInput').value = 'No'">No</button>
            </div>

            <div class="scoreboard">
                <h3 style="margin-bottom: 20px; font-size: 1.5rem;">
                    <i class="fas fa-chart-line"></i> Classement en direct
                </h3>
                <div id="scoreboard">
                    <!-- Classement dynamique -->
                </div>
            </div>
        </div>

        <!-- √âCRAN R√âSULTATS -->
        <div id="resultsScreen" class="screen">
            <div style="text-align: center; margin-bottom: 40px;">
                <h1 style="font-size: 3rem; color: var(--secondary); margin-bottom: 20px;">
                    <i class="fas fa-trophy"></i>
                </h1>
                <h2 style="font-size: 2.5rem; margin-bottom: 10px;">Fin de la partie !</h2>
                <p style="font-size: 1.2rem; opacity: 0.9;">
                    <span id="totalQuestionsPlayed">10</span> questions ‚Ä¢ 
                    <span id="totalPlayers">2</span> joueurs
                </p>
            </div>

            <div style="background: rgba(255, 255, 255, 0.15); padding: 40px; border-radius: 25px; text-align: center; margin: 30px 0;">
                <div style="font-size: 1.5rem; margin-bottom: 20px;">üèÜ Gagnant üèÜ</div>
                <div style="font-size: 2.5rem; font-weight: 900; color: var(--secondary); margin-bottom: 10px;" id="winnerName">-</div>
                <div style="font-size: 2rem; font-weight: 700;" id="winnerScore">0 points</div>
            </div>

            <div class="scoreboard">
                <h3 style="margin-bottom: 20px; font-size: 1.5rem;">
                    <i class="fas fa-medal"></i> Classement final
                </h3>
                <div id="finalScoreboard">
                    <!-- Classement final -->
                </div>
            </div>

            <div style="margin-top: 40px;">
                <button id="playAgainBtn" class="btn btn-primary" style="margin-bottom: 15px;">
                    <i class="fas fa-redo"></i> Rejouer
                </button>
                <button id="backToHomeBtn" class="btn btn-secondary">
                    <i class="fas fa-home"></i> Retour √† l'accueil
                </button>
            </div>
        </div>
    </div>

    <script>
        // ==================== CONFIGURATION ====================
        const FIREBASE_CONFIG = {
            apiKey: "AIzaSyAUYpCBlPUnnsCyvqrfMmY5uacjHLGVRh0",
            authDomain: "match-a2ac6.firebaseapp.com",
            projectId: "match-a2ac6",
            storageBucket: "match-a2ac6.firebasestorage.app",
            messagingSenderId: "376894292796",
            appId: "1:376894292796:web:1eb138830c92aae8df5439",
            measurementId: "G-2RSRSSFCDZ"
        };

        // ==================== BASE DE DONN√âES DES QUESTIONS ====================
        const QUESTIONS_DB = {
            "Im": [
                {word: "Imb√©cile", hint: "personne stupide ou idiote"},
                {word: "Immacul√©", hint: "parfaitement propre ou pur"},
                {word: "Immat√©riel", hint: "qui n'a pas de corps physique"},
                {word: "Imminent", hint: "qui va se produire tr√®s bient√¥t"},
                {word: "Immobile", hint: "qui ne bouge pas"},
                {word: "Immortel", hint: "qui ne meurt pas ou qui vit √©ternellement"},
                {word: "Immuable", hint: "qui ne change pas"},
                {word: "Immuabilit√©", hint: "√©tat de ce qui ne change pas"},
                {word: "Immunit√©", hint: "protection contre une maladie ou une infection"},
                {word: "Impartial", hint: "qui ne prend pas parti"},
                {word: "Impassible", hint: "qui ne montre pas d'√©motion"},
                {word: "Imp√©ratif", hint: "qui est n√©cessaire ou obligatoire"},
                {word: "Imperturbable", hint: "qui ne se laisse pas perturber"},
                {word: "Impie", hint: "qui manque de respect envers la religion"},
                {word: "Implacable", hint: "qui ne peut pas √™tre apais√© ou arr√™t√©"},
                {word: "Impossible", hint: "qui ne peut pas √™tre r√©alis√© ou accompli"},
                {word: "Improbable", hint: "peu probable, qui a peu de chances de se produire"},
                {word: "Improviste", hint: "sans pr√©paration, de mani√®re impromptue"},
                {word: "Improviser", hint: "cr√©er ou faire quelque chose spontan√©ment"},
                {word: "Imaginer", hint: "cr√©er des images mentales ou des id√©es dans son esprit"},
                {word: "Impressionnant", hint: "qui produit une forte impression"},
                {word: "Impacter", hint: "avoir un effet ou une influence sur quelque chose"},
                {word: "Impair", hint: "qui est impair, qui ne peut pas √™tre divis√© par deux"},
                {word: "Imagination", hint: "capacit√© √† cr√©er des images, des id√©es"},
                {word: "Imiter", hint: "copier ou reproduire le comportement de quelqu'un"},
                {word: "Imitation", hint: "action de copier ou de reproduire quelque chose"},
                {word: "Imbattable", hint: "qui ne peut pas √™tre vaincu, qui est invaincu"},
                {word: "Imbelliqueux", hint: "qui cherche la discorde ou le conflit"},
                {word: "Immigration", hint: "action de s'installer dans un pays √©tranger"}
            ],
            "Di": [
                {word: "Direction", hint: "position ou trajectoire vers laquelle on se d√©place"},
                {word: "Difficult√©", hint: "obstacle ou d√©fi qui rend quelque chose difficile"},
                {word: "Discipline", hint: "ob√©issance √† des r√®gles pour atteindre un objectif"},
                {word: "Dialogue", hint: "conversation entre deux personnes ou plus"},
                {word: "Diversit√©", hint: "vari√©t√© ou diff√©rence dans un groupe"},
                {word: "Diplomatie", hint: "art de n√©gocier et r√©soudre les conflits"},
                {word: "Dictionnaire", hint: "livre qui r√©pertorie les mots et d√©finitions"},
                {word: "Disparition", hint: "fait de ne plus √™tre pr√©sent ou visible"},
                {word: "Dimension", hint: "mesure de la taille ou de l'√©tendue"},
                {word: "Directionnel", hint: "qui se rapporte √† la direction"}
            ],
            "Em": [
                {word: "Emotion", hint: "r√©action affective intense"},
                {word: "Empathie", hint: "capacit√© de comprendre les sentiments des autres"},
                {word: "Emploi", hint: "travail ou occupation r√©mun√©r√©"},
                {word: "Empreinte", hint: "marque laiss√©e par un objet ou une personne"},
                {word: "Emotionnel", hint: "qui est li√© aux √©motions"},
                {word: "Empire", hint: "vaste territoire gouvern√© par un souverain"},
                {word: "Embl√®me", hint: "symbole qui repr√©sente une id√©e ou organisation"},
                {word: "Empoisonnement", hint: "√©tat d'avoir √©t√© intoxiqu√©"},
                {word: "Ermite", hint: "personne qui vit seule, retir√©e du monde"},
                {word: "Emphase", hint: "insistance particuli√®re mise sur quelque chose"}
            ],
            "Pe": [
                {word: "Pens√©e", hint: "activit√© intellectuelle, r√©flexion"},
                {word: "Personne", hint: "√™tre humain, individu"},
                {word: "Peur", hint: "sentiment d'inqui√©tude, d'appr√©hension"},
                {word: "Perdre", hint: "ne plus avoir, cesser de poss√©der"},
                {word: "Penser", hint: "exercer son esprit, r√©fl√©chir"},
                {word: "Peser", hint: "d√©terminer le poids de quelque chose"},
                {word: "P√©n√©trer", hint: "entrer dans, p√©n√©trer √† l'int√©rieur"},
                {word: "Percer", hint: "traverser de part en part"},
                {word: "Perfection", hint: "√©tat de ce qui est parfait"},
                {word: "Pers√©v√©rance", hint: "qualit√© de persister dans ses efforts"}
            ],
            "No": [
                {word: "Nourriture", hint: "substances consomm√©es pour se nourrir"},
                {word: "Nouvelle", hint: "information sur des √©v√©nements r√©cents"},
                {word: "Nostalgie", hint: "sentiment de d√©sir envers le pass√©"},
                {word: "Normalit√©", hint: "√©tat d'√™tre normal ou conforme"},
                {word: "Notori√©t√©", hint: "renomm√©e ou c√©l√©brit√©"},
                {word: "Notre", hint: "qui appartient √† nous"},
                {word: "Nocif", hint: "qui peut causer des dommages"},
                {word: "Novice", hint: "personne inexp√©riment√©e"},
                {word: "Nourrir", hint: "donner de la nourriture"},
                {word: "Nomade", hint: "personne qui se d√©place souvent"}
            ],
            "La": [
                {word: "Langage", hint: "syst√®me de communication"},
                {word: "Labyrinthe", hint: "d√©dale complexe de passages"},
                {word: "Lampe", hint: "appareil pour √©clairer"},
                {word: "Laconique", hint: "qui s'exprime de mani√®re concise"},
                {word: "Larme", hint: "goutte d'eau des yeux"},
                {word: "Lavage", hint: "action de nettoyer"},
                {word: "Laconisme", hint: "discours succinct"},
                {word: "Lancinant", hint: "douleur vive et persistante"},
                {word: "Languissant", hint: "qui manque d'√©nergie"},
                {word: "Largeur", hint: "mesure de la largeur"}
            ],
            "Ch": [
                {word: "Chaleur", hint: "sensation de temp√©rature √©lev√©e"},
                {word: "Chambre", hint: "pi√®ce pour dormir"},
                {word: "Chanson", hint: "composition musicale avec paroles"},
                {word: "Chapeau", hint: "coiffure qui prot√®ge la t√™te"},
                {word: "Charit√©", hint: "action de donner aux n√©cessiteux"},
                {word: "Chat", hint: "animal domestique qui miaule"},
                {word: "Ch√¢teau", hint: "b√¢timent fortifi√©"},
                {word: "Chauffage", hint: "syst√®me pour chauffer"},
                {word: "Chaussure", hint: "accessoire pour le pied"},
                {word: "Chiffre", hint: "symbole num√©rique"}
            ]
        };

        // ==================== √âTAT GLOBAL ====================
        let gameState = {
            playerId: 'player_' + Math.random().toString(36).substr(2, 9),
            playerName: '',
            roomCode: null,
            isHost: false,
            selectedQuestions: 10,
            currentQuestion: 1,
            score: 0,
            connected: true,
            voiceEnabled: true,
            questions: [],
            players: {},
            timerInterval: null,
            timeLeft: 12,
            firebaseInitialized: false
        };

        // ==================== INITIALISATION ====================
        document.addEventListener('DOMContentLoaded', function() {
            initParticles();
            initEventListeners();
            initPageVisibility();
            loadPlayerName();
            
            // Essayer d'initialiser Firebase
            initFirebase();
        });

        // ==================== PARTICULES ====================
        function initParticles() {
            const particlesContainer = document.getElementById('particles');
            for (let i = 0; i < 30; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.width = Math.random() * 10 + 5 + 'px';
                particle.style.height = particle.style.width;
                particle.style.left = Math.random() * 100 + '%';
                particle.style.top = Math.random() * 100 + 'vh';
                particle.style.animationDelay = Math.random() * 5 + 's';
                particle.style.animationDuration = Math.random() * 20 + 10 + 's';
                particlesContainer.appendChild(particle);
            }
        }

        // ==================== √âCOUTEURS D'√âV√âNEMENTS ====================
        function initEventListeners() {
            // Navigation
            document.getElementById('createRoomBtn').addEventListener('click', createRoom);
            document.getElementById('joinRoomBtn').addEventListener('click', showJoinScreen);
            document.getElementById('backFromCreate').addEventListener('click', () => showScreen('homeScreen'));
            document.getElementById('backFromJoin').addEventListener('click', () => showScreen('homeScreen'));
            document.getElementById('backFromWaiting').addEventListener('click', leaveRoom);
            document.getElementById('backToHomeBtn').addEventListener('click', () => showScreen('homeScreen'));
            
            // Cr√©ation salle
            document.getElementById('copyCodeBtn').addEventListener('click', copyRoomCode);
            document.querySelectorAll('.question-btn[data-count]').forEach(btn => {
                btn.addEventListener('click', () => selectQuestionCount(parseInt(btn.dataset.count)));
            });
            document.getElementById('startGameBtn').addEventListener('click', startGame);
            document.getElementById('startGameWaitingBtn').addEventListener('click', startGame);
            
            // Rejoindre salle
            document.getElementById('joinRoomConfirmBtn').addEventListener('click', joinRoom);
            document.getElementById('roomCodeInput').addEventListener('keypress', e => e.key === 'Enter' && joinRoom());
            document.getElementById('playerNameInput').addEventListener('keypress', e => e.key === 'Enter' && joinRoom());
            
            // Jeu
            document.getElementById('submitAnswerBtn').addEventListener('click', submitAnswer);
            document.getElementById('answerInput').addEventListener('keypress', e => e.key === 'Enter' && submitAnswer());
            document.getElementById('playAgainBtn').addEventListener('click', playAgain);
            
            // Initialiser la s√©lection de questions
            selectQuestionCount(10);
        }

        // ==================== VISIBILIT√â PAGE ====================
        function initPageVisibility() {
            document.addEventListener('visibilitychange', () => {
                if (document.hidden) {
                    setTimeout(() => {
                        if (document.hidden) {
                            document.getElementById('statusDot').classList.add('offline');
                            document.getElementById('statusText').textContent = 'Absent';
                        }
                    }, 2000);
                } else {
                    document.getElementById('statusDot').classList.remove('offline');
                    document.getElementById('statusText').textContent = 'En ligne';
                }
            });
        }

        // ==================== NOM JOUEUR ====================
        function loadPlayerName() {
            const savedName = localStorage.getItem('quizPlayerName');
            if (savedName) {
                gameState.playerName = savedName;
                document.getElementById('playerNameInput').value = savedName;
            } else {
                gameState.playerName = 'Joueur_' + Math.floor(Math.random() * 1000);
                document.getElementById('playerNameInput').value = gameState.playerName;
            }
        }

        function savePlayerName(name) {
            gameState.playerName = name;
            localStorage.setItem('quizPlayerName', name);
        }

        // ==================== FIREBASE ====================
        function initFirebase() {
            try {
                if (typeof firebase === 'undefined') {
                    console.warn('Firebase non charg√© - Mode local activ√©');
                    return;
                }
                
                // Initialiser Firebase
                firebase.initializeApp(FIREBASE_CONFIG);
                gameState.firebaseInitialized = true;
                console.log('Firebase initialis√©');
                
            } catch (error) {
                console.warn('Mode hors ligne activ√©:', error);
            }
        }

        // ==================== AFFICHAGE √âCRAN ====================
        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            document.getElementById(screenId).classList.add('active');
        }

        // ==================== CR√âATION SALLE ====================
        function createRoom() {
            // Sauvegarder le nom
            const playerName = document.getElementById('playerNameInput').value.trim() || gameState.playerName;
            savePlayerName(playerName);
            
            // G√©n√©rer un code de salle
            const roomCode = generateRoomCode();
            gameState.roomCode = roomCode;
            gameState.isHost = true;
            gameState.score = 0;
            gameState.currentQuestion = 1;
            
            // Afficher le code
            document.getElementById('roomCode').textContent = roomCode;
            document.getElementById('waitingRoomCode').textContent = roomCode;
            
            // Mettre √† jour la liste des joueurs
            updatePlayerList([
                {id: gameState.playerId, name: playerName, score: 0, isHost: true}
            ], 'playersList');
            
            // Afficher l'√©cran
            showScreen('createScreen');
            
            // Simulation Firebase - Mode local
            if (gameState.firebaseInitialized) {
                // Ici vous ajouteriez la logique Firebase r√©elle
                console.log('Salle cr√©√©e (Firebase):', roomCode);
            }
        }

        function generateRoomCode() {
            const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
            let code = '';
            for (let i = 0; i < 6; i++) {
                code += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            return code;
        }

        function copyRoomCode() {
            const code = document.getElementById('roomCode').textContent;
            navigator.clipboard.writeText(code).then(() => {
                showNotification('Code copi√© !', 'success');
            });
        }

        // ==================== S√âLECTION QUESTIONS ====================
        function selectQuestionCount(count) {
            gameState.selectedQuestions = count;
            document.getElementById('selectedCount').textContent = count;
            document.getElementById('selectedCountWaiting').textContent = count;
            
            // Mettre √† jour les boutons
            document.querySelectorAll('.question-btn[data-count]').forEach(btn => {
                btn.classList.toggle('selected', parseInt(btn.dataset.count) === count);
            });
            
            // Activer le bouton de d√©marrage si assez de joueurs
            document.getElementById('startGameBtn').disabled = false;
        }

        // ==================== REJOINDRE SALLE ====================
        function showJoinScreen() {
            showScreen('joinScreen');
            document.getElementById('roomCodeInput').focus();
        }

        function joinRoom() {
            const roomCode = document.getElementById('roomCodeInput').value.trim().toUpperCase();
            const playerName = document.getElementById('playerNameInput').value.trim();
            
            if (!roomCode || roomCode.length !== 6) {
                showError('Code invalide (6 caract√®res)');
                return;
            }
            
            if (!playerName) {
                showError('Entrez un pseudo');
                return;
            }
            
            savePlayerName(playerName);
            gameState.roomCode = roomCode;
            gameState.isHost = false;
            gameState.score = 0;
            
            // Simulation de v√©rification
            if (roomCode === 'ABCDEF' || Math.random() > 0.3) { // Simuler succ√®s
                showWaitingScreen();
            } else {
                showError('Salle introuvable');
            }
        }

        function showWaitingScreen() {
            document.getElementById('waitingRoomCode').textContent = gameState.roomCode;
            document.getElementById('playerCount').textContent = '2';
            
            // Simuler des joueurs
            updatePlayerList([
                {id: 'host', name: 'H√¥te', score: 0, isHost: true},
                {id: gameState.playerId, name: gameState.playerName, score: 0, isHost: false}
            ], 'waitingPlayersList');
            
            // Cacher les contr√¥les h√¥te
            document.getElementById('hostControls').style.display = 'none';
            document.getElementById('waitingMessage').style.display = 'block';
            
            showScreen('waitingScreen');
            
            // Simuler un compte √† rebours
            let countdown = 5;
            const timerCircle = document.querySelector('#waitingScreen .timer-circle');
            const timerText = document.querySelector('#waitingScreen .timer-text');
            
            const interval = setInterval(() => {
                countdown--;
                timerText.textContent = countdown;
                timerCircle.style.strokeDashoffset = (283 * (5 - countdown) / 5) + 'px';
                
                if (countdown <= 0) {
                    clearInterval(interval);
                    // Simuler le d√©but de la partie
                    simulateGameStart();
                }
            }, 1000);
        }

        // ==================== SIMULATION D√âBUT PARTIE ====================
        function simulateGameStart() {
            // G√©n√©rer des questions
            const questions = generateQuestions(gameState.selectedQuestions);
            gameState.questions = questions;
            
            // Initialiser l'√©cran de jeu
            document.getElementById('totalQuestions').textContent = gameState.selectedQuestions;
            document.getElementById('playerScore').textContent = '0';
            
            // Simuler des joueurs
            const players = [
                {id: 'host', name: 'H√¥te', score: 0, isHost: true},
                {id: gameState.playerId, name: gameState.playerName, score: 0, isHost: false},
                {id: 'player3', name: 'Joueur3', score: 20, isHost: false},
                {id: 'player4', name: 'Joueur4', score: 10, isHost: false}
            ];
            
            updateScoreboard(players);
            
            // Charger la premi√®re question
            loadQuestion(1);
            
            // Afficher l'√©cran de jeu
            showScreen('gameScreen');
        }

        // ==================== G√âN√âRATION QUESTIONS ====================
        function generateQuestions(count) {
            const questions = [];
            const prefixes = Object.keys(QUESTIONS_DB);
            
            for (let i = 0; i < count; i++) {
                const prefix = prefixes[Math.floor(Math.random() * prefixes.length)];
                const prefixQuestions = QUESTIONS_DB[prefix];
                const randomQuestion = prefixQuestions[Math.floor(Math.random() * prefixQuestions.length)];
                
                questions.push({
                    number: i + 1,
                    prefix: prefix,
                    word: randomQuestion.word,
                    hint: randomQuestion.hint
                });
            }
            
            return questions;
        }

        // ==================== CHARGEMENT QUESTION ====================
        function loadQuestion(questionNumber) {
            const question = gameState.questions[questionNumber - 1];
            if (!question) return;
            
            gameState.currentQuestion = questionNumber;
            gameState.timeLeft = 12;
            
            // Mettre √† jour l'affichage
            document.getElementById('currentQuestion').textContent = questionNumber;
            document.getElementById('lexicalPrefix').textContent = question.prefix;
            document.getElementById('questionText').textContent = `Trouvez un mot qui commence par "${question.prefix}"`;
            document.getElementById('questionHint').textContent = question.hint;
            document.getElementById('answerInput').value = '';
            document.getElementById('timer').textContent = '12';
            
            // R√©initialiser le timer
            const timerCircle = document.getElementById('timerCircle');
            timerCircle.style.strokeDashoffset = '283';
            timerCircle.style.transition = 'stroke-dashoffset 12s linear';
            
            // Lancer le timer
            startTimer();
            
            // Annoncer vocalement
            if (gameState.voiceEnabled && 'speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(
                    `Champ lexical avec ${question.prefix}. Trouvez un mot qui commence par ${question.prefix}`
                );
                utterance.lang = 'fr-FR';
                speechSynthesis.speak(utterance);
            }
        }

        function startTimer() {
            clearInterval(gameState.timerInterval);
            
            const timerCircle = document.getElementById('timerCircle');
            timerCircle.style.strokeDashoffset = '0';
            
            gameState.timerInterval = setInterval(() => {
                gameState.timeLeft--;
                document.getElementById('timer').textContent = gameState.timeLeft;
                
                if (gameState.timeLeft <= 0) {
                    clearInterval(gameState.timerInterval);
                    handleTimeUp();
                }
            }, 1000);
        }

        function handleTimeUp() {
            if (gameState.currentQuestion < gameState.selectedQuestions) {
                loadQuestion(gameState.currentQuestion + 1);
            } else {
                endGame();
            }
        }

        // ==================== SOUMISSION R√âPONSE ====================
        function submitAnswer() {
            const answer = document.getElementById('answerInput').value.trim();
            const currentQuestion = gameState.questions[gameState.currentQuestion - 1];
            
            if (!answer) return;
            
            // V√©rifier si la r√©ponse commence par le bon pr√©fixe
            const isCorrect = answer.toLowerCase().startsWith(currentQuestion.prefix.toLowerCase());
            
            if (isCorrect) {
                // Bonne r√©ponse
                gameState.score += 10;
                document.getElementById('playerScore').textContent = gameState.score;
                
                // Mettre √† jour le classement
                updateScoreboard([
                    {id: 'host', name: 'H√¥te', score: Math.floor(Math.random() * 100), isHost: true},
                    {id: gameState.playerId, name: gameState.playerName, score: gameState.score, isHost: false},
                    {id: 'player3', name: 'Joueur3', score: Math.floor(Math.random() * 80), isHost: false}
                ]);
                
                // Notification
                showNotification('Bonne r√©ponse ! +10 points', 'success');
                
                // Passer √† la question suivante
                setTimeout(() => {
                    if (gameState.currentQuestion < gameState.selectedQuestions) {
                        loadQuestion(gameState.currentQuestion + 1);
                    } else {
                        endGame();
                    }
                }, 1500);
                
            } else {
                // Mauvaise r√©ponse
                showNotification('Mauvaise r√©ponse', 'error');
                document.getElementById('answerInput').classList.add('animate-shake');
                setTimeout(() => {
                    document.getElementById('answerInput').classList.remove('animate-shake');
                }, 500);
            }
            
            document.getElementById('answerInput').value = '';
        }

        // ==================== CLASSEMENT ====================
        function updateScoreboard(players) {
            const scoreboard = document.getElementById('scoreboard');
            if (!scoreboard) return;
            
            // Trier par score
            players.sort((a, b) => b.score - a.score);
            
            scoreboard.innerHTML = '';
            
            players.forEach((player, index) => {
                const item = document.createElement('div');
                item.className = 'score-item';
                if (player.id === gameState.playerId) item.classList.add('current');
                if (index === 0) item.classList.add('leading');
                
                item.innerHTML = `
                    <div class="player-rank">${index + 1}</div>
                    <div class="player-name">${player.name} ${player.isHost ? 'üëë' : ''}</div>
                    <div class="player-score">${player.score}</div>
                `;
                
                scoreboard.appendChild(item);
            });
        }

        // ==================== FIN DE PARTIE ====================
        function endGame() {
            clearInterval(gameState.timerInterval);
            
            // Simuler des r√©sultats
            const players = [
                {name: gameState.playerName, score: gameState.score},
                {name: 'H√¥te', score: Math.floor(Math.random() * 120)},
                {name: 'Joueur3', score: Math.floor(Math.random() * 90)},
                {name: 'Joueur4', score: Math.floor(Math.random() * 70)}
            ];
            
            players.sort((a, b) => b.score - a.score);
            
            // Afficher le gagnant
            const winner = players[0];
            document.getElementById('winnerName').textContent = winner.name;
            document.getElementById('winnerScore').textContent = winner.score + ' points';
            document.getElementById('totalQuestionsPlayed').textContent = gameState.selectedQuestions;
            document.getElementById('totalPlayers').textContent = players.length;
            
            // Afficher le classement final
            const finalScoreboard = document.getElementById('finalScoreboard');
            finalScoreboard.innerHTML = '';
            
            players.forEach((player, index) => {
                const item = document.createElement('div');
                item.className = 'score-item';
                if (index === 0) item.classList.add('leading');
                if (player.name === gameState.playerName) item.classList.add('current');
                
                item.innerHTML = `
                    <div class="player-rank">${index + 1}</div>
                    <div class="player-name">${player.name}</div>
                    <div class="player-score">${player.score}</div>
                `;
                
                finalScoreboard.appendChild(item);
            });
            
            showScreen('resultsScreen');
        }

        // ==================== REJOUER ====================
        function playAgain() {
            if (gameState.isHost) {
                showScreen('createScreen');
            } else {
                showScreen('homeScreen');
            }
        }

        // ==================== QUITTER SALLE ====================
        function leaveRoom() {
            gameState.roomCode = null;
            gameState.isHost = false;
            showScreen('homeScreen');
        }

        // ==================== NOTIFICATIONS ====================
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = 'notification';
            notification.style.background = type === 'success' 
                ? 'linear-gradient(135deg, #10b981, #059669)' 
                : type === 'error'
                ? 'linear-gradient(135deg, #ef4444, #dc2626)'
                : 'linear-gradient(135deg, #6366f1, #4f46e5)';
            
            notification.innerHTML = `
                <div style="font-weight: 700; margin-bottom: 5px;">
                    ${type === 'success' ? '‚úÖ' : type === 'error' ? '‚ùå' : '‚ÑπÔ∏è'}
                    ${message}
                </div>
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.opacity = '0';
                notification.style.transform = 'translateX(100px)';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }

        function showError(message) {
            const errorDiv = document.getElementById('joinError');
            errorDiv.textContent = message;
            errorDiv.style.display = 'block';
            setTimeout(() => errorDiv.style.display = 'none', 3000);
        }

        // ==================== LISTE JOUEURS ====================
        function updatePlayerList(players, containerId) {
            const container = document.getElementById(containerId);
            if (!container) return;
            
            container.innerHTML = '';
            
            players.forEach(player => {
                const div = document.createElement('div');
                div.className = 'player';
                if (player.isHost) div.classList.add('host');
                
                div.innerHTML = `
                    <i class="fas ${player.isHost ? 'fa-crown' : 'fa-user'}"></i>
                    <span>${player.name}</span>
                `;
                
                container.appendChild(div);
            });
        }

        // ==================== D√âMARRER JEU ====================
        function startGame() {
            if (gameState.isHost) {
                // G√©n√©rer les questions
                const questions = generateQuestions(gameState.selectedQuestions);
                gameState.questions = questions;
                gameState.score = 0;
                gameState.currentQuestion = 1;
                
                // Initialiser l'√©cran
                document.getElementById('totalQuestions').textContent = gameState.selectedQuestions;
                document.getElementById('playerScore').textContent = '0';
                
                // Simuler des joueurs
                const players = [
                    {id: gameState.playerId, name: gameState.playerName, score: 0, isHost: true},
                    {id: 'player2', name: 'Adversaire', score: 0, isHost: false}
                ];
                
                updateScoreboard(players);
                
                // Charger la premi√®re question
                loadQuestion(1);
                
                // Afficher l'√©cran de jeu
                showScreen('gameScreen');
            }
        }

        // ==================== INITIALISER STATS ====================
        function updateStats() {
            // Simuler des statistiques
            document.getElementById('onlineCount').textContent = Math.floor(Math.random() * 100) + 50;
            document.getElementById('gamesPlayed').textContent = Math.floor(Math.random() * 1000) + 500;
        }

        // Mettre √† jour les stats p√©riodiquement
        setInterval(updateStats, 5000);
        updateStats();
    </script>
</body>
</html>


