

<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Excellentia Academia : √âloquence en Sc√®ne</title>
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-firestore-compat.js"></script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Montserrat:wght@300;400;500;600&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary: #8B4513;
            --primary-dark: #654321;
            --secondary: #D4AF37;
            --accent: #228B22;
            --light: #F5F5DC;
            --dark: #2C1810;
            --text: #333333;
            --success: #28a745;
            --error: #dc3545;
            --warning: #ffc107;
            --info: #17a2b8;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        html {
            scroll-behavior: smooth;
        }
        
        body {
            font-family: 'Montserrat', sans-serif;
            background: linear-gradient(135deg, #f5f5dc 0%, #fff8dc 100%);
            color: var(--text);
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
            line-height: 1.6;
        }
        
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><path d="M50,0 Q100,50 50,100 Q0,50 50,0" fill="%238B4513" opacity="0.03"/></svg>');
            z-index: -1;
            pointer-events: none;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* Header Styles */
        .header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            padding: 40px 20px;
            border-radius: 0 0 30px 30px;
            box-shadow: 0 10px 40px rgba(139, 69, 19, 0.3);
            text-align: center;
            position: relative;
            overflow: hidden;
            margin-bottom: 40px;
        }
        
        .header::before {
            content: 'üé§';
            position: absolute;
            font-size: 200px;
            opacity: 0.1;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            animation: float 20s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translate(-50%, -50%) rotate(0deg); }
            33% { transform: translate(-48%, -52%) rotate(120deg); }
            66% { transform: translate(-52%, -48%) rotate(240deg); }
        }
        
        .logo-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .logo {
            background: white;
            width: 80px;
            height: 80px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            flex-shrink: 0;
        }
        
        .logo i {
            font-size: 40px;
            color: var(--primary);
        }
        
        .header h1 {
            font-family: 'Playfair Display', serif;
            font-size: clamp(2.5rem, 5vw, 3.5rem);
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            letter-spacing: 1px;
            line-height: 1.2;
        }
        
        .header h2 {
            font-size: clamp(1.2rem, 3vw, 1.8rem);
            font-weight: 300;
            opacity: 0.9;
            margin-bottom: 30px;
        }
        
        .event-info {
            display: flex;
            justify-content: center;
            gap: 40px;
            flex-wrap: wrap;
            margin-top: 30px;
        }
        
        .info-item {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: clamp(0.9rem, 2vw, 1.1rem);
            white-space: nowrap;
        }
        
        .info-item i {
            color: var(--secondary);
        }
        
        /* Timer Section */
        .timer-section {
            background: white;
            margin: 40px 0;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            text-align: center;
            border: 2px solid var(--secondary);
            position: relative;
            overflow: hidden;
        }
        
        .timer-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, var(--primary), var(--secondary), var(--accent));
        }
        
        .timer-title {
            color: var(--primary);
            font-size: clamp(1.2rem, 3vw, 1.5rem);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .timer {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .time-unit {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            min-width: 100px;
            flex: 1;
            max-width: 150px;
            box-shadow: 0 5px 15px rgba(139, 69, 19, 0.3);
            transition: transform 0.3s ease;
        }
        
        .time-unit:hover {
            transform: translateY(-5px);
        }
        
        .time-value {
            font-size: clamp(2rem, 5vw, 3rem);
            font-weight: bold;
            font-family: 'Courier New', monospace;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        
        .time-label {
            font-size: 0.9em;
            opacity: 0.9;
            margin-top: 5px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        /* Voting Cards */
        .voting-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }
        
        .card {
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            height: 100%;
        }
        
        .card:hover {
            transform: translateY(-10px);
            box-shadow: 0 25px 50px rgba(0,0,0,0.15);
        }
        
        .card-header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            padding: 25px;
            display: flex;
            align-items: center;
            gap: 15px;
            position: relative;
            overflow: hidden;
        }
        
        .card-header::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.1) 50%, transparent 70%);
            animation: shine 3s infinite;
        }
        
        @keyframes shine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        .card-header i {
            font-size: 1.8em;
            z-index: 1;
        }
        
        .card-header h3 {
            font-size: clamp(1.2rem, 2vw, 1.5rem);
            font-weight: 600;
            z-index: 1;
        }
        
        .card-content {
            padding: 30px;
        }
        
        /* Code Input Section */
        .code-input-group {
            position: relative;
            margin-bottom: 25px;
        }
        
        .code-input-group label {
            display: block;
            margin-bottom: 10px;
            color: var(--primary);
            font-weight: 600;
            font-size: 1.1em;
        }
        
        .code-input-wrapper {
            position: relative;
        }
        
        .code-input {
            width: 100%;
            padding: 20px 60px 20px 20px;
            font-size: 1.2em;
            border: 3px solid #e2e8f0;
            border-radius: 15px;
            transition: all 0.3s;
            letter-spacing: 2px;
            font-weight: 600;
            background: #f8f9fa;
        }
        
        .code-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(139, 69, 19, 0.1);
            background: white;
        }
        
        .code-input::placeholder {
            color: #adb5bd;
            letter-spacing: normal;
        }
        
        .code-input-icon {
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--primary);
            font-size: 1.5em;
            transition: transform 0.3s;
        }
        
        .code-input:focus + .code-input-icon {
            transform: translateY(-50%) scale(1.2);
        }
        
        /* Button Styles */
        .btn {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            border: none;
            padding: 18px 40px;
            border-radius: 15px;
            font-size: 1.2em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.7s;
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(139, 69, 19, 0.3);
        }
        
        .btn:hover::before {
            left: 100%;
        }
        
        .btn:active {
            transform: translateY(-1px);
        }
        
        .btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
            opacity: 0.6;
        }
        
        .btn:disabled:hover::before {
            left: -100%;
        }
        
        /* Candidates Section */
        .candidates-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
            margin: 30px 0;
        }
        
        .candidate-card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 25px rgba(0,0,0,0.08);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            border: 3px solid transparent;
            position: relative;
        }
        
        .candidate-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: var(--secondary);
            transform: scaleX(0);
            transition: transform 0.3s;
            transform-origin: left;
        }
        
        .candidate-card:hover::before {
            transform: scaleX(1);
        }
        
        .candidate-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
        }
        
        .candidate-card.selected {
            border-color: var(--accent);
            background: linear-gradient(135deg, #f8fff8 0%, #f0fff0 100%);
            transform: translateY(-5px);
        }
        
        .candidate-card.selected::before {
            transform: scaleX(1);
            background: var(--accent);
        }
        
        .candidate-header {
            background: linear-gradient(135deg, #f8f4e6 0%, #f0e8d6 100%);
            padding: 20px;
            text-align: center;
            position: relative;
        }
        
        .candidate-number {
            position: absolute;
            top: 15px;
            left: 15px;
            background: var(--secondary);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2em;
            box-shadow: 0 3px 10px rgba(212, 175, 55, 0.3);
        }
        
        .candidate-avatar {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            margin: 0 auto 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 2.5em;
            border: 5px solid white;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: transform 0.3s;
        }
        
        .candidate-card:hover .candidate-avatar {
            transform: scale(1.1);
        }
        
        .candidate-name {
            font-size: 1.4em;
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 5px;
        }
        
        .candidate-theme {
            color: var(--accent);
            font-style: italic;
            font-size: 0.9em;
            margin-bottom: 10px;
        }
        
        .candidate-body {
            padding: 20px;
        }
        
        .candidate-quote {
            font-style: italic;
            color: #666;
            text-align: center;
            margin-bottom: 15px;
            padding: 15px;
            border-left: 4px solid var(--secondary);
            background: #f9f9f9;
            border-radius: 0 10px 10px 0;
            position: relative;
        }
        
        .candidate-quote::before {
            content: '"';
            font-size: 3em;
            color: var(--secondary);
            position: absolute;
            top: -15px;
            left: 10px;
            opacity: 0.3;
            font-family: serif;
        }
        
        /* Live Results Section */
        .live-results-section {
            background: white;
            margin: 40px 0;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            animation: fadeIn 0.5s ease;
            display: none;
        }
        
        .live-results-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 20px;
        }
        
        .live-results-title {
            color: var(--primary);
            font-size: clamp(1.5rem, 3vw, 1.8rem);
            display: flex;
            align-items: center;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .personal-vote-info {
            background: linear-gradient(135deg, #f0f8ff 0%, #e6f2ff 100%);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 25px;
            border-left: 5px solid var(--primary);
            animation: slideIn 0.3s ease;
            display: none;
        }
        
        .personal-vote-content {
            display: flex;
            align-items: center;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .personal-vote-icon {
            font-size: 2em;
            color: var(--primary);
            flex-shrink: 0;
        }
        
        .personal-vote-text h4 {
            color: var(--primary);
            margin-bottom: 5px;
            font-size: 1.2em;
        }
        
        .personal-vote-text p {
            color: #666;
            font-size: 0.9em;
        }
        
        .live-results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .live-result-item {
            background: linear-gradient(135deg, #f8f4e6 0%, #f0e8d6 100%);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .live-result-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.2) 50%, transparent 70%);
            transform: translateX(-100%);
        }
        
        .live-result-item:hover::before {
            animation: shine 1.5s;
        }
        
        .live-result-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        
        .live-result-name {
            font-size: 1.2em;
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 10px;
        }
        
        .live-result-votes {
            font-size: clamp(2rem, 4vw, 2.5rem);
            font-weight: bold;
            color: var(--primary-dark);
            margin: 10px 0;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .live-result-percentage {
            font-size: 1.1em;
            color: var(--accent);
            font-weight: 600;
            margin-bottom: 15px;
        }
        
        .live-result-bar {
            height: 8px;
            background: #e0e0e0;
            border-radius: 4px;
            margin: 15px 0;
            overflow: hidden;
            position: relative;
        }
        
        .live-result-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary) 0%, var(--secondary) 100%);
            border-radius: 4px;
            transition: width 1s cubic-bezier(0.34, 1.56, 0.64, 1);
            position: relative;
        }
        
        .live-result-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            animation: shimmer 2s infinite;
        }
        
        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        .results-disclaimer {
            text-align: center;
            padding: 20px;
            background: linear-gradient(135deg, #fff8dc 0%, #ffe4b5 100%);
            border-radius: 15px;
            border: 2px dashed var(--secondary);
            margin-top: 20px;
        }
        
        .results-disclaimer p {
            color: var(--primary-dark);
            font-style: italic;
            margin: 0;
        }
        
        /* Results Section */
        .results-section {
            background: white;
            margin: 40px 0;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            animation: fadeIn 0.5s ease;
            display: none;
        }
        
        .results-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 20px;
        }
        
        .results-title {
            color: var(--primary);
            font-size: clamp(1.8rem, 3vw, 2rem);
            display: flex;
            align-items: center;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .result-item {
            background: linear-gradient(135deg, #f8f4e6 0%, #f0e8d6 100%);
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            position: relative;
            overflow: hidden;
            transition: transform 0.3s ease;
        }
        
        .result-item:hover {
            transform: translateY(-5px);
        }
        
        .result-item.winner {
            background: linear-gradient(135deg, #fff8dc 0%, #ffe4b5 100%);
            border: 3px solid var(--secondary);
            transform: scale(1.05);
            animation: pulse 2s infinite;
        }
        
        .result-rank {
            position: absolute;
            top: 10px;
            right: 10px;
            background: var(--primary);
            color: white;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            box-shadow: 0 3px 10px rgba(139, 69, 19, 0.3);
        }
        
        .result-name {
            font-size: 1.3em;
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 10px;
        }
        
        .result-votes {
            font-size: clamp(2.5rem, 4vw, 3rem);
            font-weight: bold;
            color: var(--primary-dark);
            margin: 10px 0;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .result-percentage {
            font-size: 1.2em;
            color: var(--accent);
            font-weight: 600;
            margin-bottom: 15px;
        }
        
        .result-bar {
            height: 10px;
            background: #e0e0e0;
            border-radius: 5px;
            margin: 15px 0;
            overflow: hidden;
            position: relative;
        }
        
        .result-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary) 0%, var(--secondary) 100%);
            border-radius: 5px;
            transition: width 1s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        
        /* Podium Styles */
        .podium-container {
            display: flex;
            justify-content: center;
            align-items: flex-end;
            gap: 20px;
            margin: 40px 0;
            height: 300px;
            position: relative;
        }
        
        .podium-place {
            text-align: center;
            color: white;
            position: relative;
            border-radius: 15px 15px 0 0;
            padding: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            transition: transform 0.3s ease;
        }
        
        .podium-place:hover {
            transform: translateY(-10px);
        }
        
        .first-place {
            background: linear-gradient(135deg, var(--secondary) 0%, #DAA520 100%);
            width: 220px;
            height: 250px;
            order: 2;
            z-index: 3;
        }
        
        .second-place {
            background: linear-gradient(135deg, #C0C0C0 0%, #A0A0A0 100%);
            width: 180px;
            height: 200px;
            order: 1;
            z-index: 2;
        }
        
        .third-place {
            background: linear-gradient(135deg, #CD7F32 0%, #B5651D 100%);
            width: 160px;
            height: 150px;
            order: 3;
            z-index: 1;
        }
        
        /* Ranking Table */
        .ranking-table {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            margin-top: 40px;
            overflow-x: auto;
        }
        
        .ranking-table table {
            width: 100%;
            border-collapse: collapse;
            min-width: 600px;
        }
        
        .ranking-table th {
            padding: 15px;
            text-align: left;
            border-bottom: 2px solid var(--secondary);
            background: linear-gradient(135deg, #f8f4e6 0%, #f0e8d6 100%);
            font-weight: 600;
            color: var(--primary);
        }
        
        .ranking-table td {
            padding: 15px;
            border-bottom: 1px solid #eee;
            transition: background-color 0.3s;
        }
        
        .ranking-table tr:nth-child(even) {
            background: #f9f9f9;
        }
        
        .ranking-table tr:hover {
            background: #f0f0f0;
        }
        
        /* Alerts */
        .alert {
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            display: none;
            animation: slideIn 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .alert::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 5px;
            height: 100%;
        }
        
        .alert.success {
            background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%);
            color: #155724;
            border: 2px solid #c3e6cb;
        }
        
        .alert.success::before {
            background: var(--success);
        }
        
        .alert.error {
            background: linear-gradient(135deg, #f8d7da 0%, #f5c6cb 100%);
            color: #721c24;
            border: 2px solid #f5c6cb;
        }
        
        .alert.error::before {
            background: var(--error);
        }
        
        .alert.warning {
            background: linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%);
            color: #856404;
            border: 2px solid #ffeaa7;
        }
        
        .alert.warning::before {
            background: var(--warning);
        }
        
        /* Footer */
        .footer {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            padding: 40px 20px;
            border-radius: 30px 30px 0 0;
            text-align: center;
            margin-top: 60px;
            position: relative;
        }
        
        .footer::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, var(--secondary), var(--accent), var(--secondary));
        }
        
        .footer-logo {
            font-family: 'Playfair Display', serif;
            font-size: clamp(1.8rem, 3vw, 2rem);
            margin-bottom: 20px;
            font-weight: 700;
        }
        
        .footer-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 40px;
            margin: 30px 0;
            text-align: left;
        }
        
        .footer-section h4 {
            color: var(--secondary);
            margin-bottom: 15px;
            font-size: 1.2em;
            font-weight: 600;
        }
        
        .footer-section p {
            margin-bottom: 10px;
            opacity: 0.9;
        }
        
        .social-icons {
            display: flex;
            gap: 15px;
            justify-content: flex-start;
            margin-top: 10px;
        }
        
        .social-icons i {
            font-size: 1.5em;
            transition: transform 0.3s, color 0.3s;
            cursor: pointer;
        }
        
        .social-icons i:hover {
            transform: translateY(-3px);
            color: var(--secondary);
        }
        
        .copyright {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid rgba(255,255,255,0.1);
            opacity: 0.8;
            font-size: 0.9em;
        }
        
        /* Loading Animation */
        .loading {
            text-align: center;
            padding: 30px;
            display: none;
        }
        
        .spinner {
            width: 50px;
            height: 50px;
            border: 5px solid #f3f3f3;
            border-top: 5px solid var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        
        /* Confetti */
        .confetti {
            position: fixed;
            width: 15px;
            height: 15px;
            background: var(--secondary);
            top: 0;
            opacity: 0;
            z-index: 1000;
            pointer-events: none;
        }
        
        /* Progress Bar */
        .progress-bar {
            width: 100%;
            height: 6px;
            background: #e0e0e0;
            border-radius: 3px;
            overflow: hidden;
            margin: 20px 0;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            transition: width 1s ease-in-out;
        }
        
        /* Animations */
        @keyframes slideIn {
            from { 
                opacity: 0; 
                transform: translateY(-20px); 
            }
            to { 
                opacity: 1; 
                transform: translateY(0); 
            }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; }
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        @keyframes pulse {
            0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(212, 175, 55, 0.7); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); box-shadow: 0 0 0 10px rgba(212, 175, 55, 0); }
        }
        
        /* Utility Classes */
        .hidden {
            display: none !important;
        }
        
        .visible {
            display: block !important;
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease;
        }
        
        .fade-out {
            animation: fadeOut 0.5s ease;
        }
        
        .text-center {
            text-align: center;
        }
        
        .mt-20 { margin-top: 20px; }
        .mt-30 { margin-top: 30px; }
        .mt-40 { margin-top: 40px; }
        .mb-20 { margin-bottom: 20px; }
        .mb-30 { margin-bottom: 30px; }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .header {
                padding: 30px 15px;
                border-radius: 0 0 20px 20px;
            }
            
            .header::before {
                font-size: 100px;
            }
            
            .timer {
                gap: 10px;
            }
            
            .time-unit {
                min-width: 70px;
                padding: 15px;
                max-width: none;
            }
            
            .time-value {
                font-size: 1.8rem;
            }
            
            .voting-container {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .card-content {
                padding: 20px;
            }
            
            .candidates-grid {
                grid-template-columns: 1fr;
            }
            
            .live-results-section,
            .results-section {
                padding: 20px;
                margin: 20px 0;
            }
            
            .podium-container {
                flex-direction: column;
                align-items: center;
                height: auto;
                gap: 10px;
            }
            
            .podium-place {
                width: 80% !important;
                height: auto !important;
                margin-bottom: 10px;
                border-radius: 10px;
                padding: 15px;
            }
            
            .first-place,
            .second-place,
            .third-place {
                width: 100%;
                height: auto;
                min-height: 120px;
            }
            
            .ranking-table {
                padding: 15px;
            }
            
            .ranking-table table {
                min-width: 100%;
            }
            
            .footer-info {
                grid-template-columns: 1fr;
                gap: 30px;
                text-align: center;
            }
            
            .social-icons {
                justify-content: center;
            }
        }
        
        @media (max-width: 480px) {
            .event-info {
                flex-direction: column;
                gap: 15px;
            }
            
            .info-item {
                justify-content: center;
            }
            
            .timer-title,
            .live-results-title,
            .results-title {
                flex-direction: column;
                text-align: center;
            }
            
            .btn {
                width: 100%;
            }
            
            .live-results-header,
            .results-header {
                flex-direction: column;
                align-items: stretch;
            }
            
            .personal-vote-content {
                flex-direction: column;
                text-align: center;
            }
        }
        
        /* Print Styles */
        @media print {
            .header,
            .footer,
            .btn,
            .alert,
            .confetti {
                display: none !important;
            }
            
            body {
                background: white;
                color: black;
            }
            
            .container {
                max-width: 100%;
                padding: 0;
            }
            
            .timer-section,
            .card,
            .live-results-section,
            .results-section {
                box-shadow: none;
                border: 1px solid #ddd;
                page-break-inside: avoid;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header" role="banner">
        <div class="container">
            <div class="logo-container">
                <div class="logo" aria-hidden="true">
                    <i class="fas fa-graduation-cap"></i>
                </div>
                <div>
                    <h1>Excellentia Academia</h1>
                    <h2>√âloquence en Sc√®ne</h2>
                </div>
            </div>
            
            <div class="event-info">
                <div class="info-item">
                    <i class="fas fa-calendar-alt" aria-hidden="true"></i>
                    <span>1er Janvier 2026</span>
                </div>
                <div class="info-item">
                    <i class="fas fa-clock" aria-hidden="true"></i>
                    <span>Fin du vote: 23:59</span>
                </div>
                <div class="info-item">
                    <i class="fas fa-trophy" aria-hidden="true"></i>
                    <span>Concours d'√âloquence</span>
                </div>
            </div>
        </div>
    </header>

    <main class="container">
        <!-- Timer -->
        <section class="timer-section" aria-labelledby="timer-title">
            <h2 class="timer-title" id="timer-title">
                <i class="fas fa-hourglass-half" aria-hidden="true"></i>
                <span>TEMPS RESTANT POUR VOTER</span>
            </h2>
            <div class="timer" role="timer" aria-live="polite">
                <div class="time-unit">
                    <div class="time-value" id="days">00</div>
                    <div class="time-label">JOURS</div>
                </div>
                <div class="time-unit">
                    <div class="time-value" id="hours">00</div>
                    <div class="time-label">HEURES</div>
                </div>
                <div class="time-unit">
                    <div class="time-value" id="minutes">00</div>
                    <div class="time-label">MINUTES</div>
                </div>
                <div class="time-unit">
                    <div class="time-value" id="seconds">00</div>
                    <div class="time-label">SECONDES</div>
                </div>
            </div>
        </section>

        <!-- Voting Interface -->
        <div class="voting-container">
            <!-- Code Input Card -->
            <section class="card" id="codeSection" aria-labelledby="code-section-title">
                <div class="card-header">
                    <i class="fas fa-key" aria-hidden="true"></i>
                    <h3 id="code-section-title">ACC√àS AU VOTE</h3>
                </div>
                <div class="card-content">
                    <div class="code-input-group">
                        <label for="codeInput">
                            <i class="fas fa-ticket-alt" aria-hidden="true"></i>
                            VOTRE CODE DE VOTE
                        </label>
                        <div class="code-input-wrapper">
                            <input type="text" 
                                   id="codeInput" 
                                   class="code-input" 
                                   placeholder="EX: VOTE2026-7A9B3C"
                                   maxlength="20"
                                   aria-describedby="codeHelp"
                                   style="text-transform: uppercase;">
                            <div class="code-input-icon">
                                <i class="fas fa-unlock" aria-hidden="true"></i>
                            </div>
                        </div>
                        <p id="codeHelp" style="margin-top: 10px; color: #666; font-size: 0.9em;">
                            <i class="fas fa-info-circle" aria-hidden="true"></i>
                            Code unique fourni par l'organisation
                        </p>
                    </div>
                    
                    <div class="alert" id="codeAlert" role="alert" aria-live="assertive"></div>
                    
                    <button class="btn" id="verifyCodeBtn" aria-label="Valider le code de vote">
                        <i class="fas fa-check-circle" aria-hidden="true"></i>
                        VALIDER LE CODE
                    </button>
                </div>
            </section>

            <!-- Voting Card -->
            <section class="card hidden" id="voteSection" aria-labelledby="vote-section-title">
                <div class="card-header">
                    <i class="fas fa-vote-yea" aria-hidden="true"></i>
                    <h3 id="vote-section-title">VOTER POUR UN ORATEUR</h3>
                </div>
                <div class="card-content">
                    <div class="mb-30">
                        <p><strong>Code valid√© :</strong> <span id="currentCode" style="color: var(--accent); font-weight: bold;"></span></p>
                        <p style="color: #666; margin-top: 5px;">
                            <i class="fas fa-exclamation-circle" aria-hidden="true"></i>
                            S√©lectionnez votre candidat pr√©f√©r√©
                        </p>
                    </div>

                    <!-- Candidates Grid -->
                    <div class="candidates-grid" role="radiogroup" aria-labelledby="candidates-label">
                        <p id="candidates-label" class="hidden">Liste des candidats</p>
                        
                        <!-- Candidate 1 -->
                        <div class="candidate-card" 
                             data-choice="Emma Laurent"
                             role="radio"
                             aria-checked="false"
                             tabindex="0"
                             aria-label="Emma Laurent, th√®me: Le pouvoir des mots">
                            <div class="candidate-header">
                                <div class="candidate-number" aria-hidden="true">1</div>
                                <div class="candidate-avatar" aria-hidden="true">
                                    <i class="fas fa-user-tie"></i>
                                </div>
                                <div>
                                    <div class="candidate-name">Emma Laurent</div>
                                    <div class="candidate-theme">"Le pouvoir des mots"</div>
                                </div>
                            </div>
                            <div class="candidate-body">
                                <div class="candidate-quote">
                                    "Les mots peuvent changer le monde, une phrase √† la fois."
                                </div>
                                <div class="text-center">
                                    <div style="color: var(--primary); font-weight: 600; margin-bottom: 10px;">
                                        <i class="fas fa-university" aria-hidden="true"></i> Sciences Po Paris
                                    </div>
                                    <div style="font-size: 0.9em; color: #666;">
                                        Sp√©cialit√©: Rh√©torique classique
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Candidate 2 -->
                        <div class="candidate-card" 
                             data-choice="Thomas Dubois"
                             role="radio"
                             aria-checked="false"
                             tabindex="0"
                             aria-label="Thomas Dubois, th√®me: L'√©loquence num√©rique">
                            <div class="candidate-header">
                                <div class="candidate-number" aria-hidden="true">2</div>
                                <div class="candidate-avatar" aria-hidden="true">
                                    <i class="fas fa-user-graduate"></i>
                                </div>
                                <div>
                                    <div class="candidate-name">Thomas Dubois</div>
                                    <div class="candidate-theme">"L'√©loquence num√©rique"</div>
                                </div>
                            </div>
                            <div class="candidate-body">
                                <div class="candidate-quote">
                                    "Dans un monde connect√©, l'√©loquence doit trouver sa place digitale."
                                </div>
                                <div class="text-center">
                                    <div style="color: var(--primary); font-weight: 600; margin-bottom: 10px;">
                                        <i class="fas fa-laptop-code" aria-hidden="true"></i> √âcole 42
                                    </div>
                                    <div style="font-size: 0.9em; color: #666;">
                                        Sp√©cialit√©: Communication digitale
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Candidate 3 -->
                        <div class="candidate-card" 
                             data-choice="Sophie Martin"
                             role="radio"
                             aria-checked="false"
                             tabindex="0"
                             aria-label="Sophie Martin, th√®me: La parole qui gu√©rit">
                            <div class="candidate-header">
                                <div class="candidate-number" aria-hidden="true">3</div>
                                <div class="candidate-avatar" aria-hidden="true">
                                    <i class="fas fa-user-md"></i>
                                </div>
                                <div>
                                    <div class="candidate-name">Sophie Martin</div>
                                    <div class="candidate-theme">"La parole qui gu√©rit"</div>
                                </div>
                            </div>
                            <div class="candidate-body">
                                <div class="candidate-quote">
                                    "Les mots peuvent soigner, apaiser et r√©conforter."
                                </div>
                                <div class="text-center">
                                    <div style="color: var(--primary); font-weight: 600; margin-bottom: 10px;">
                                        <i class="fas fa-heartbeat" aria-hidden="true"></i> Facult√© de M√©decine
                                    </div>
                                    <div style="font-size: 0.9em; color: #666;">
                                        Sp√©cialit√©: Communication th√©rapeutique
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Candidate 4 -->
                        <div class="candidate-card" 
                             data-choice="Lucas Bernard"
                             role="radio"
                             aria-checked="false"
                             tabindex="0"
                             aria-label="Lucas Bernard, th√®me: L'art de la sc√®ne">
                            <div class="candidate-header">
                                <div class="candidate-number" aria-hidden="true">4</div>
                                <div class="candidate-avatar" aria-hidden="true">
                                    <i class="fas fa-theater-masks"></i>
                                </div>
                                <div>
                                    <div class="candidate-name">Lucas Bernard</div>
                                    <div class="candidate-theme">"L'art de la sc√®ne"</div>
                                </div>
                            </div>
                            <div class="candidate-body">
                                <div class="candidate-quote">
                                    "Chaque discours est une performance, chaque mot un geste."
                                </div>
                                <div class="text-center">
                                    <div style="color: var(--primary); font-weight: 600; margin-bottom: 10px;">
                                        <i class="fas fa-drama-masks" aria-hidden="true"></i> Conservatoire National
                                    </div>
                                    <div style="font-size: 0.9em; color: #666;">
                                        Sp√©cialit√©: Art oratoire th√©√¢tral
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="alert" id="voteAlert" role="alert" aria-live="assertive"></div>

                    <button class="btn" id="submitVoteBtn" disabled aria-label="Confirmer le vote">
                        <i class="fas fa-paper-plane" aria-hidden="true"></i>
                        CONFIRMER MON VOTE
                    </button>
                </div>
            </section>
        </div>

        <!-- Loading -->
        <div class="loading hidden" id="loading" role="status" aria-live="polite">
            <div class="spinner" aria-hidden="true"></div>
            <p>Traitement en cours...</p>
        </div>

        <!-- Live Results Section -->
        <section class="live-results-section" id="liveResultsSection" aria-labelledby="live-results-title">
            <div class="live-results-header">
                <h2 class="live-results-title" id="live-results-title">
                    <i class="fas fa-chart-line" aria-hidden="true"></i>
                    √âVOLUTION EN TEMPS R√âEL
                </h2>
                <button class="btn" id="refreshLiveResultsBtn" aria-label="Actualiser les r√©sultats en direct">
                    <i class="fas fa-sync-alt" aria-hidden="true"></i>
                    ACTUALISER
                </button>
            </div>

            <!-- Information personnelle du vote -->
            <div class="personal-vote-info hidden" id="personalVoteInfo" role="status">
                <div class="personal-vote-content">
                    <div class="personal-vote-icon">
                        <i class="fas fa-user-check" aria-hidden="true"></i>
                    </div>
                    <div class="personal-vote-text">
                        <h4>Votre vote a √©t√© enregistr√©</h4>
                        <p>Vous avez vot√© pour : <strong id="yourVoteCandidate">[Nom du candidat]</strong></p>
                        <p style="font-size: 0.8em; margin-top: 5px;">
                            <i class="fas fa-clock" aria-hidden="true"></i> 
                            Votre vote a √©t√© enregistr√© √† <span id="yourVoteTime">--:--</span>
                        </p>
                    </div>
                </div>
            </div>

            <!-- Grille des r√©sultats en direct -->
            <div class="live-results-grid" id="liveResultsContainer" role="region" aria-live="polite">
                <!-- Les r√©sultats seront charg√©s ici -->
            </div>

            <!-- Disclaimer -->
            <div class="results-disclaimer" role="note">
                <p>
                    <i class="fas fa-info-circle" aria-hidden="true"></i>
                    Ces r√©sultats sont en temps r√©el mais ne seront d√©finitifs qu'apr√®s la fin du vote le 1er Janvier 2026 √† 23:59
                </p>
            </div>
        </section>

        <!-- Results Section -->
        <section class="results-section hidden" id="resultsSection" aria-labelledby="results-title">
            <div class="results-header">
                <h2 class="results-title" id="results-title">
                    <i class="fas fa-chart-bar" aria-hidden="true"></i>
                    R√âSULTATS FINAUX DU CONCOURS
                </h2>
                <button class="btn" id="refreshResultsBtn" aria-label="Actualiser les r√©sultats finaux">
                    <i class="fas fa-sync-alt" aria-hidden="true"></i>
                    ACTUALISER
                </button>
            </div>

            <div class="results-grid" id="resultsContainer" role="region" aria-live="polite">
                <!-- Results will be loaded here -->
            </div>

            <div class="text-center mt-30">
                <div class="alert" id="resultsAlert" role="alert" aria-live="assertive"></div>
                <p style="color: #666; font-style: italic;">
                    <i class="fas fa-info-circle" aria-hidden="true"></i>
                    Les r√©sultats d√©finitifs. Derni√®re mise √† jour : <span id="lastUpdate">--:--</span>
                </p>
            </div>
        </section>

        <!-- End of Voting Message -->
        <div class="card hidden" id="endSection" role="status">
            <div class="card-header" style="background: linear-gradient(135deg, #666 0%, #333 100%);">
                <i class="fas fa-flag-checkered" aria-hidden="true"></i>
                <h3>VOTE TERMIN√â</h3>
            </div>
            <div class="card-content" style="text-align: center; padding: 50px 30px;">
                <div style="font-size: 5em; color: var(--secondary); margin-bottom: 20px;">
                    <i class="fas fa-trophy" aria-hidden="true"></i>
                </div>
                <h2 style="color: var(--primary); margin-bottom: 20px; font-size: clamp(1.8rem, 3vw, 2rem);">
                    Le concours "√âloquence en Sc√®ne" est termin√© !
                </h2>
                <p style="font-size: 1.2em; color: #666; margin-bottom: 30px;">
                    Merci √† tous les participants et aux spectateurs d'avoir pris part √† cet √©v√©nement exceptionnel.<br>
                    Les r√©sultats d√©finitifs sont disponibles ci-dessous.
                </p>
                <div style="background: #f8f4e6; padding: 20px; border-radius: 15px; display: inline-block;">
                    <div style="font-size: 1.5em; color: var(--primary); font-weight: bold;">
                        <i class="fas fa-calendar-star" aria-hidden="true"></i>
                        C√©r√©monie de remise des prix : 15 Janvier 2026
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer" role="contentinfo">
        <div class="container">
            <div class="footer-logo">Excellentia Academia</div>
            
            <div class="footer-info">
                <div class="footer-section">
                    <h4>CONTACT</h4>
                    <p>contact@excellentia-academia.fr</p>
                    <p>01 23 45 67 89</p>
                </div>
                
                <div class="footer-section">
                    <h4>ADRESSE</h4>
                    <p>123 Rue de l'√âloquence</p>
                    <p>75000 Paris, France</p>
                </div>
                
                <div class="footer-section">
                    <h4>SUIVEZ-NOUS</h4>
                    <div class="social-icons">
                        <i class="fab fa-twitter" aria-label="Twitter"></i>
                        <i class="fab fa-facebook" aria-label="Facebook"></i>
                        <i class="fab fa-instagram" aria-label="Instagram"></i>
                        <i class="fab fa-linkedin" aria-label="LinkedIn"></i>
                    </div>
                </div>
            </div>
            
            <div class="copyright">
                ¬© 2025-2026 Excellentia Academia - Tous droits r√©serv√©s<br>
                Syst√®me de vote s√©curis√© - Un vote par participant
            </div>
        </div>
    </footer>

    <script type="module">
        // Configuration Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyAUYpCBlPUnnsCyvqrfMmY5uacjHLGVRh0",
            authDomain: "match-a2ac6.firebaseapp.com",
            projectId: "match-a2ac6",
            storageBucket: "match-a2ac6.firebasestorage.app",
            messagingSenderId: "376894292796",
            appId: "1:376894292796:web:1eb138830c92aae8df5439",
            measurementId: "G-2RSRSSFCDZ"
        };

        // Initialiser Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        // Date de fin du vote : 1er janvier 2026, 23:59:59
        const VOTE_END_DATE = new Date('2025-12-23T13:31:59');

        // Variables d'√©tat
        let currentCode = null;
        let selectedCandidate = null;
        let userVoteData = null;
        let countdownInterval = null;

        // Constantes pour les messages
        const MESSAGES = {
            CODE_REQUIRED: '‚ö†Ô∏è Veuillez entrer votre code de vote.',
            CODE_INVALID_FORMAT: '‚ö†Ô∏è Format de code invalide. Le code doit commencer par VOTE2026-',
            CODE_INVALID: '‚ùå Code invalide. V√©rifiez votre code de vote.',
            CODE_DISABLED: '‚ùå Ce code a √©t√© d√©sactiv√© par l\'administration.',
            CODE_ALREADY_USED: '‚úÖ Vous avez d√©j√† vot√© pour ',
            CONNECTION_ERROR: '‚ö†Ô∏è Erreur de connexion. Veuillez r√©essayer.',
            VOTE_REQUIRED: '‚ö†Ô∏è Veuillez s√©lectionner un candidat.',
            VOTE_CONFIRMATION: (candidate) => `Confirmez-vous votre vote pour ${candidate} ?\n\nCette action est d√©finitive.`,
            VOTE_ENDED: '‚è∞ Le vote est termin√©. Merci de votre participation.',
            VOTE_ERROR: '‚ùå Erreur lors de l\'enregistrement. Veuillez r√©essayer.',
            VOTE_SUCCESS: 'üéâ Votre vote a √©t√© enregistr√© avec succ√®s ! Merci pour votre participation.',
            CODE_VALIDATED: '‚úÖ Code valid√© ! S√©lectionnez maintenant votre orateur pr√©f√©r√©.'
        };

        // Candidats par d√©faut
        const CANDIDATES = {
            'Emma Laurent': 0,
            'Thomas Dubois': 0,
            'Sophie Martin': 0,
            'Lucas Bernard': 0
        };

        // Mettre √† jour le chronom√®tre
        function updateCountdown() {
            const now = new Date();
            const timeLeft = VOTE_END_DATE - now;
            
            if (timeLeft <= 0) {
                clearInterval(countdownInterval);
                document.getElementById('days').textContent = "00";
                document.getElementById('hours').textContent = "00";
                document.getElementById('minutes').textContent = "00";
                document.getElementById('seconds').textContent = "00";
                
                const timerTitle = document.querySelector('.timer-title');
                timerTitle.innerHTML = '<i class="fas fa-flag-checkered"></i> VOTE TERMIN√â';
                timerTitle.style.color = '#dc3545';
                
                finDuVote();
                return;
            }
            
            const days = Math.floor(timeLeft / (1000 * 60 * 60 * 24));
            const hours = Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);
            
            document.getElementById('days').textContent = days.toString().padStart(2, '0');
            document.getElementById('hours').textContent = hours.toString().padStart(2, '0');
            document.getElementById('minutes').textContent = minutes.toString().padStart(2, '0');
            document.getElementById('seconds').textContent = seconds.toString().padStart(2, '0');
            
            // Animation de pulse pour les derni√®res minutes
            const timerSection = document.querySelector('.timer-section');
            if (timeLeft < 5 * 60 * 1000) {
                timerSection.classList.add('pulse');
            } else {
                timerSection.classList.remove('pulse');
            }
        }

        // Fonction appel√©e √† la fin du vote
        function finDuVote() {
            document.getElementById('codeSection').classList.add('hidden');
            document.getElementById('voteSection').classList.add('hidden');
            document.getElementById('endSection').classList.remove('hidden');
            document.getElementById('resultsSection').classList.remove('hidden');
            document.getElementById('liveResultsSection').classList.add('hidden');
            
            // D√©sactiver les boutons
            document.getElementById('verifyCodeBtn').disabled = true;
            document.getElementById('codeInput').disabled = true;
            
            // Afficher les r√©sultats finaux AVEC CLASSEMENT
            afficherResultatsFinauxAvecClassement();
            
            // Cr√©er des confettis pour c√©l√©brer
            createConfetti();
            
            // Afficher le leaderboard
            setTimeout(() => {
                afficherLeaderboard();
            }, 1000);
        }

        // Cr√©er des confettis pour c√©l√©brer
        function createConfetti() {
            const colors = ['#8B4513', '#D4AF37', '#228B22', '#654321', '#8B4513', '#D4AF37'];
            const confettiCount = 150;
            
            for (let i = 0; i < confettiCount; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 100 + 'vw';
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.opacity = Math.random() * 0.8 + 0.2;
                confetti.style.transform = `rotate(${Math.random() * 360}deg)`;
                confetti.style.width = Math.random() * 15 + 5 + 'px';
                confetti.style.height = Math.random() * 15 + 5 + 'px';
                confetti.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
                
                document.body.appendChild(confetti);
                
                // Animation
                const animation = confetti.animate([
                    { 
                        top: '-20px', 
                        opacity: 1,
                        transform: `rotate(0deg) translateX(${Math.random() * 100 - 50}px)`
                    },
                    { 
                        top: '100vh', 
                        opacity: 0,
                        transform: `rotate(${Math.random() * 720}deg) translateX(${Math.random() * 100 - 50}px)`
                    }
                ], {
                    duration: Math.random() * 3000 + 2000,
                    easing: 'cubic-bezier(0.215, 0.610, 0.355, 1)',
                    delay: Math.random() * 1000
                });
                
                animation.onfinish = () => confetti.remove();
            }
        }

        // V√©rifier si le code est valide
        async function verifierCode(code) {
            try {
                showLoading(true);
                
                const codeRef = db.collection('codes').doc(code);
                const doc = await codeRef.get();
                
                if (!doc.exists) {
                    showAlert('codeAlert', 'error', MESSAGES.CODE_INVALID);
                    return false;
                }
                
                const codeData = doc.data();
                
                if (!codeData.estValide) {
                    showAlert('codeAlert', 'error', MESSAGES.CODE_DISABLED);
                    return false;
                }
                
                if (codeData.utilise) {
                    // Si le code a d√©j√† √©t√© utilis√©, r√©cup√©rer les infos du vote
                    const voteInfo = await getVoteInfoByCode(code);
                    if (voteInfo) {
                        userVoteData = voteInfo;
                        showAlert('codeAlert', 'success', MESSAGES.CODE_ALREADY_USED + voteInfo.candidat + '. Consultez les r√©sultats en direct ci-dessous.');
                        
                        // Afficher la section r√©sultats en direct
                        document.getElementById('liveResultsSection').style.display = 'block';
                        afficherInfoVotePersonnel(voteInfo);
                        afficherResultatsEnDirect();
                        return 'deja_vote';
                    } else {
                        showAlert('codeAlert', 'error', MESSAGES.CODE_INVALID);
                        return false;
                    }
                }
                
                showAlert('codeAlert', 'success', MESSAGES.CODE_VALIDATED);
                return true;
            } catch (error) {
                console.error('Erreur de v√©rification:', error);
                showAlert('codeAlert', 'error', MESSAGES.CONNECTION_ERROR);
                return false;
            } finally {
                showLoading(false);
            }
        }

        // R√©cup√©rer les informations d'un vote par code
        async function getVoteInfoByCode(code) {
            try {
                const votesRef = db.collection('votes');
                const querySnapshot = await votesRef.where('code', '==', code).get();
                
                if (!querySnapshot.empty) {
                    const voteDoc = querySnapshot.docs[0];
                    return voteDoc.data();
                }
                return null;
            } catch (error) {
                console.error('Erreur:', error);
                return null;
            }
        }

        // Afficher les informations du vote personnel
        function afficherInfoVotePersonnel(voteData) {
            const personalVoteInfo = document.getElementById('personalVoteInfo');
            const candidateName = document.getElementById('yourVoteCandidate');
            const voteTime = document.getElementById('yourVoteTime');
            
            candidateName.textContent = voteData.candidat;
            
            if (voteData.dateVote && voteData.dateVote.toDate) {
                const date = voteData.dateVote.toDate();
                voteTime.textContent = date.toLocaleTimeString('fr-FR', { 
                    hour: '2-digit', 
                    minute: '2-digit' 
                });
            } else {
                voteTime.textContent = new Date().toLocaleTimeString('fr-FR', { 
                    hour: '2-digit', 
                    minute: '2-digit' 
                });
            }
            
            personalVoteInfo.style.display = 'block';
        }

        // Enregistrer le vote
        async function enregistrerVote(code, candidat) {
            try {
                showLoading(true);
                
                // V√©rifier que le vote n'est pas termin√©
                if (new Date() > VOTE_END_DATE) {
                    showAlert('voteAlert', 'error', MESSAGES.VOTE_ENDED);
                    return false;
                }

                const batch = db.batch();
                const codeRef = db.collection('codes').doc(code);
                const voteRef = db.collection('votes').doc();
                
                // Marquer le code comme utilis√©
                batch.update(codeRef, {
                    utilise: true,
                    dateUtilisation: firebase.firestore.FieldValue.serverTimestamp()
                });
                
                // Enregistrer le vote
                batch.set(voteRef, {
                    code: code,
                    candidat: candidat,
                    dateVote: firebase.firestore.FieldValue.serverTimestamp(),
                    userAgent: navigator.userAgent.substring(0, 100),
                    timestamp: Date.now()
                });
                
                await batch.commit();
                
                // Stocker les donn√©es du vote pour affichage
                userVoteData = {
                    code: code,
                    candidat: candidat,
                    dateVote: new Date()
                };
                
                showAlert('voteAlert', 'success', MESSAGES.VOTE_SUCCESS);
                return true;
            } catch (error) {
                console.error('Erreur d\'enregistrement:', error);
                showAlert('voteAlert', 'error', MESSAGES.VOTE_ERROR);
                return false;
            } finally {
                showLoading(false);
            }
        }

        // Afficher les r√©sultats en direct
        async function afficherResultatsEnDirect() {
            try {
                const votesRef = db.collection('votes');
                const snapshot = await votesRef.get();
                
                const resultats = { ...CANDIDATES };
                let totalVotes = 0;
                
                snapshot.forEach(doc => {
                    const vote = doc.data();
                    if (resultats[vote.candidat] !== undefined) {
                        resultats[vote.candidat]++;
                        totalVotes++;
                    }
                });
                
                // Trier les r√©sultats
                const sortedResults = Object.entries(resultats)
                    .sort((a, b) => b[1] - a[1]);
                
                const container = document.getElementById('liveResultsContainer');
                let html = '';
                
                sortedResults.forEach(([candidat, votes], index) => {
                    const percentage = totalVotes > 0 ? ((votes / totalVotes) * 100).toFixed(1) : 0;
                    const isUserVote = userVoteData && userVoteData.candidat === candidat;
                    
                    html += `
                        <div class="live-result-item" ${isUserVote ? 'style="border: 2px solid var(--primary);"' : ''}>
                            <div class="live-result-name">${candidat}</div>
                            ${isUserVote ? '<div style="color: var(--primary); font-size: 0.9em; margin-bottom: 5px;"><i class="fas fa-user-check"></i> Votre choix</div>' : ''}
                            <div class="live-result-votes">${votes}</div>
                            <div class="live-result-percentage">${percentage}%</div>
                            <div class="live-result-bar">
                                <div class="live-result-fill" style="width: ${percentage}%"></div>
                            </div>
                            <div style="font-size: 0.8em; color: #666; margin-top: 10px;">
                                ${index === 0 && totalVotes > 0 ? '<i class="fas fa-crown" style="color: var(--secondary);"></i> En t√™te' : ''}
                            </div>
                        </div>
                    `;
                });
                
                container.innerHTML = html;
                
                // Afficher la section si elle ne l'est pas d√©j√†
                document.getElementById('liveResultsSection').style.display = 'block';
                
            } catch (error) {
                console.error('Erreur de calcul:', error);
            }
        }

        // Afficher les r√©sultats finaux avec classement
        async function afficherResultatsFinauxAvecClassement() {
            try {
                const votesRef = db.collection('votes');
                const snapshot = await votesRef.get();
                
                const resultats = { ...CANDIDATES };
                let totalVotes = 0;
                
                snapshot.forEach(doc => {
                    const vote = doc.data();
                    if (resultats[vote.candidat] !== undefined) {
                        resultats[vote.candidat]++;
                        totalVotes++;
                    }
                });
                
                // Trier les r√©sultats
                const sortedResults = Object.entries(resultats)
                    .sort((a, b) => b[1] - a[1])
                    .slice(0, 4);
                
                const container = document.getElementById('resultsContainer');
                let html = '';
                
                // Ajouter le total des votes

               
html += <div class="result-item" style="grid-column: 1 / -1; background: linear-gradient(135deg, #f8f4e6 0%, #f0e8d6 100%);"> <div class="result-name" style="font-size: 1.5em;"> <i class="fas fa-chart-pie"></i> TOTAL DES VOTES </div> <div class="result-votes" style="font-size: 4em; color: var(--primary);"> ${totalVotes} </div> <div style="color: #666; margin-top: 10px;"> ${totalVotes} votes enregistr√©s </div> </div>;

            sortedResults.forEach(([candidat, votes], index) => {
                const percentage = totalVotes > 0 ? ((votes / totalVotes) * 100).toFixed(1) : 0;
                const isWinner = index === 0 && totalVotes > 0;
                
                html += `
                    <div class="result-item ${isWinner ? 'winner' : ''}">
                        <div class="result-rank">${index + 1}</div>
                        <div class="result-name">${candidat}</div>
                        <div class="result-votes">${votes}</div>
                        <div class="result-percentage">${percentage}%</div>
                        <div class="result-bar">
                            <div class="result-fill" style="width: ${percentage}%"></div>
                        </div>
                        <div style="margin-top: 10px; font-size: 0.9em; color: #666;">
                            <i class="fas fa-microphone"></i> ${candidat.split(' ')[0]}
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
            
            // Mettre √† jour l'heure
            const updateTime = new Date();
            document.getElementById('lastUpdate').textContent = 
                `${updateTime.getHours().toString().padStart(2, '0')}:${updateTime.getMinutes().toString().padStart(2, '0')}`;
            
        } catch (error) {
            console.error('Erreur de calcul:', error);
        }
    }

    // Nouvelle fonction pour afficher le leaderboard
    function afficherLeaderboard() {
        const container = document.getElementById('resultsContainer');
        const existingHtml = container.innerHTML;
        
        // R√©cup√©rer les donn√©es de classement depuis les r√©sultats
        const resultItems = document.querySelectorAll('.result-item:not(.winner)');
        const winnerItem = document.querySelector('.result-item.winner');
        
        let leaderboardHtml = '';
        
        if (winnerItem) {
            const winnerName = winnerItem.querySelector('.result-name').textContent;
            const winnerVotes = winnerItem.querySelector('.result-votes').textContent;
            const winnerPercentage = winnerItem.querySelector('.result-percentage').textContent;
            
            leaderboardHtml += `
                <div class="leaderboard-section" style="grid-column: 1 / -1; margin-top: 40px; padding-top: 30px; border-top: 3px solid var(--secondary);">
                    <div class="leaderboard-header" style="text-align: center; margin-bottom: 30px;">
                        <h3 style="color: var(--primary); font-size: 2em; display: flex; align-items: center; justify-content: center; gap: 15px;">
                            <i class="fas fa-trophy" style="color: var(--secondary);"></i>
                            CLASSEMENT FINAL
                            <i class="fas fa-trophy" style="color: var(--secondary);"></i>
                        </h3>
                        <p style="color: #666; font-style: italic; margin-top: 10px;">
                            R√©sultats d√©finitifs du concours "√âloquence en Sc√®ne"
                        </p>
                    </div>
                    
                    <!-- Podium -->
                    <div class="podium-container">
                        <!-- 2√®me place -->
                        ${resultItems[0] ? `
                        <div class="podium-place second-place">
                            <div class="podium-rank" style="font-size: 3em; font-weight: bold; margin-bottom: 10px;">2</div>
                            <div class="podium-name" style="font-size: 1.2em; font-weight: bold; margin-bottom: 10px;">${resultItems[0].querySelector('.result-name').textContent}</div>
                            <div class="podium-votes" style="font-size: 1.8em; font-weight: bold;">${resultItems[0].querySelector('.result-votes').textContent}</div>
                            <div class="podium-percentage" style="font-size: 1.1em; margin-top: 5px;">${resultItems[0].querySelector('.result-percentage').textContent}</div>
                        </div>
                        ` : ''}
                        
                        <!-- 1√®re place -->
                        <div class="podium-place first-place">
                            <div style="position: absolute; top: -40px; left: 50%; transform: translateX(-50%); font-size: 3em;">
                                <i class="fas fa-crown"></i>
                            </div>
                            <div class="podium-rank" style="font-size: 3.5em; font-weight: bold; margin-bottom: 10px;">1</div>
                            <div class="podium-name" style="font-size: 1.4em; font-weight: bold; margin-bottom: 10px;">${winnerName}</div>
                            <div class="podium-votes" style="font-size: 2.2em; font-weight: bold;">${winnerVotes}</div>
                            <div class="podium-percentage" style="font-size: 1.2em; margin-top: 5px;">${winnerPercentage}</div>
                            <div style="margin-top: 15px; font-size: 0.9em; font-style: italic;">VAINQUEUR</div>
                        </div>
                        
                        <!-- 3√®me place -->
                        ${resultItems[1] ? `
                        <div class="podium-place third-place">
                            <div class="podium-rank" style="font-size: 2.5em; font-weight: bold; margin-bottom: 10px;">3</div>
                            <div class="podium-name" style="font-size: 1.1em; font-weight: bold; margin-bottom: 10px;">${resultItems[1].querySelector('.result-name').textContent}</div>
                            <div class="podium-votes" style="font-size: 1.5em; font-weight: bold;">${resultItems[1].querySelector('.result-votes').textContent}</div>
                            <div class="podium-percentage" style="font-size: 1em; margin-top: 5px;">${resultItems[1].querySelector('.result-percentage').textContent}</div>
                        </div>
                        ` : ''}
                    </div>
                    
                    <!-- Tableau de classement complet -->
                    <div class="ranking-table">
                        <h4 style="color: var(--primary); margin-bottom: 20px; font-size: 1.5em; display: flex; align-items: center; gap: 10px;">
                            <i class="fas fa-list-ol"></i>
                            CLASSEMENT COMPLET
                        </h4>
                        
                        <table style="width: 100%; border-collapse: collapse;">
                            <thead>
                                <tr>
                                    <th style="padding: 15px; text-align: left; border-bottom: 2px solid var(--secondary);">Position</th>
                                    <th style="padding: 15px; text-align: left; border-bottom: 2px solid var(--secondary);">Orateur</th>
                                    <th style="padding: 15px; text-align: left; border-bottom: 2px solid var(--secondary);">Votes</th>
                                    <th style="padding: 15px; text-align: left; border-bottom: 2px solid var(--secondary);">Pourcentage</th>
                                    <th style="padding: 15px; text-align: left; border-bottom: 2px solid var(--secondary);">√âcart</th>
                                </tr>
                            </thead>
                            <tbody id="rankingTableBody">
                                <!-- Les lignes seront ajout√©es par JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
            `;
            
            container.innerHTML += leaderboardHtml;
            
            // Remplir le tableau de classement
            remplirTableauClassement();
        }
    }

    // Fonction pour remplir le tableau de classement
    async function remplirTableauClassement() {
        try {
            const votesRef = db.collection('votes');
            const snapshot = await votesRef.get();
            
            const resultats = { ...CANDIDATES };
            let totalVotes = 0;
            
            snapshot.forEach(doc => {
                const vote = doc.data();
                if (resultats[vote.candidat] !== undefined) {
                    resultats[vote.candidat]++;
                    totalVotes++;
                }
            });
            
            // Trier les r√©sultats
            const sortedResults = Object.entries(resultats)
                .sort((a, b) => b[1] - a[1]);
            
            const tbody = document.getElementById('rankingTableBody');
            let html = '';
            
            sortedResults.forEach(([candidat, votes], index) => {
                const percentage = totalVotes > 0 ? ((votes / totalVotes) * 100).toFixed(1) : 0;
                const difference = index > 0 ? sortedResults[index-1][1] - votes : 0;
                
                // Ic√¥ne selon la position
                let positionIcon = '';
                if (index === 0) positionIcon = '<i class="fas fa-trophy" style="color: var(--secondary);"></i>';
                else if (index === 1) positionIcon = '<i class="fas fa-medal" style="color: #C0C0C0;"></i>';
                else if (index === 2) positionIcon = '<i class="fas fa-medal" style="color: #CD7F32;"></i>';
                else positionIcon = `<span style="color: #666;">${index + 1}</span>`;
                
                html += `
                    <tr style="${index % 2 === 0 ? 'background: #f9f9f9;' : ''}">
                        <td style="padding: 15px; font-weight: bold; font-size: 1.2em;">
                            ${positionIcon}
                            <span style="margin-left: 10px;">${index + 1}</span>
                        </td>
                        <td style="padding: 15px; font-weight: bold; color: var(--primary);">${candidat}</td>
                        <td style="padding: 15px; font-weight: bold; font-size: 1.2em;">${votes}</td>
                        <td style="padding: 15px;">
                            <div style="background: #f0f0f0; border-radius: 10px; height: 10px; width: 100%; margin-bottom: 5px;">
                                <div style="background: linear-gradient(90deg, var(--primary) 0%, var(--secondary) 100%); height: 100%; border-radius: 10px; width: ${percentage}%"></div>
                            </div>
                            ${percentage}%
                        </td>
                        <td style="padding: 15px; color: ${difference === 0 ? 'var(--accent)' : '#666'};">
                            ${index === 0 ? '‚Äî' : `-${difference}`}
                        </td>
                    </tr>
                `;
            });
            
            tbody.innerHTML = html;
            
            // Ajouter la liste des champions apr√®s le tableau
            const championsSection = `
                <div style="grid-column: 1 / -1; margin-top: 50px; padding-top: 30px; border-top: 3px solid var(--secondary);">
                    <div style="text-align: center; margin-bottom: 30px;">
                        <h3 style="color: var(--primary); font-size: 2em; display: flex; align-items: center; justify-content: center; gap: 15px;">
                            <i class="fas fa-award" style="color: var(--secondary);"></i>
                            LISTE DES CHAMPIONS
                            <i class="fas fa-award" style="color: var(--secondary);"></i>
                        </h3>
                        <p style="color: #666; font-style: italic; margin-top: 10px;">
                            Les orateurs qui ont marqu√© cette √©dition par leur √©loquence exceptionnelle
                        </p>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
                        <!-- Champion 1 - Vainqueur -->
                        <div style="background: linear-gradient(135deg, #fff8dc 0%, #ffe4b5 100%); padding: 25px; border-radius: 15px; text-align: center; border: 3px solid var(--secondary);">
                            <div style="font-size: 3em; color: var(--secondary); margin-bottom: 15px;">
                                <i class="fas fa-crown"></i>
                            </div>
                            <div style="font-size: 1.4em; font-weight: bold; color: var(--primary); margin-bottom: 10px;">
                                ${sortedResults[0] ? sortedResults[0][0] : 'Vainqueur'}
                            </div>
                            <div style="color: #666; margin-bottom: 15px; font-style: italic;">
                                "L'Excellence Oratoire"
                            </div>
                            <div style="background: var(--secondary); color: white; padding: 8px 15px; border-radius: 20px; display: inline-block; font-weight: bold;">
                                Vainqueur 2026
                            </div>
                        </div>
                        
                        <!-- Champion 2 -->
                        <div style="background: linear-gradient(135deg, #f8f8f8 0%, #e8e8e8 100%); padding: 25px; border-radius: 15px; text-align: center; border: 2px solid #C0C0C0;">
                            <div style="font-size: 3em; color: #C0C0C0; margin-bottom: 15px;">
                                <i class="fas fa-medal"></i>
                            </div>
                            <div style="font-size: 1.3em; font-weight: bold; color: var(--primary); margin-bottom: 10px;">
                                ${sortedResults[1] ? sortedResults[1][0] : '2√®me Place'}
                            </div>
                            <div style="color: #666; margin-bottom: 15px; font-style: italic;">
                                "Prix de l'√âloquence"
                            </div>
                            <div style="background: #C0C0C0; color: white; padding: 8px 15px; border-radius: 20px; display: inline-block; font-weight: bold;">
                                M√©daille d'Argent
                            </div>
                        </div>
                        
                        <!-- Champion 3 -->
                        <div style="background: linear-gradient(135deg, #f8f4e6 0%, #f0e8d6 100%); padding: 25px; border-radius: 15px; text-align: center; border: 2px solid #CD7F32;">
                            <div style="font-size: 3em; color: #CD7F32; margin-bottom: 15px;">
                                <i class="fas fa-medal"></i>
                            </div>
                            <div style="font-size: 1.3em; font-weight: bold; color: var(--primary); margin-bottom: 10px;">
                                ${sortedResults[2] ? sortedResults[2][0] : '3√®me Place'}
                            </div>
                            <div style="color: #666; margin-bottom: 15px; font-style: italic;">
                                "Prix de la Persuasion"
                            </div>
                            <div style="background: #CD7F32; color: white; padding: 8px 15px; border-radius: 20px; display: inline-block; font-weight: bold;">
                                M√©daille de Bronze
                            </div>
                        </div>
                        
                        <!-- Champion 4 - Prix sp√©cial -->
                        <div style="background: linear-gradient(135deg, #f0f8ff 0%, #e6f2ff 100%); padding: 25px; border-radius: 15px; text-align: center; border: 2px solid var(--primary);">
                            <div style="font-size: 3em; color: var(--primary); margin-bottom: 15px;">
                                <i class="fas fa-star"></i>
                            </div>
                            <div style="font-size: 1.3em; font-weight: bold; color: var(--primary); margin-bottom: 10px;">
                                ${sortedResults[3] ? sortedResults[3][0] : '4√®me Place'}
                            </div>
                            <div style="color: #666; margin-bottom: 15px; font-style: italic;">
                                "Prix du Public"
                            </div>
                            <div style="background: var(--primary); color: white; padding: 8px 15px; border-radius: 20px; display: inline-block; font-weight: bold;">
                                Mention d'Honneur
                            </div>
                        </div>
                    </div>
                    
                    <!-- L√©gende des champions -->
                    <div style="margin-top: 30px; padding: 20px; background: #f9f9f9; border-radius: 15px; text-align: center;">
                        <h4 style="color: var(--primary); margin-bottom: 15px; display: flex; align-items: center; justify-content: center; gap: 10px;">
                            <i class="fas fa-info-circle"></i>
                            PALMAR√àS 2026
                        </h4>
                        <p style="color: #666;">
                            <strong>${sortedResults[0] ? sortedResults[0][0] : 'Le Vainqueur'}</strong> remporte le Grand Prix d'√âloquence 2026.<br>
                            Tous les champions seront invit√©s √† la c√©r√©monie de remise des prix le 15 Janvier 2026.
                        </p>
                    </div>
                </div>
            `;
            
            container.innerHTML += championsSection;
            
        } catch (error) {
            console.error('Erreur lors du remplissage du classement:', error);
        }
    }

    // Afficher une alerte
    function showAlert(elementId, type, message) {
        const alert = document.getElementById(elementId);
        alert.textContent = message;
        alert.className = `alert ${type}`;
        alert.style.display = 'block';
        
        setTimeout(() => {
            alert.style.display = 'none';
        }, 5000);
    }

    // Afficher/masquer le loading
    function showLoading(show) {
        const loadingElement = document.getElementById('loading');
        if (show) {
            loadingElement.classList.remove('hidden');
        } else {
            loadingElement.classList.add('hidden');
        }
    }

    // G√©rer la s√©lection des candidats
    function handleCandidateSelection(event) {
        // Retirer la s√©lection pr√©c√©dente
        document.querySelectorAll('.candidate-card').forEach(card => {
            card.classList.remove('selected');
            card.setAttribute('aria-checked', 'false');
        });
        
        // Ajouter la nouvelle s√©lection
        const card = event.currentTarget;
        card.classList.add('selected');
        card.setAttribute('aria-checked', 'true');
        selectedCandidate = card.dataset.choice;
        document.getElementById('submitVoteBtn').disabled = false;
        
        // Focus sur le bouton de vote
        document.getElementById('submitVoteBtn').focus();
    }

    // G√©rer le clavier sur les cartes de candidat
    function handleCandidateKeyDown(event) {
        if (event.key === 'Enter' || event.key === ' ') {
            event.preventDefault();
            handleCandidateSelection(event);
        }
    }

    // Initialisation de l'application
    function initializeApp() {
        // Initialiser le timer
        updateCountdown();
        countdownInterval = setInterval(updateCountdown, 1000);
        
        // V√©rifier si le vote est termin√©
        if (new Date() > VOTE_END_DATE) {
            clearInterval(countdownInterval);
            finDuVote();
        }
        
        // Configuration des √©couteurs d'√©v√©nements
        setupEventListeners();
    }

    // Configurer les √©couteurs d'√©v√©nements
    function setupEventListeners() {
        // Bouton de v√©rification du code
        const verifyCodeBtn = document.getElementById('verifyCodeBtn');
        verifyCodeBtn.addEventListener('click', handleCodeVerification);
        
        // S√©lection des candidats
        document.querySelectorAll('.candidate-card').forEach(card => {
            card.addEventListener('click', handleCandidateSelection);
            card.addEventListener('keydown', handleCandidateKeyDown);
        });
        
        // Soumission du vote
        const submitVoteBtn = document.getElementById('submitVoteBtn');
        submitVoteBtn.addEventListener('click', handleVoteSubmission);
        
        // Rafra√Æchir les r√©sultats en direct
        const refreshLiveResultsBtn = document.getElementById('refreshLiveResultsBtn');
        refreshLiveResultsBtn.addEventListener('click', afficherResultatsEnDirect);
        
        // Rafra√Æchir les r√©sultats finaux
        const refreshResultsBtn = document.getElementById('refreshResultsBtn');
        refreshResultsBtn.addEventListener('click', afficherResultatsFinauxAvecClassement);
        
        // Entr√©e pour valider le code
        const codeInput = document.getElementById('codeInput');
        codeInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                verifyCodeBtn.click();
            }
        });
        
        // Auto-format du code
        codeInput.addEventListener('input', function(e) {
            this.value = this.value.toUpperCase();
        });
        
        // Focus sur le champ code au chargement
        codeInput.focus();
    }

    // G√©rer la v√©rification du code
    async function handleCodeVerification() {
        const codeInput = document.getElementById('codeInput');
        const code = codeInput.value.trim().toUpperCase();
        
        if (!code) {
            showAlert('codeAlert', 'error', MESSAGES.CODE_REQUIRED);
            codeInput.focus();
            return;
        }
        
        if (!code.startsWith('VOTE2026-')) {
            showAlert('codeAlert', 'error', MESSAGES.CODE_INVALID_FORMAT);
            return;
        }
        
        const isValid = await verifierCode(code);
        
        if (isValid === true) {
            currentCode = code;
            document.getElementById('currentCode').textContent = code;
            document.getElementById('codeSection').classList.add('hidden');
            document.getElementById('voteSection').classList.remove('hidden');
            document.getElementById('voteSection').classList.add('fade-in');
            
            // Focus sur le premier candidat
            const firstCandidate = document.querySelector('.candidate-card');
            if (firstCandidate) {
                firstCandidate.focus();
            }
        } else if (isValid === 'deja_vote') {
            // L'utilisateur a d√©j√† vot√©, on affiche juste les r√©sultats
            currentCode = code;
            document.getElementById('currentCode').textContent = code;
            document.getElementById('codeSection').classList.add('hidden');
            document.getElementById('voteSection').classList.add('hidden');
        }
    }

    // G√©rer la soumission du vote
    async function handleVoteSubmission() {
        if (!currentCode || !selectedCandidate) {
            showAlert('voteAlert', 'error', MESSAGES.VOTE_REQUIRED);
            return;
        }
        
        // Confirmation
        if (!confirm(MESSAGES.VOTE_CONFIRMATION(selectedCandidate))) {
            return;
        }
        
        const success = await enregistrerVote(currentCode, selectedCandidate);
        
        if (success) {
            // Afficher les informations du vote personnel
            afficherInfoVotePersonnel({
                code: currentCode,
                candidat: selectedCandidate,
                dateVote: new Date()
            });
            
            // Afficher les r√©sultats en direct
            afficherResultatsEnDirect();
            
            // Animation de transition
            document.getElementById('voteSection').classList.add('fade-out');
            
            setTimeout(() => {
                document.getElementById('voteSection').classList.add('hidden');
                document.getElementById('voteSection').classList.remove('fade-out');
                document.getElementById('liveResultsSection').style.display = 'block';
                document.getElementById('liveResultsSection').classList.add('fade-in');
                
                // Focus sur les r√©sultats
                document.getElementById('liveResultsSection').focus();
            }, 500);
        }
    }

    // D√©marrer l'application
    document.addEventListener('DOMContentLoaded', initializeApp);
</script>

</body>
</html>
