<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Excellentia Academia : √âloquence en Sc√®ne</title>
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-firestore-compat.js"></script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Montserrat:wght@300;400;500;600&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary: #8B4513;
            --primary-dark: #654321;
            --secondary: #D4AF37;
            --accent: #228B22;
            --light: #F5F5DC;
            --dark: #2C1810;
            --text: #333333;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Montserrat', sans-serif;
            background: linear-gradient(135deg, #f5f5dc 0%, #fff8dc 100%);
            color: var(--text);
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
        }
        
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><path d="M50,0 Q100,50 50,100 Q0,50 50,0" fill="%238B4513" opacity="0.03"/></svg>');
            z-index: -1;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* Header */
        .header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            padding: 40px 20px;
            border-radius: 0 0 30px 30px;
            box-shadow: 0 10px 40px rgba(139, 69, 19, 0.3);
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .header::before {
            content: 'üé§';
            position: absolute;
            font-size: 200px;
            opacity: 0.1;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
        
        .logo-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .logo {
            background: white;
            width: 80px;
            height: 80px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .logo i {
            font-size: 40px;
            color: var(--primary);
        }
        
        .header h1 {
            font-family: 'Playfair Display', serif;
            font-size: 3.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            letter-spacing: 1px;
        }
        
        .header h2 {
            font-size: 1.8em;
            font-weight: 300;
            opacity: 0.9;
            margin-bottom: 30px;
        }
        
        .event-info {
            display: flex;
            justify-content: center;
            gap: 40px;
            flex-wrap: wrap;
            margin-top: 30px;
        }
        
        .info-item {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.1em;
        }
        
        .info-item i {
            color: var(--secondary);
        }
        
        /* Timer Section */
        .timer-section {
            background: white;
            margin: 40px 0;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            text-align: center;
            border: 2px solid var(--secondary);
        }
        
        .timer-title {
            color: var(--primary);
            font-size: 1.5em;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .timer {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }
        
        .time-unit {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            min-width: 120px;
            box-shadow: 0 5px 15px rgba(139, 69, 19, 0.3);
        }
        
        .time-value {
            font-size: 3em;
            font-weight: bold;
            font-family: 'Courier New', monospace;
        }
        
        .time-label {
            font-size: 0.9em;
            opacity: 0.9;
            margin-top: 5px;
        }
        
        /* Voting Cards */
        .voting-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 40px;
        }
        
        @media (max-width: 768px) {
            .voting-container {
                grid-template-columns: 1fr;
            }
        }
        
        .card {
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
        }
        
        .card-header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            padding: 25px;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .card-header i {
            font-size: 1.8em;
        }
        
        .card-header h3 {
            font-size: 1.5em;
            font-weight: 600;
        }
        
        .card-content {
            padding: 30px;
        }
        
        /* Code Input Section */
        .code-input-group {
            position: relative;
            margin-bottom: 25px;
        }
        
        .code-input-group label {
            display: block;
            margin-bottom: 10px;
            color: var(--primary);
            font-weight: 600;
        }
        
        .code-input-wrapper {
            position: relative;
        }
        
        .code-input {
            width: 100%;
            padding: 20px 60px 20px 20px;
            font-size: 1.2em;
            border: 3px solid #e2e8f0;
            border-radius: 15px;
            transition: all 0.3s;
            letter-spacing: 2px;
            font-weight: 600;
        }
        
        .code-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(139, 69, 19, 0.1);
        }
        
        .code-input-icon {
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--primary);
            font-size: 1.5em;
        }
        
        .btn {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            border: none;
            padding: 18px 40px;
            border-radius: 15px;
            font-size: 1.2em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            width: 100%;
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(139, 69, 19, 0.3);
        }
        
        .btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        /* Candidates Section */
        .candidates-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin: 30px 0;
        }
        
        .candidate-card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 25px rgba(0,0,0,0.08);
            transition: all 0.3s;
            cursor: pointer;
            border: 3px solid transparent;
        }
        
        .candidate-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.15);
        }
        
        .candidate-card.selected {
            border-color: var(--accent);
            background: linear-gradient(135deg, #f8fff8 0%, #f0fff0 100%);
        }
        
        .candidate-header {
            background: linear-gradient(135deg, #f8f4e6 0%, #f0e8d6 100%);
            padding: 20px;
            text-align: center;
            position: relative;
        }
        
        .candidate-number {
            position: absolute;
            top: 15px;
            left: 15px;
            background: var(--secondary);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2em;
        }
        
        .candidate-avatar {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            margin: 0 auto 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 2.5em;
            border: 5px solid white;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .candidate-name {
            font-size: 1.4em;
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 5px;
        }
        
        .candidate-theme {
            color: var(--accent);
            font-style: italic;
            font-size: 0.9em;
        }
        
        .candidate-body {
            padding: 20px;
        }
        
        .candidate-quote {
            font-style: italic;
            color: #666;
            text-align: center;
            margin-bottom: 15px;
            padding: 10px;
            border-left: 3px solid var(--secondary);
            background: #f9f9f9;
        }
        
        /* Live Results Section - NOUVELLE SECTION */
        .live-results-section {
            background: white;
            margin: 40px 0;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            display: none;
            animation: fadeIn 0.5s ease;
        }
        
        .live-results-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 20px;
        }
        
        .live-results-title {
            color: var(--primary);
            font-size: 1.8em;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .personal-vote-info {
            background: linear-gradient(135deg, #f0f8ff 0%, #e6f2ff 100%);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 25px;
            border-left: 5px solid var(--primary);
            display: none;
            animation: slideIn 0.3s ease;
        }
        
        .personal-vote-content {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .personal-vote-icon {
            font-size: 2em;
            color: var(--primary);
        }
        
        .personal-vote-text h4 {
            color: var(--primary);
            margin-bottom: 5px;
            font-size: 1.2em;
        }
        
        .personal-vote-text p {
            color: #666;
            font-size: 0.9em;
        }
        
        .live-results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .live-result-item {
            background: linear-gradient(135deg, #f8f4e6 0%, #f0e8d6 100%);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            transition: transform 0.3s;
        }
        
        .live-result-item:hover {
            transform: translateY(-3px);
        }
        
        .live-result-name {
            font-size: 1.2em;
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 10px;
        }
        
        .live-result-votes {
            font-size: 2.5em;
            font-weight: bold;
            color: var(--primary-dark);
            margin: 10px 0;
        }
        
        .live-result-percentage {
            font-size: 1.1em;
            color: var(--accent);
            font-weight: 600;
        }
        
        .live-result-bar {
            height: 8px;
            background: #e0e0e0;
            border-radius: 4px;
            margin: 15px 0;
            overflow: hidden;
        }
        
        .live-result-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary) 0%, var(--secondary) 100%);
            border-radius: 4px;
            transition: width 1s ease-in-out;
        }
        
        .results-disclaimer {
            text-align: center;
            padding: 20px;
            background: linear-gradient(135deg, #fff8dc 0%, #ffe4b5 100%);
            border-radius: 15px;
            border: 2px dashed var(--secondary);
            margin-top: 20px;
        }
        
        .results-disclaimer p {
            color: var(--primary-dark);
            font-style: italic;
            margin: 0;
        }
        
        /* Results Section */
        .results-section {
            background: white;
            margin: 40px 0;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            display: none;
        }
        
        .results-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 20px;
        }
        
        .results-title {
            color: var(--primary);
            font-size: 2em;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .result-item {
            background: linear-gradient(135deg, #f8f4e6 0%, #f0e8d6 100%);
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .result-item.winner {
            background: linear-gradient(135deg, #fff8dc 0%, #ffe4b5 100%);
            border: 3px solid var(--secondary);
            transform: scale(1.05);
        }
        
        .result-rank {
            position: absolute;
            top: 10px;
            right: 10px;
            background: var(--primary);
            color: white;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        
        .result-name {
            font-size: 1.3em;
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 10px;
        }
        
        .result-votes {
            font-size: 3em;
            font-weight: bold;
            color: var(--primary-dark);
            margin: 10px 0;
        }
        
        .result-percentage {
            font-size: 1.2em;
            color: var(--accent);
            font-weight: 600;
        }
        
        .result-bar {
            height: 10px;
            background: #e0e0e0;
            border-radius: 5px;
            margin: 15px 0;
            overflow: hidden;
        }
        
        .result-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary) 0%, var(--secondary) 100%);
            border-radius: 5px;
            transition: width 1s ease-in-out;
        }
        
        /* Alerts */
        .alert {
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            display: none;
            animation: slideIn 0.3s ease;
        }
        
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .alert.success {
            background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%);
            color: #155724;
            border: 2px solid #c3e6cb;
        }
        
        .alert.error {
            background: linear-gradient(135deg, #f8d7da 0%, #f5c6cb 100%);
            color: #721c24;
            border: 2px solid #f5c6cb;
        }
        
        .alert.warning {
            background: linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%);
            color: #856404;
            border: 2px solid #ffeaa7;
        }
        
        /* Footer */
        .footer {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            padding: 40px 20px;
            border-radius: 30px 30px 0 0;
            text-align: center;
            margin-top: 60px;
        }
        
        .footer-logo {
            font-family: 'Playfair Display', serif;
            font-size: 2em;
            margin-bottom: 20px;
        }
        
        .footer-info {
            display: flex;
            justify-content: center;
            gap: 40px;
            flex-wrap: wrap;
            margin: 30px 0;
        }
        
        .footer-section h4 {
            color: var(--secondary);
            margin-bottom: 15px;
            font-size: 1.2em;
        }
        
        .copyright {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid rgba(255,255,255,0.1);
            opacity: 0.8;
        }
        
        /* Loading Animation */
        .loading {
            display: none;
            text-align: center;
            padding: 30px;
        }
        
        .spinner {
            width: 50px;
            height: 50px;
            border: 5px solid #f3f3f3;
            border-top: 5px solid var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Confetti */
        .confetti {
            position: fixed;
            width: 15px;
            height: 15px;
            background: var(--secondary);
            top: 0;
            opacity: 0;
            z-index: 1000;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .header h1 {
                font-size: 2.5em;
            }
            
            .header h2 {
                font-size: 1.4em;
            }
            
            .timer {
                gap: 10px;
            }
            
            .time-unit {
                min-width: 80px;
                padding: 15px;
            }
            
            .time-value {
                font-size: 2em;
            }
            
            .card-content {
                padding: 20px;
            }
            
            .live-results-section,
            .results-section {
                padding: 20px;
            }
        }
        
        /* Animations */
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        /* Hidden class */
        .hidden {
            display: none !important;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <div class="header">
        <div class="container">
            <div class="logo-container">
                <div class="logo">
                    <i class="fas fa-graduation-cap"></i>
                </div>
                <div>
                    <h1>Excellentia Academia</h1>
                    <h2>√âloquence en Sc√®ne</h2>
                </div>
            </div>
            
            <div class="event-info">
                <div class="info-item">
                    <i class="fas fa-calendar-alt"></i>
                    <span>1er Janvier 2026</span>
                </div>
                <div class="info-item">
                    <i class="fas fa-clock"></i>
                    <span>Fin du vote: 23:59</span>
                </div>
                <div class="info-item">
                    <i class="fas fa-trophy"></i>
                    <span>Concours d'√âloquence</span>
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <!-- Timer -->
        <div class="timer-section">
            <div class="timer-title">
                <i class="fas fa-hourglass-half"></i>
                <span>TEMPS RESTANT POUR VOTER</span>
            </div>
            <div class="timer">
                <div class="time-unit">
                    <div class="time-value" id="days">00</div>
                    <div class="time-label">JOURS</div>
                </div>
                <div class="time-unit">
                    <div class="time-value" id="hours">00</div>
                    <div class="time-label">HEURES</div>
                </div>
                <div class="time-unit">
                    <div class="time-value" id="minutes">00</div>
                    <div class="time-label">MINUTES</div>
                </div>
                <div class="time-unit">
                    <div class="time-value" id="seconds">00</div>
                    <div class="time-label">SECONDES</div>
                </div>
            </div>
        </div>

        <!-- Voting Interface -->
        <div class="voting-container">
            <!-- Code Input Card -->
            <div class="card" id="codeSection">
                <div class="card-header">
                    <i class="fas fa-key"></i>
                    <h3>ACC√àS AU VOTE</h3>
                </div>
                <div class="card-content">
                    <div class="code-input-group">
                        <label for="codeInput">
                            <i class="fas fa-ticket-alt"></i>
                            VOTRE CODE DE VOTE
                        </label>
                        <div class="code-input-wrapper">
                            <input type="text" 
                                   id="codeInput" 
                                   class="code-input" 
                                   placeholder="EX: VOTE2026-7A9B3C"
                                   maxlength="20"
                                   style="text-transform: uppercase;">
                            <div class="code-input-icon">
                                <i class="fas fa-unlock"></i>
                            </div>
                        </div>
                        <p style="margin-top: 10px; color: #666; font-size: 0.9em;">
                            <i class="fas fa-info-circle"></i>
                            Code unique fourni par l'organisation
                        </p>
                    </div>
                    
                    <div class="alert" id="codeAlert"></div>
                    
                    <button class="btn" id="verifyCodeBtn">
                        <i class="fas fa-check-circle"></i>
                        VALIDER LE CODE
                    </button>
                </div>
            </div>

            <!-- Voting Card -->
            <div class="card hidden" id="voteSection">
                <div class="card-header">
                    <i class="fas fa-vote-yea"></i>
                    <h3>VOTER POUR UN ORATEUR</h3>
                </div>
                <div class="card-content">
                    <div style="margin-bottom: 20px;">
                        <p><strong>Code valid√© :</strong> <span id="currentCode" style="color: var(--accent); font-weight: bold;"></span></p>
                        <p style="color: #666; margin-top: 5px;">
                            <i class="fas fa-exclamation-circle"></i>
                            S√©lectionnez votre candidat pr√©f√©r√©
                        </p>
                    </div>

                    <!-- Candidates Grid -->
                    <div class="candidates-grid">
                        <!-- Candidate 1 -->
                        <div class="candidate-card" data-choice="Emma Laurent">
                            <div class="candidate-header">
                                <div class="candidate-number">1</div>
                                <div class="candidate-avatar">
                                    <i class="fas fa-user-tie"></i>
                                </div>
                                <div>
                                    <div class="candidate-name">Emma Laurent</div>
                                    <div class="candidate-theme">"Le pouvoir des mots"</div>
                                </div>
                            </div>
                            <div class="candidate-body">
                                <div class="candidate-quote">
                                    "Les mots peuvent changer le monde, une phrase √† la fois."
                                </div>
                                <div style="text-align: center;">
                                    <div style="color: var(--primary); font-weight: 600; margin-bottom: 10px;">
                                        <i class="fas fa-university"></i> Sciences Po Paris
                                    </div>
                                    <div style="font-size: 0.9em; color: #666;">
                                        Sp√©cialit√©: Rh√©torique classique
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Candidate 2 -->
                        <div class="candidate-card" data-choice="Thomas Dubois">
                            <div class="candidate-header">
                                <div class="candidate-number">2</div>
                                <div class="candidate-avatar">
                                    <i class="fas fa-user-graduate"></i>
                                </div>
                                <div>
                                    <div class="candidate-name">Thomas Dubois</div>
                                    <div class="candidate-theme">"L'√©loquence num√©rique"</div>
                                </div>
                            </div>
                            <div class="candidate-body">
                                <div class="candidate-quote">
                                    "Dans un monde connect√©, l'√©loquence doit trouver sa place digitale."
                                </div>
                                <div style="text-align: center;">
                                    <div style="color: var(--primary); font-weight: 600; margin-bottom: 10px;">
                                        <i class="fas fa-laptop-code"></i> √âcole 42
                                    </div>
                                    <div style="font-size: 0.9em; color: #666;">
                                        Sp√©cialit√©: Communication digitale
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Candidate 3 -->
                        <div class="candidate-card" data-choice="Sophie Martin">
                            <div class="candidate-header">
                                <div class="candidate-number">3</div>
                                <div class="candidate-avatar">
                                    <i class="fas fa-user-md"></i>
                                </div>
                                <div>
                                    <div class="candidate-name">Sophie Martin</div>
                                    <div class="candidate-theme">"La parole qui gu√©rit"</div>
                                </div>
                            </div>
                            <div class="candidate-body">
                                <div class="candidate-quote">
                                    "Les mots peuvent soigner, apaiser et r√©conforter."
                                </div>
                                <div style="text-align: center;">
                                    <div style="color: var(--primary); font-weight: 600; margin-bottom: 10px;">
                                        <i class="fas fa-heartbeat"></i> Facult√© de M√©decine
                                    </div>
                                    <div style="font-size: 0.9em; color: #666;">
                                        Sp√©cialit√©: Communication th√©rapeutique
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Candidate 4 -->
                        <div class="candidate-card" data-choice="Lucas Bernard">
                            <div class="candidate-header">
                                <div class="candidate-number">4</div>
                                <div class="candidate-avatar">
                                    <i class="fas fa-theater-masks"></i>
                                </div>
                                <div>
                                    <div class="candidate-name">Lucas Bernard</div>
                                    <div class="candidate-theme">"L'art de la sc√®ne"</div>
                                </div>
                            </div>
                            <div class="candidate-body">
                                <div class="candidate-quote">
                                    "Chaque discours est une performance, chaque mot un geste."
                                </div>
                                <div style="text-align: center;">
                                    <div style="color: var(--primary); font-weight: 600; margin-bottom: 10px;">
                                        <i class="fas fa-drama-masks"></i> Conservatoire National
                                    </div>
                                    <div style="font-size: 0.9em; color: #666;">
                                        Sp√©cialit√©: Art oratoire th√©√¢tral
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="alert" id="voteAlert"></div>

                    <button class="btn" id="submitVoteBtn" disabled>
                        <i class="fas fa-paper-plane"></i>
                        CONFIRMER MON VOTE
                    </button>
                </div>
            </div>
        </div>

        <!-- Loading -->
        <div class="loading hidden" id="loading">
            <div class="spinner"></div>
            <p>Traitement en cours...</p>
        </div>

        <!-- NOUVELLE SECTION : √âvolution en temps r√©el -->
        <div class="live-results-section" id="liveResultsSection">
            <div class="live-results-header">
                <div class="live-results-title">
                    <i class="fas fa-chart-line"></i>
                    √âVOLUTION EN TEMPS R√âEL
                </div>
                <button class="btn" id="refreshLiveResultsBtn" style="width: auto;">
                    <i class="fas fa-sync-alt"></i>
                    ACTUALISER
                </button>
            </div>

            <!-- Information personnelle du vote -->
            <div class="personal-vote-info" id="personalVoteInfo">
                <div class="personal-vote-content">
                    <div class="personal-vote-icon">
                        <i class="fas fa-user-check"></i>
                    </div>
                    <div class="personal-vote-text">
                        <h4>Votre vote a √©t√© enregistr√©</h4>
                        <p>Vous avez vot√© pour : <strong id="yourVoteCandidate">[Nom du candidat]</strong></p>
                        <p style="font-size: 0.8em; margin-top: 5px;">
                            <i class="fas fa-clock"></i> 
                            Votre vote a √©t√© enregistr√© √† <span id="yourVoteTime">--:--</span>
                        </p>
                    </div>
                </div>
            </div>

            <!-- Grille des r√©sultats en direct -->
            <div class="live-results-grid" id="liveResultsContainer">
                <!-- Les r√©sultats seront charg√©s ici -->
            </div>

            <!-- Disclaimer -->
            <div class="results-disclaimer">
                <p>
                    <i class="fas fa-info-circle"></i>
                    Ces r√©sultats sont en temps r√©el mais ne seront d√©finitifs qu'apr√®s la fin du vote le 1er Janvier 2026 √† 23:59
                </p>
            </div>
        </div>

        <!-- Results Section -->
        <div class="results-section hidden" id="resultsSection">
            <div class="results-header">
                <div class="results-title">
                    <i class="fas fa-chart-bar"></i>
                    R√âSULTATS FINAUX DU CONCOURS
                </div>
                <button class="btn" id="refreshResultsBtn" style="width: auto;">
                    <i class="fas fa-sync-alt"></i>
                    ACTUALISER
                </button>
            </div>

            <div class="results-grid" id="resultsContainer">
                <!-- Results will be loaded here -->
            </div>

            <div style="text-align: center; margin-top: 30px;">
                <div class="alert" id="resultsAlert"></div>
                <p style="color: #666; font-style: italic;">
                    <i class="fas fa-info-circle"></i>
                    Les r√©sultats d√©finitifs. Derni√®re mise √† jour : <span id="lastUpdate">--:--</span>
                </p>
            </div>
        </div>

        <!-- End of Voting Message -->
        <div class="card hidden" id="endSection">
            <div class="card-header" style="background: linear-gradient(135deg, #666 0%, #333 100%);">
                <i class="fas fa-flag-checkered"></i>
                <h3>VOTE TERMIN√â</h3>
            </div>
            <div class="card-content" style="text-align: center; padding: 50px 30px;">
                <div style="font-size: 5em; color: var(--secondary); margin-bottom: 20px;">
                    <i class="fas fa-trophy"></i>
                </div>
                <h2 style="color: var(--primary); margin-bottom: 20px; font-size: 2em;">
                    Le concours "√âloquence en Sc√®ne" est termin√© !
                </h2>
                <p style="font-size: 1.2em; color: #666; margin-bottom: 30px;">
                    Merci √† tous les participants et aux spectateurs d'avoir pris part √† cet √©v√©nement exceptionnel.<br>
                    Les r√©sultats d√©finitifs sont disponibles ci-dessous.
                </p>
                <div style="background: #f8f4e6; padding: 20px; border-radius: 15px; display: inline-block;">
                    <div style="font-size: 1.5em; color: var(--primary); font-weight: bold;">
                        <i class="fas fa-calendar-star"></i>
                        C√©r√©monie de remise des prix : 15 Janvier 2026
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <div class="footer">
        <div class="container">
            <div class="footer-logo">Excellentia Academia</div>
            
            <div class="footer-info">
                <div class="footer-section">
                    <h4>CONTACT</h4>
                    <p>contact@excellentia-academia.fr</p>
                    <p>01 23 45 67 89</p>
                </div>
                
                <div class="footer-section">
                    <h4>ADRESSE</h4>
                    <p>123 Rue de l'√âloquence</p>
                    <p>75000 Paris, France</p>
                </div>
                
                <div class="footer-section">
                    <h4>SUIVEZ-NOUS</h4>
                    <div style="display: flex; gap: 15px; justify-content: center; margin-top: 10px;">
                        <i class="fab fa-twitter" style="font-size: 1.5em;"></i>
                        <i class="fab fa-facebook" style="font-size: 1.5em;"></i>
                        <i class="fab fa-instagram" style="font-size: 1.5em;"></i>
                        <i class="fab fa-linkedin" style="font-size: 1.5em;"></i>
                    </div>
                </div>
            </div>
            
            <div class="copyright">
                ¬© 2025-2026 Excellentia Academia - Tous droits r√©serv√©s<br>
                Syst√®me de vote s√©curis√© - Un vote par participant
            </div>
        </div>
    </div>

    <script type="module">
        // Configuration Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyAUYpCBlPUnnsCyvqrfMmY5uacjHLGVRh0",
            authDomain: "match-a2ac6.firebaseapp.com",
            projectId: "match-a2ac6",
            storageBucket: "match-a2ac6.firebasestorage.app",
            messagingSenderId: "376894292796",
            appId: "1:376894292796:web:1eb138830c92aae8df5439",
            measurementId: "G-2RSRSSFCDZ"
        };

        // Initialiser Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        // Date de fin du vote : 1er janvier 2026, 23:59:59
const VOTE_END_DATE = new Date('2026-01-01T23:59:59');

        // Variables d'√©tat
        let currentCode = null;
        let selectedCandidate = null;
        let userVoteData = null;

        // Mettre √† jour le chronom√®tre
        function updateCountdown() {
            const now = new Date();
            const timeLeft = VOTE_END_DATE - now;
            
            if (timeLeft <= 0) {
                document.getElementById('days').textContent = "00";
                document.getElementById('hours').textContent = "00";
                document.getElementById('minutes').textContent = "00";
                document.getElementById('seconds').textContent = "00";
                
                const timerTitle = document.querySelector('.timer-title');
                timerTitle.innerHTML = '<i class="fas fa-flag-checkered"></i> VOTE TERMIN√â';
                timerTitle.style.color = '#dc3545';
                
                finDuVote();
                return;
            }
            
            const days = Math.floor(timeLeft / (1000 * 60 * 60 * 24));
            const hours = Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);
            
            document.getElementById('days').textContent = days.toString().padStart(2, '0');
            document.getElementById('hours').textContent = hours.toString().padStart(2, '0');
            document.getElementById('minutes').textContent = minutes.toString().padStart(2, '0');
            document.getElementById('seconds').textContent = seconds.toString().padStart(2, '0');
            
            // Animation de pulse pour les derni√®res minutes
            if (timeLeft < 5 * 60 * 1000) { // 5 minutes restantes
                document.querySelector('.timer-section').classList.add('pulse');
            }
        }

        // Fonction appel√©e √† la fin du vote
        function finDuVote() {
            document.getElementById('codeSection').classList.add('hidden');
            document.getElementById('voteSection').classList.add('hidden');
            document.getElementById('endSection').classList.remove('hidden');
            document.getElementById('resultsSection').classList.remove('hidden');
            document.getElementById('liveResultsSection').classList.add('hidden');
            
            // D√©sactiver les boutons
            document.getElementById('verifyCodeBtn').disabled = true;
            document.getElementById('codeInput').disabled = true;
            
            // Afficher les r√©sultats finaux
            afficherResultatsFinaux();
            
            // Cr√©er des confettis
            createConfetti();
        }

        // Cr√©er des confettis pour c√©l√©brer
        function createConfetti() {
            const colors = ['#8B4513', '#D4AF37', '#228B22', '#654321'];
            for (let i = 0; i < 150; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 100 + 'vw';
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.opacity = Math.random();
                confetti.style.transform = `rotate(${Math.random() * 360}deg)`;
                
                document.body.appendChild(confetti);
                
                // Animation
                const animation = confetti.animate([
                    { top: '-10px', opacity: 1 },
                    { top: '100vh', opacity: 0 }
                ], {
                    duration: Math.random() * 3000 + 2000,
                    easing: 'cubic-bezier(0.215, 0.610, 0.355, 1)'
                });
                
                animation.onfinish = () => confetti.remove();
            }
        }

        // V√©rifier si le code est valide
        async function verifierCode(code) {
            try {
                showLoading(true);
                
                const codeRef = db.collection('codes').doc(code);
                const doc = await codeRef.get();
                
                if (!doc.exists) {
                    showAlert('codeAlert', 'error', '‚ùå Code invalide. V√©rifiez votre code de vote.');
                    return false;
                }
                
                const codeData = doc.data();
                
                if (!codeData.estValide) {
                    showAlert('codeAlert', 'error', '‚ùå Ce code a √©t√© d√©sactiv√© par l\'administration.');
                    return false;
                }
                
                if (codeData.utilise) {
                    // Si le code a d√©j√† √©t√© utilis√©, r√©cup√©rer les infos du vote
                    const voteInfo = await getVoteInfoByCode(code);
                    if (voteInfo) {
                        userVoteData = voteInfo;
                        showAlert('codeAlert', 'success', '‚úÖ Vous avez d√©j√† vot√© pour ' + voteInfo.candidat + '. Consultez les r√©sultats en direct ci-dessous.');
                        
                        // Afficher la section r√©sultats en direct
                        document.getElementById('liveResultsSection').style.display = 'block';
                        afficherInfoVotePersonnel(voteInfo);
                        afficherResultatsEnDirect();
                        return 'deja_vote';
                    } else {
                        showAlert('codeAlert', 'error', '‚ùå Ce code a d√©j√† √©t√© utilis√©.');
                        return false;
                    }
                }
                
                showAlert('codeAlert', 'success', '‚úÖ Code valid√© ! S√©lectionnez maintenant votre orateur pr√©f√©r√©.');
                return true;
            } catch (error) {
                console.error('Erreur de v√©rification:', error);
                showAlert('codeAlert', 'error', '‚ö†Ô∏è Erreur de connexion. Veuillez r√©essayer.');
                return false;
            } finally {
                showLoading(false);
            }
        }

        // R√©cup√©rer les informations d'un vote par code
        async function getVoteInfoByCode(code) {
            try {
                const votesRef = db.collection('votes');
                const querySnapshot = await votesRef.where('code', '==', code).get();
                
                if (!querySnapshot.empty) {
                    const voteDoc = querySnapshot.docs[0];
                    return voteDoc.data();
                }
                return null;
            } catch (error) {
                console.error('Erreur:', error);
                return null;
            }
        }

        // Afficher les informations du vote personnel
        function afficherInfoVotePersonnel(voteData) {
            const personalVoteInfo = document.getElementById('personalVoteInfo');
            const candidateName = document.getElementById('yourVoteCandidate');
            const voteTime = document.getElementById('yourVoteTime');
            
            candidateName.textContent = voteData.candidat;
            
            if (voteData.dateVote && voteData.dateVote.toDate) {
                const date = voteData.dateVote.toDate();
                voteTime.textContent = date.toLocaleTimeString('fr-FR', { 
                    hour: '2-digit', 
                    minute: '2-digit' 
                });
            } else {
                voteTime.textContent = new Date().toLocaleTimeString('fr-FR', { 
                    hour: '2-digit', 
                    minute: '2-digit' 
                });
            }
            
            personalVoteInfo.style.display = 'block';
        }

        // Enregistrer le vote
        async function enregistrerVote(code, candidat) {
            try {
                showLoading(true);
                
                // V√©rifier que le vote n'est pas termin√©
                if (new Date() > VOTE_END_DATE) {
                    showAlert('voteAlert', 'error', '‚è∞ Le vote est termin√©. Merci de votre participation.');
                    return false;
                }

                const batch = db.batch();
                const codeRef = db.collection('codes').doc(code);
                const voteRef = db.collection('votes').doc();
                
                // Marquer le code comme utilis√©
                batch.update(codeRef, {
                    utilise: true,
                    dateUtilisation: firebase.firestore.FieldValue.serverTimestamp()
                });
                
                // Enregistrer le vote
                batch.set(voteRef, {
                    code: code,
                    candidat: candidat,
                    dateVote: firebase.firestore.FieldValue.serverTimestamp(),
                    userAgent: navigator.userAgent.substring(0, 100)
                });
                
                await batch.commit();
                
                // Stocker les donn√©es du vote pour affichage
                userVoteData = {
                    code: code,
                    candidat: candidat,
                    dateVote: new Date()
                };
                
                showAlert('voteAlert', 'success', 'üéâ Votre vote a √©t√© enregistr√© avec succ√®s ! Merci pour votre participation.');
                return true;
            } catch (error) {
                console.error('Erreur d\'enregistrement:', error);
                showAlert('voteAlert', 'error', '‚ùå Erreur lors de l\'enregistrement. Veuillez r√©essayer.');
                return false;
            } finally {
                showLoading(false);
            }
        }

        // Afficher les r√©sultats en direct
        async function afficherResultatsEnDirect() {
            try {
                const votesRef = db.collection('votes');
                const snapshot = await votesRef.get();
                
                const resultats = {
                    'Emma Laurent': 0,
                    'Thomas Dubois': 0,
                    'Sophie Martin': 0,
                    'Lucas Bernard': 0
                };
                
                let totalVotes = 0;
                snapshot.forEach(doc => {
                    const vote = doc.data();
                    if (resultats[vote.candidat] !== undefined) {
                        resultats[vote.candidat]++;
                        totalVotes++;
                    }
                });
                
                // Trier les r√©sultats
                const sortedResults = Object.entries(resultats)
                    .sort((a, b) => b[1] - a[1]);
                
                const container = document.getElementById('liveResultsContainer');
                let html = '';
                
                sortedResults.forEach(([candidat, votes], index) => {
                    const percentage = totalVotes > 0 ? ((votes / totalVotes) * 100).toFixed(1) : 0;
                    const isUserVote = userVoteData && userVoteData.candidat === candidat;
                    
                    html += `
                        <div class="live-result-item" ${isUserVote ? 'style="border: 2px solid var(--primary);"' : ''}>
                            <div class="live-result-name">${candidat}</div>
                            ${isUserVote ? '<div style="color: var(--primary); font-size: 0.9em; margin-bottom: 5px;"><i class="fas fa-user-check"></i> Votre choix</div>' : ''}
                            <div class="live-result-votes">${votes}</div>
                            <div class="live-result-percentage">${percentage}%</div>
                            <div class="live-result-bar">
                                <div class="live-result-fill" style="width: ${percentage}%"></div>
                            </div>
                        </div>
                    `;
                });
                
                container.innerHTML = html;
                
                // Afficher la section si elle ne l'est pas d√©j√†
                document.getElementById('liveResultsSection').style.display = 'block';
                
            } catch (error) {
                console.error('Erreur de calcul:', error);
            }
        }

        // Afficher les r√©sultats finaux
        async function afficherResultatsFinaux() {
            try {
                const votesRef = db.collection('votes');
                const snapshot = await votesRef.get();
                
                const resultats = {
                    'Emma Laurent': 0,
                    'Thomas Dubois': 0,
                    'Sophie Martin': 0,
                    'Lucas Bernard': 0
                };
                
                let totalVotes = 0;
                snapshot.forEach(doc => {
                    const vote = doc.data();
                    if (resultats[vote.candidat] !== undefined) {
                        resultats[vote.candidat]++;
                        totalVotes++;
                    }
                });
                
                // Trier les r√©sultats
                const sortedResults = Object.entries(resultats)
                    .sort((a, b) => b[1] - a[1])
                    .slice(0, 4);
                
                const container = document.getElementById('resultsContainer');
                let html = '';
                
                // Ajouter le total des votes
                html += `
                    <div class="result-item" style="grid-column: 1 / -1; background: linear-gradient(135deg, #f8f4e6 0%, #f0e8d6 100%);">
                        <div class="result-name" style="font-size: 1.5em;">
                            <i class="fas fa-chart-pie"></i> TOTAL DES VOTES
                        </div>
                        <div class="result-votes" style="font-size: 4em; color: var(--primary);">
                            ${totalVotes}
                        </div>
                        <div style="color: #666; margin-top: 10px;">
                            ${totalVotes} votes enregistr√©s
                        </div>
                    </div>
                `;
                
                sortedResults.forEach(([candidat, votes], index) => {
                    const percentage = totalVotes > 0 ? ((votes / totalVotes) * 100).toFixed(1) : 0;
                    const isWinner = index === 0 && totalVotes > 0;
                    
                    html += `
                        <div class="result-item ${isWinner ? 'winner' : ''}">
                            <div class="result-rank">${index + 1}</div>
                            <div class="result-name">${candidat}</div>
                            <div class="result-votes">${votes}</div>
                            <div class="result-percentage">${percentage}%</div>
                            <div class="result-bar">
                                <div class="result-fill" style="width: ${percentage}%"></div>
                            </div>
                            <div style="margin-top: 10px; font-size: 0.9em; color: #666;">
                                <i class="fas fa-microphone"></i> ${candidat.split(' ')[0]}
                            </div>
                        </div>
                    `;
                });
                
                container.innerHTML = html;
                
                // Mettre √† jour l'heure
                const updateTime = new Date();
                document.getElementById('lastUpdate').textContent = 
                    `${updateTime.getHours().toString().padStart(2, '0')}:${updateTime.getMinutes().toString().padStart(2, '0')}`;
                
            } catch (error) {
                console.error('Erreur de calcul:', error);
            }
        }

        // Afficher une alerte
        function showAlert(elementId, type, message) {
            const alert = document.getElementById(elementId);
            alert.textContent = message;
            alert.className = `alert ${type}`;
            alert.style.display = 'block';
            
            setTimeout(() => {
                alert.style.display = 'none';
            }, 5000);
        }

        // Afficher/masquer le loading
        function showLoading(show) {
            document.getElementById('loading').classList.toggle('hidden', !show);
        }

        // Gestionnaires d'√©v√©nements
        document.addEventListener('DOMContentLoaded', () => {
            // Initialisation
            updateCountdown();
            const countdownInterval = setInterval(updateCountdown, 1000);
            
            // V√©rifier si le vote est termin√©
            if (new Date() > VOTE_END_DATE) {
                clearInterval(countdownInterval);
                finDuVote();
            }
            
            // Bouton de v√©rification du code
            document.getElementById('verifyCodeBtn').addEventListener('click', async () => {
                const codeInput = document.getElementById('codeInput');
                const code = codeInput.value.trim().toUpperCase();
                
                if (!code) {
                    showAlert('codeAlert', 'error', '‚ö†Ô∏è Veuillez entrer votre code de vote.');
                    codeInput.focus();
                    return;
                }
                
                if (!code.startsWith('VOTE2026-')) {
                    showAlert('codeAlert', 'error', '‚ö†Ô∏è Format de code invalide. Le code doit commencer par VOTE2026-');
                    return;
                }
                
                const isValid = await verifierCode(code);
                
                if (isValid === true) {
                    currentCode = code;
                    document.getElementById('currentCode').textContent = code;
                    document.getElementById('codeSection').classList.add('hidden');
                    document.getElementById('voteSection').classList.remove('hidden');
                    document.getElementById('voteSection').classList.add('fade-in');
                } else if (isValid === 'deja_vote') {
                    // L'utilisateur a d√©j√† vot√©, on affiche juste les r√©sultats
                    currentCode = code;
                    document.getElementById('currentCode').textContent = code;
                    document.getElementById('codeSection').classList.add('hidden');
                    document.getElementById('voteSection').classList.add('hidden');
                }
            });
            
            // S√©lection des candidats
            document.querySelectorAll('.candidate-card').forEach(card => {
                card.addEventListener('click', () => {
                    // Retirer la s√©lection pr√©c√©dente
                    document.querySelectorAll('.candidate-card').forEach(c => {
                        c.classList.remove('selected');
                    });
                    
                    // Ajouter la nouvelle s√©lection
                    card.classList.add('selected');
                    selectedCandidate = card.dataset.choice;
                    document.getElementById('submitVoteBtn').disabled = false;
                    
                    // Animation
                    card.style.animation = 'none';
                    setTimeout(() => {
                        card.style.animation = 'pulse 0.5s';
                    }, 10);
                });
            });
            
            // Soumission du vote
            document.getElementById('submitVoteBtn').addEventListener('click', async () => {
                if (!currentCode || !selectedCandidate) {
                    showAlert('voteAlert', 'error', '‚ö†Ô∏è Veuillez s√©lectionner un candidat.');
                    return;
                }
                
                // Confirmation
                if (!confirm(`Confirmez-vous votre vote pour ${selectedCandidate} ?\n\nCette action est d√©finitive.`)) {
                    return;
                }
                
                const success = await enregistrerVote(currentCode, selectedCandidate);
                
                if (success) {
                    // Afficher les informations du vote personnel
                    afficherInfoVotePersonnel({
                        code: currentCode,
                        candidat: selectedCandidate,
                        dateVote: new Date()
                    });
                    
                    // Afficher les r√©sultats en direct
                    afficherResultatsEnDirect();
                    
                    // Animation de transition
                    document.getElementById('voteSection').style.animation = 'fadeOut 0.5s';
                    
                    setTimeout(() => {
                        document.getElementById('voteSection').classList.add('hidden');
                        document.getElementById('liveResultsSection').style.display = 'block';
                        document.getElementById('liveResultsSection').classList.add('fade-in');
                        
                        // Jouer un son de succ√®s
                        const audio = new Audio('data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEAQB8AAEAfAAABAAgAZGF0YQ');
                        audio.play().catch(() => {});
                    }, 500);
                }
            });
            
            // Rafra√Æchir les r√©sultats en direct
            document.getElementById('refreshLiveResultsBtn').addEventListener('click', afficherResultatsEnDirect);
            
            // Rafra√Æchir les r√©sultats finaux
            document.getElementById('refreshResultsBtn').addEventListener('click', afficherResultatsFinaux);
            
            // Entr√©e pour valider le code
            document.getElementById('codeInput').addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    document.getElementById('verifyCodeBtn').click();
                }
            });
            
            // Auto-format du code
            document.getElementById('codeInput').addEventListener('input', function(e) {
                this.value = this.value.toUpperCase();
            });
        });
    </script>
</body>
</html>